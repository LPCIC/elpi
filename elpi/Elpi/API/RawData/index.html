<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>RawData (elpi.Elpi.API.RawData)</title><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">elpi</a> &#x00BB; <a href="../../index.html">Elpi</a> &#x00BB; <a href="../index.html">API</a> &#x00BB; RawData</nav><header class="odoc-preamble"><h1>Module <code><span>API.RawData</span></code></h1><p>This module exposes the low level representation of terms. * * The data type <code>term</code> is opaque and can only be accessed by using the * <code>look</code> API that exposes a term <code>view</code>. The <code>look</code> view automatically * substitutes assigned unification variables by their value.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-constant" class="anchored"><a href="#type-constant" class="anchor"></a><code><span><span class="keyword">type</span> constant</span><span> = <a href="../Ast/Term/index.html#type-constant">Ast.Term.constant</a></span></code></div></div><p>De Bruijn levels (not indexes): the distance of the binder from the root. starts at 0 and grows for bound variables; global constants have negative values.</p><div class="odoc-spec"><div class="spec type" id="type-builtin" class="anchored"><a href="#type-builtin" class="anchor"></a><code><span><span class="keyword">type</span> builtin</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-term" class="anchored"><a href="#type-term" class="anchor"></a><code><span><span class="keyword">type</span> term</span><span> = <a href="../Data/index.html#type-term">Data.term</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-view" class="anchored"><a href="#type-view" class="anchor"></a><code><span><span class="keyword">type</span> view</span><span> = <span class="keyword">private</span> </span></code><table><tr id="type-view.Const" class="anchored"><td class="def variant constructor"><a href="#type-view.Const" class="anchor"></a><code><span>| </span><span><span class="constructor">Const</span> <span class="keyword">of</span> int</span></code></td></tr><tr id="type-view.Lam" class="anchored"><td class="def variant constructor"><a href="#type-view.Lam" class="anchor"></a><code><span>| </span><span><span class="constructor">Lam</span> <span class="keyword">of</span> <a href="#type-term">term</a></span></code></td></tr><tr id="type-view.App" class="anchored"><td class="def variant constructor"><a href="#type-view.App" class="anchor"></a><code><span>| </span><span><span class="constructor">App</span> <span class="keyword">of</span> int * <a href="#type-term">term</a> * <span><a href="#type-term">term</a> list</span></span></code></td></tr><tr id="type-view.Cons" class="anchored"><td class="def variant constructor"><a href="#type-view.Cons" class="anchor"></a><code><span>| </span><span><span class="constructor">Cons</span> <span class="keyword">of</span> <a href="#type-term">term</a> * <a href="#type-term">term</a></span></code></td></tr><tr id="type-view.Nil" class="anchored"><td class="def variant constructor"><a href="#type-view.Nil" class="anchor"></a><code><span>| </span><span><span class="constructor">Nil</span></span></code></td></tr><tr id="type-view.Builtin" class="anchored"><td class="def variant constructor"><a href="#type-view.Builtin" class="anchor"></a><code><span>| </span><span><span class="constructor">Builtin</span> <span class="keyword">of</span> <a href="#type-builtin">builtin</a> * <span><a href="#type-term">term</a> list</span></span></code></td></tr><tr id="type-view.CData" class="anchored"><td class="def variant constructor"><a href="#type-view.CData" class="anchor"></a><code><span>| </span><span><span class="constructor">CData</span> <span class="keyword">of</span> <a href="../RawOpaqueData/index.html#type-t">RawOpaqueData.t</a></span></code></td></tr><tr id="type-view.UnifVar" class="anchored"><td class="def variant constructor"><a href="#type-view.UnifVar" class="anchor"></a><code><span>| </span><span><span class="constructor">UnifVar</span> <span class="keyword">of</span> <a href="../FlexibleData/Elpi/index.html#type-t">FlexibleData.Elpi.t</a> * <span><a href="#type-term">term</a> list</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-look" class="anchored"><a href="#val-look" class="anchor"></a><code><span><span class="keyword">val</span> look : <span>depth:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-term">term</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-view">view</a></span></code></div><div class="spec-doc"><p>Terms must be inspected after dereferencing their head. If the resulting term is UVar then its uvar_body is such that get_assignment uvar_body = None</p></div></div><div class="odoc-spec"><div class="spec value" id="val-kool" class="anchored"><a href="#val-kool" class="anchor"></a><code><span><span class="keyword">val</span> kool : <span><a href="#type-view">view</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-term">term</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mkBound" class="anchored"><a href="#val-mkBound" class="anchor"></a><code><span><span class="keyword">val</span> mkBound : <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-term">term</a></span></code></div><div class="spec-doc"><p>Smart constructors</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mkLam" class="anchored"><a href="#val-mkLam" class="anchor"></a><code><span><span class="keyword">val</span> mkLam : <span><a href="#type-term">term</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-term">term</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mkCons" class="anchored"><a href="#val-mkCons" class="anchor"></a><code><span><span class="keyword">val</span> mkCons : <span><a href="#type-term">term</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-term">term</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-term">term</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mkNil" class="anchored"><a href="#val-mkNil" class="anchor"></a><code><span><span class="keyword">val</span> mkNil : <a href="#type-term">term</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mkDiscard" class="anchored"><a href="#val-mkDiscard" class="anchor"></a><code><span><span class="keyword">val</span> mkDiscard : <a href="#type-term">term</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mkCData" class="anchored"><a href="#val-mkCData" class="anchor"></a><code><span><span class="keyword">val</span> mkCData : <span><a href="../RawOpaqueData/index.html#type-t">RawOpaqueData.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-term">term</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mkUnifVar" class="anchored"><a href="#val-mkUnifVar" class="anchor"></a><code><span><span class="keyword">val</span> mkUnifVar : <span><a href="../FlexibleData/Elpi/index.html#type-t">FlexibleData.Elpi.t</a> <span class="arrow">&#45;&gt;</span></span> <span>args:<span><a href="#type-term">term</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../State/index.html#type-t">State.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-term">term</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mkGlobal" class="anchored"><a href="#val-mkGlobal" class="anchor"></a><code><span><span class="keyword">val</span> mkGlobal : <span><a href="#type-constant">constant</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-term">term</a></span></code></div><div class="spec-doc"><p>Lower level smart constructors</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mkAppGlobal" class="anchored"><a href="#val-mkAppGlobal" class="anchor"></a><code><span><span class="keyword">val</span> mkAppGlobal : <span><a href="#type-constant">constant</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-term">term</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-term">term</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-term">term</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mkAppGlobalL" class="anchored"><a href="#val-mkAppGlobalL" class="anchor"></a><code><span><span class="keyword">val</span> mkAppGlobalL : <span><a href="#type-constant">constant</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-term">term</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-term">term</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mkAppBound" class="anchored"><a href="#val-mkAppBound" class="anchor"></a><code><span><span class="keyword">val</span> mkAppBound : <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-term">term</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-term">term</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-term">term</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mkAppBoundL" class="anchored"><a href="#val-mkAppBoundL" class="anchor"></a><code><span><span class="keyword">val</span> mkAppBoundL : <span>int <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-term">term</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-term">term</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mkBuiltin" class="anchored"><a href="#val-mkBuiltin" class="anchor"></a><code><span><span class="keyword">val</span> mkBuiltin : <span><a href="#type-builtin">builtin</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-term">term</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-term">term</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mkConst" class="anchored"><a href="#val-mkConst" class="anchor"></a><code><span><span class="keyword">val</span> mkConst : <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-term">term</a></span></code></div><div class="spec-doc"><p>no check, works for globals and bound</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mkApp" class="anchored"><a href="#val-mkApp" class="anchor"></a><code><span><span class="keyword">val</span> mkApp : <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-term">term</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-term">term</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-term">term</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mkAppMoreArgs" class="anchored"><a href="#val-mkAppMoreArgs" class="anchor"></a><code><span><span class="keyword">val</span> mkAppMoreArgs : <span>depth:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-term">term</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-term">term</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-term">term</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-isApp" class="anchored"><a href="#val-isApp" class="anchor"></a><code><span><span class="keyword">val</span> isApp : <span>depth:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-term">term</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-cmp_builtin" class="anchored"><a href="#val-cmp_builtin" class="anchor"></a><code><span><span class="keyword">val</span> cmp_builtin : <span><a href="#type-builtin">builtin</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-builtin">builtin</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-hyp" class="anchored"><a href="#type-hyp" class="anchor"></a><code><span><span class="keyword">type</span> hyp</span><span> = </span><span>{</span></code><table><tr id="type-hyp.hdepth" class="anchored"><td class="def record field"><a href="#type-hyp.hdepth" class="anchor"></a><code><span>hdepth : int;</span></code></td></tr><tr id="type-hyp.hsrc" class="anchored"><td class="def record field"><a href="#type-hyp.hsrc" class="anchor"></a><code><span>hsrc : <a href="#type-term">term</a>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-hyps" class="anchored"><a href="#type-hyps" class="anchor"></a><code><span><span class="keyword">type</span> hyps</span><span> = <span><a href="#type-hyp">hyp</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-of_hyp" class="anchored"><a href="#val-of_hyp" class="anchor"></a><code><span><span class="keyword">val</span> of_hyp : <span><a href="../Data/index.html#type-hyp">Data.hyp</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-hyp">hyp</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-of_hyps" class="anchored"><a href="#val-of_hyps" class="anchor"></a><code><span><span class="keyword">val</span> of_hyps : <span><span><a href="../Data/index.html#type-hyp">Data.hyp</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-hyps">hyps</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-suspended_goal" class="anchored"><a href="#type-suspended_goal" class="anchor"></a><code><span><span class="keyword">type</span> suspended_goal</span><span> = </span><span>{</span></code><table><tr id="type-suspended_goal.context" class="anchored"><td class="def record field"><a href="#type-suspended_goal.context" class="anchor"></a><code><span>context : <a href="#type-hyps">hyps</a>;</span></code></td></tr><tr id="type-suspended_goal.goal" class="anchored"><td class="def record field"><a href="#type-suspended_goal.goal" class="anchor"></a><code><span>goal : int * <a href="#type-term">term</a>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-constraints" class="anchored"><a href="#val-constraints" class="anchor"></a><code><span><span class="keyword">val</span> constraints : <span><a href="../Data/index.html#type-constraints">Data.constraints</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-suspended_goal">suspended_goal</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-no_constraints" class="anchored"><a href="#val-no_constraints" class="anchor"></a><code><span><span class="keyword">val</span> no_constraints : <a href="../Data/index.html#type-constraints">Data.constraints</a></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Constants" class="anchored"><a href="#module-Constants" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Constants/index.html">Constants</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type extension" id="extension-decl-RawGoal" class="anchored"><a href="#extension-decl-RawGoal" class="anchor"></a><code><span><span class="keyword">type</span> <a href="../Conversion/index.html#type-extra_goal">Conversion.extra_goal</a> += </span></code><table><tr id="extension-RawGoal" class="anchored"><td class="def extension"><a href="#extension-RawGoal" class="anchor"></a><code><span>| </span><span><span class="extension">RawGoal</span> <span class="keyword">of</span> <a href="../Data/index.html#type-term">Data.term</a></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-set_extra_goals_postprocessing" class="anchored"><a href="#val-set_extra_goals_postprocessing" class="anchor"></a><code><span><span class="keyword">val</span> set_extra_goals_postprocessing : 
  <span>?descriptor:<a href="../Setup/index.html#type-hoas_descriptor">Setup.hoas_descriptor</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><a href="../Conversion/index.html#type-extra_goals">Conversion.extra_goals</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../State/index.html#type-t">State.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../State/index.html#type-t">State.t</a> * <a href="../Conversion/index.html#type-extra_goals">Conversion.extra_goals</a> )</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-new_hoas_descriptor" class="anchored"><a href="#val-new_hoas_descriptor" class="anchor"></a><code><span><span class="keyword">val</span> new_hoas_descriptor : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../Setup/index.html#type-hoas_descriptor">Setup.hoas_descriptor</a></span></code></div></div></div></body></html>