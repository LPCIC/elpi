<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>State (elpi.Elpi.API.State)</title><link rel="stylesheet" href="../../../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">elpi</a> &#x00BB; <a href="../../index.html">Elpi</a> &#x00BB; <a href="../index.html">API</a> &#x00BB; State</nav><header class="odoc-preamble"><h1>Module <code><span>API.State</span></code></h1><p>State is a collection of purely functional piece of data carried by the interpreter. Such data is kept in sync with the backtracking, i.e. changes made in a branch are lost if that branch fails. It can be used to both store custom constraints to be manipulated by custom solvers, or any other piece of data the host application may need to use.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value" id="val-new_state_descriptor" class="anchored"><a href="#val-new_state_descriptor" class="anchor"></a><code><span><span class="keyword">val</span> new_state_descriptor : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../Setup/index.html#type-state_descriptor">Setup.state_descriptor</a></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-component" class="anchored"><a href="#type-component" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a component</span></span></code></div><div class="spec-doc"><p>'a MUST be purely functional, i.e. backtracking is implemented by using * an old binding for 'a. * This limitation can be lifted if there is user request.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-declare" class="anchored"><a href="#val-declare" class="anchor"></a><code><span><span class="keyword">val</span> declare : 
  <span>name:string <span class="arrow">&#45;&gt;</span></span>
  <span>pp:<span>( <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>init:<span>( <span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>start:<span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-component">component</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-declare_component" class="anchored"><a href="#val-declare_component" class="anchor"></a><code><span><span class="keyword">val</span> declare_component : 
  <span>?descriptor:<a href="../Setup/index.html#type-state_descriptor">Setup.state_descriptor</a> <span class="arrow">&#45;&gt;</span></span>
  <span>name:string <span class="arrow">&#45;&gt;</span></span>
  <span>pp:<span>( <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>init:<span>( <span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>start:<span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="#type-component">component</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <a href="../Data/index.html#type-state">Data.state</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-get" class="anchored"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span><span><span class="type-var">'a</span> <a href="#type-component">component</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-set" class="anchored"><a href="#val-set" class="anchor"></a><code><span><span class="keyword">val</span> set : <span><span><span class="type-var">'a</span> <a href="#type-component">component</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-update" class="anchored"><a href="#val-update" class="anchor"></a><code><span><span class="keyword">val</span> update : <span><span><span class="type-var">'a</span> <a href="#type-component">component</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> )</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>Allowed to raise BuiltInPredicate.No_clause</p></div></div><div class="odoc-spec"><div class="spec value" id="val-update_return" class="anchored"><a href="#val-update_return" class="anchor"></a><code><span><span class="keyword">val</span> update_return : <span><span><span class="type-var">'a</span> <a href="#type-component">component</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> * <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a> * <span class="type-var">'b</span></span></code></div></div></div></body></html>