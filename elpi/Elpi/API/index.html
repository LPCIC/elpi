<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>API (elpi.Elpi.API)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">elpi</a> &#x00BB; <a href="../index.html">Elpi</a> &#x00BB; API</nav><header class="odoc-preamble"><h1>Module <code><span>Elpi.API</span></code></h1><p>This module is the API for clients of the Elpi library.</p></header><div class="odoc-content"><p>These APIs are sufficient to parse programs and queries from text, run the interpreter and finally print the result</p><div class="odoc-spec"><div class="spec module" id="module-Ast" class="anchored"><a href="#module-Ast" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Ast/index.html">Ast</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Setup" class="anchored"><a href="#module-Setup" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Setup/index.html">Setup</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Parse" class="anchored"><a href="#module-Parse" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Parse/index.html">Parse</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Data" class="anchored"><a href="#module-Data" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Data/index.html">Data</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Compile" class="anchored"><a href="#module-Compile" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Compile/index.html">Compile</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Execute" class="anchored"><a href="#module-Execute" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Execute/index.html">Execute</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Pp" class="anchored"><a href="#module-Pp" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Pp/index.html">Pp</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><p>This API lets one exchange with the host application opaque (primitive) data such as integers or strings as well as algebraic data such OCaml's ADT. No support for binders or unification variables at this point, see the RawData module.</p><div class="odoc-spec"><div class="spec module" id="module-Conversion" class="anchored"><a href="#module-Conversion" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Conversion/index.html">Conversion</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>This module defines what embedding and readback functions are</p></div></div><div class="odoc-spec"><div class="spec module" id="module-ContextualConversion" class="anchored"><a href="#module-ContextualConversion" class="anchor"></a><code><span><span class="keyword">module</span> <a href="ContextualConversion/index.html">ContextualConversion</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>This module defines what embedding and readback functions are for datatypes that need the context of the program (hypothetical clauses and constraints)</p></div></div><div class="odoc-spec"><div class="spec module" id="module-BuiltInData" class="anchored"><a href="#module-BuiltInData" class="anchor"></a><code><span><span class="keyword">module</span> <a href="BuiltInData/index.html">BuiltInData</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Conversion for Elpi's built-in data types</p></div></div><div class="odoc-spec"><div class="spec module" id="module-OpaqueData" class="anchored"><a href="#module-OpaqueData" class="anchor"></a><code><span><span class="keyword">module</span> <a href="OpaqueData/index.html">OpaqueData</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Declare data from the host application that is opaque (no syntax), like int but not like list or pair</p></div></div><div class="odoc-spec"><div class="spec module" id="module-AlgebraicData" class="anchored"><a href="#module-AlgebraicData" class="anchor"></a><code><span><span class="keyword">module</span> <a href="AlgebraicData/index.html">AlgebraicData</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Declare data from the host application that has syntax, like list or pair but not like int. So far there is no support for data with binder using this API. The type of each constructor is described using a GADT so that the code to build or match the data can be given the right type. Example: define the ADT for &quot;option a&quot;</p></div></div><div class="odoc-spec"><div class="spec module" id="module-BuiltInPredicate" class="anchored"><a href="#module-BuiltInPredicate" class="anchor"></a><code><span><span class="keyword">module</span> <a href="BuiltInPredicate/index.html">BuiltInPredicate</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-BuiltIn" class="anchored"><a href="#module-BuiltIn" class="anchor"></a><code><span><span class="keyword">module</span> <a href="BuiltIn/index.html">BuiltIn</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Setup.init takes a list of declarations of data types and predicates, plus some doc and eventually some Elpi code. All this constitutes the &quot;prelude&quot;, that is what is avaiable to an Elpi program</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Query" class="anchored"><a href="#module-Query" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Query/index.html">Query</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Commodity module to build a simple query and extract the output from the solution found by Elpi.</p></div></div><p>This API lets one access the low lever representation of terms in order to exchange data with binders and unification variables with the host application. It also lets one define quotations and extend the state theraded by Elpi with custom data.</p><div class="odoc-spec"><div class="spec module" id="module-State" class="anchored"><a href="#module-State" class="anchor"></a><code><span><span class="keyword">module</span> <a href="State/index.html">State</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>State is a collection of purely functional piece of data carried by the interpreter. Such data is kept in sync with the backtracking, i.e. changes made in a branch are lost if that branch fails. It can be used to both store custom constraints to be manipulated by custom solvers, or any other piece of data the host application may need to use.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-FlexibleData" class="anchored"><a href="#module-FlexibleData" class="anchor"></a><code><span><span class="keyword">module</span> <a href="FlexibleData/index.html">FlexibleData</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Flexible data is for unification variables. One can use Elpi's unification variables to represent the host equivalent, here the API the keep a link between the two.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-RawOpaqueData" class="anchored"><a href="#module-RawOpaqueData" class="anchor"></a><code><span><span class="keyword">module</span> <a href="RawOpaqueData/index.html">RawOpaqueData</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Low level module for OpaqueData</p></div></div><div class="odoc-spec"><div class="spec module" id="module-RawData" class="anchored"><a href="#module-RawData" class="anchor"></a><code><span><span class="keyword">module</span> <a href="RawData/index.html">RawData</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>This module exposes the low level representation of terms. * * The data type <code>term</code> is opaque and can only be accessed by using the * <code>look</code> API that exposes a term <code>view</code>. The <code>look</code> view automatically * substitutes assigned unification variables by their value.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-RawQuery" class="anchored"><a href="#module-RawQuery" class="anchor"></a><code><span><span class="keyword">module</span> <a href="RawQuery/index.html">RawQuery</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>This module lets one generate a query by providing a RawData.term directly</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Quotation" class="anchored"><a href="#module-Quotation" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Quotation/index.html">Quotation</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Utils" class="anchored"><a href="#module-Utils" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Utils/index.html">Utils</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-RawPp" class="anchored"><a href="#module-RawPp" class="anchor"></a><code><span><span class="keyword">module</span> <a href="RawPp/index.html">RawPp</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>