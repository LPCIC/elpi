<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Discrimination_tree (elpi.Elpi.Internal.Discrimination_tree)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">elpi</a> &#x00BB; <a href="../../index.html">Elpi</a> &#x00BB; <a href="../index.html">Internal</a> &#x00BB; Discrimination_tree</nav><header class="odoc-preamble"><h1>Module <code><span>Internal.Discrimination_tree</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-cell"><a href="#type-cell" class="anchor"></a><code><span><span class="keyword">type</span> cell</span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Path"><a href="#module-Path" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Path/index.html">Path</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mkConstant"><a href="#val-mkConstant" class="anchor"></a><code><span><span class="keyword">val</span> mkConstant : <span><span class="label">safe</span>:bool <span class="arrow">&#45;&gt;</span></span> <span><span class="label">data</span>:int <span class="arrow">&#45;&gt;</span></span> <span><span class="label">arity</span>:int <span class="arrow">&#45;&gt;</span></span> <a href="#type-cell">cell</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mkPrimitive"><a href="#val-mkPrimitive" class="anchor"></a><code><span><span class="keyword">val</span> mkPrimitive : <span><a href="../../../Elpi_util/Util/CData/index.html#type-t">Elpi_util.Util.CData.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-cell">cell</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mkVariable"><a href="#val-mkVariable" class="anchor"></a><code><span><span class="keyword">val</span> mkVariable : <a href="#type-cell">cell</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mkLam"><a href="#val-mkLam" class="anchor"></a><code><span><span class="keyword">val</span> mkLam : <a href="#type-cell">cell</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mkInputMode"><a href="#val-mkInputMode" class="anchor"></a><code><span><span class="keyword">val</span> mkInputMode : <a href="#type-cell">cell</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mkOutputMode"><a href="#val-mkOutputMode" class="anchor"></a><code><span><span class="keyword">val</span> mkOutputMode : <a href="#type-cell">cell</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mkListTailVariable"><a href="#val-mkListTailVariable" class="anchor"></a><code><span><span class="keyword">val</span> mkListTailVariable : <a href="#type-cell">cell</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mkListHead"><a href="#val-mkListHead" class="anchor"></a><code><span><span class="keyword">val</span> mkListHead : <a href="#type-cell">cell</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mkListEnd"><a href="#val-mkListEnd" class="anchor"></a><code><span><span class="keyword">val</span> mkListEnd : <a href="#type-cell">cell</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mkPathEnd"><a href="#val-mkPathEnd" class="anchor"></a><code><span><span class="keyword">val</span> mkPathEnd : <a href="#type-cell">cell</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-index"><a href="#val-index" class="anchor"></a><code><span><span class="keyword">val</span> index : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="Path/index.html#type-t">Path.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>index dt path value ~time</code> returns a new discrimination tree starting from <code>dt</code> where <code>value</code> is added wrt its <code>path</code>. <code>~time</code> is used as a priority marker between two rules.</p><p>A rule with a given <code>~time</code> has higher priority on other rules with lower <code>~time</code></p><p>@note: in the elpi runtime, there are no two rule having the same <code>~time</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_path"><a href="#val-max_path" class="anchor"></a><code><span><span class="keyword">val</span> max_path : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_depths"><a href="#val-max_depths" class="anchor"></a><code><span><span class="keyword">val</span> max_depths : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int array</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty_dt"><a href="#val-empty_dt" class="anchor"></a><code><span><span class="keyword">val</span> empty_dt : <span><span><span class="type-var">'b</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-retrieve"><a href="#val-retrieve" class="anchor"></a><code><span><span class="keyword">val</span> retrieve : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="Path/index.html#type-t">Path.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Elpi__.Bl.scan</span></span></span></code></div><div class="spec-doc"><p><code>retrive path dt</code> Retrives all values in a discrimination tree <code>dt</code> from a given path <code>p</code>.</p><p>The retrival algorithm performs a light unification between <code>p</code> and the nodes in the discrimination tree. This light unification takes care of unification variables that can be either in the path or in the nodes of <code>dt</code></p><p>The returned list of values are sorted wrt to the order in which values are added in the tree: given two rules r_1 and r_2 with same path, if r_1 has been added at time <code>t</code> and r_2 been added at time <code>t+1</code> then r_2 will appear before r_1 in the final result</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-replace"><a href="#val-replace" class="anchor"></a><code><span><span class="keyword">val</span> replace : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span><span class="keyword">val</span> remove : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_cell"><a href="#val-pp_cell" class="anchor"></a><code><span><span class="keyword">val</span> pp_cell : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cell">cell</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show_cell"><a href="#val-show_cell" class="anchor"></a><code><span><span class="keyword">val</span> show_cell : <span><a href="#type-cell">cell</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : 
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-show"><a href="#val-show" class="anchor"></a><code><span><span class="keyword">val</span> show : <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Internal"><a href="#module-Internal" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Internal/index.html">Internal</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
