

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Playground &mdash; Elpi  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Elpi
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">API:</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="elpi/index.html#http://">elpi</a></li>
<li class="toctree-l1"><a class="reference external" href="elpi-option-legacy-parser/index.html#http://">elpi-option-legacy-parser</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Elpi</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Playground</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/playground.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="playground">
<h1>Playground<a class="headerlink" href="#playground" title="Link to this heading"></a></h1>
<p>This page is used to test hooks in order to run <code class="docutils literal notranslate"><span class="pre">elpi</span></code> on code snippets and inject its output within <code class="docutils literal notranslate"><span class="pre">sphinx</span></code> documentation sources.</p>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading"></a></h2>
<p>Before running the hooks, make sure to have <code class="docutils literal notranslate"><span class="pre">elpi</span></code> built locally:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">eval $(opam env)</span>
<span class="go">make build</span>
</pre></div>
</div>
<p>It doesn’t hurt to check that <code class="docutils literal notranslate"><span class="pre">dune</span></code> runs the locally built <code class="docutils literal notranslate"><span class="pre">elpi</span></code> correctly:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">dune exec elpi -- -h</span>
</pre></div>
</div>
</section>
<section id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Link to this heading"></a></h2>
<p>Elpi code blocks to be evaluated and which output is to be injected from <code class="docutils literal notranslate"><span class="pre">docs/base</span></code> to <code class="docutils literal notranslate"><span class="pre">docs/source</span></code> are conventionally denoted in <code class="docutils literal notranslate"><span class="pre">reStructuredText</span></code> as <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">elpi::</span> <span class="pre">FILE</span></code>.</p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">term</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 2</span><span class="kd">type</span><span class="w"> </span><span class="nf">app</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">lam</span><span class="w"> </span><span class="kt">(term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kd">kind</span><span class="w"> </span><span class="nf">ty</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 6</span><span class="kd">type</span><span class="w"> </span><span class="nf">arr</span><span class="w"> </span><span class="kt">ty</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty</span>.
<span class="linenos"> 7</span><span class="kd">type</span><span class="w"> </span><span class="nf">nat</span><span class="w"> </span><span class="kt">ty</span>.
<span class="linenos"> 8</span><span class="kd">type</span><span class="w"> </span><span class="nf">bool</span><span class="w"> </span><span class="kt">ty</span>.
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="kd">pred</span><span class="w"> </span><span class="nf">term</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">ty</span>.
<span class="linenos">11</span>term<span class="w"> </span>(app<span class="w"> </span><span class="nv">HD</span><span class="w"> </span><span class="nv">ARG</span><span class="o">)</span><span class="w"> </span><span class="nv">TGT</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>term<span class="w"> </span><span class="nv">HD</span><span class="w"> </span>(arr<span class="w"> </span><span class="nv">SRC</span><span class="w"> </span><span class="nv">TGT</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>term<span class="w"> </span><span class="nv">ARG</span><span class="w"> </span><span class="nv">SRC</span><span class="o">.</span>
<span class="linenos">12</span>term<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(arr<span class="w"> </span><span class="nv">SRC</span><span class="w"> </span><span class="nv">TGT</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>term<span class="w"> </span>x<span class="w"> </span><span class="nv">SRC</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>term<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">TGT</span><span class="o">.</span>
<span class="linenos">13</span>term<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>(term<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="kd">pred</span><span class="w"> </span><span class="nf">len</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.
<span class="linenos">16</span>len<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="mi">0</span><span class="o">.</span>
<span class="linenos">17</span>len<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>len<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="kd">constraint</span><span class="w"> </span><span class="nf">term </span>{
<span class="linenos">20</span><span class="w">  </span><span class="kd">rule</span>
<span class="linenos">21</span><span class="w">     </span><span class="kd">\</span><span class="w"> </span>(term<span class="w"> </span><span class="o">(</span><span class="kd">uvar</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">LX</span><span class="o">)</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span>(term<span class="w"> </span><span class="o">(</span><span class="kd">uvar</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">LY</span><span class="o">)</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span>
<span class="linenos">22</span><span class="w">     </span><span class="kd">|</span><span class="w"> </span>(len<span class="w"> </span><span class="nv">LX</span><span class="w"> </span><span class="nv">N</span><span class="kd">,</span><span class="w"> </span>len<span class="w"> </span><span class="nv">LY</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span>not<span class="o">(</span><span class="nv">N</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">M</span><span class="o">))</span>
<span class="linenos">23</span><span class="w">   </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(print<span class="w"> </span><span class="s2">&quot;wrong arity&quot;</span><span class="w"> </span><span class="nv">K</span><span class="kd">,</span><span class="w"> </span>false<span class="o">).</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(<span class="nv">GX</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>term<span class="w"> </span><span class="o">(</span><span class="kd">uvar</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">LX</span><span class="o">)</span><span class="w"> </span><span class="nv">TX</span><span class="o">)</span>
<span class="linenos">26</span><span class="w">     </span><span class="kd">\</span><span class="w"> </span>(<span class="nv">GY</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>term<span class="w"> </span><span class="o">(</span><span class="kd">uvar</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">LY</span><span class="o">)</span><span class="w"> </span><span class="nv">TY</span><span class="o">)</span>
<span class="linenos">27</span><span class="w">     </span><span class="kd">|</span><span class="w"> </span>(print<span class="w"> </span><span class="s2">&quot;compat&quot;</span><span class="w"> </span><span class="nv">GX</span><span class="w"> </span><span class="s2">&quot;|-&quot;</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">LX</span><span class="w"> </span><span class="nv">TX</span><span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span><span class="nv">GY</span><span class="w"> </span><span class="s2">&quot;|-&quot;</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">LY</span><span class="w"> </span><span class="nv">TY</span><span class="kd">,</span><span class="w"> </span>
<span class="linenos">28</span><span class="w">        </span>compatible<span class="w"> </span><span class="nv">GX</span><span class="w"> </span><span class="nv">LX</span><span class="w"> </span><span class="nv">GY</span><span class="w"> </span><span class="nv">LY</span><span class="w"> </span><span class="nv">CTXCONSTR</span><span class="o">)</span>
<span class="linenos">29</span><span class="w">   </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(print<span class="w"> </span><span class="s2">&quot;NEW&quot;</span><span class="w"> </span><span class="nv">CTXCONSTR</span><span class="w"> </span><span class="nv">TX</span><span class="w"> </span><span class="s2">&quot;=&quot;</span><span class="w"> </span><span class="nv">TY</span><span class="kd">,</span><span class="w"> </span><span class="nv">CTXCONSTR</span><span class="kd">,</span><span class="w"> </span><span class="nv">TX</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">TY</span><span class="o">).</span>
<span class="linenos">30</span>
<span class="linenos">31</span>}
<span class="linenos">32</span>
<span class="linenos">33</span><span class="kd">pred</span><span class="w"> </span><span class="nf">compatible</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">prop</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">term</span>,<span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">prop</span>,<span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">term</span>,<span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">34</span>compatible<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">35</span>compatible<span class="w"> </span><span class="nv">GX</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">GY</span><span class="w"> </span><span class="kd">[</span><span class="nv">Y</span><span class="kd">|</span><span class="nv">YS</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="nv">TX</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">K</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">36</span><span class="w"> </span>(<span class="nv">GX</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>term<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">TX</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">37</span><span class="w"> </span>(<span class="nv">GY</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>term<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">TY</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">38</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">39</span><span class="w"> </span>compatible<span class="w"> </span><span class="nv">GX</span><span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">GY</span><span class="w"> </span><span class="nv">YS</span><span class="w"> </span><span class="nv">K</span><span class="o">.</span>
<span class="linenos">40</span>compatible<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[</span>false<span class="kd">]</span><span class="o">.</span>
<span class="linenos">41</span>
<span class="linenos">42</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">43</span><span class="w">  </span>(term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">T1_</span><span class="kd">,</span><span class="w"> </span>
<span class="linenos">44</span><span class="w">   </span>term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">T2_</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">45</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="kd">,</span>
<span class="linenos">46</span><span class="w">  </span>(term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span><span class="nv">A_</span><span class="w"> </span>nat<span class="o">)</span><span class="kd">,</span>
<span class="linenos">47</span><span class="w">   </span>term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span>bool<span class="w"> </span><span class="nv">B_</span><span class="o">))</span><span class="kd">,</span>
<span class="linenos">48</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="kd">,</span>
<span class="linenos">49</span><span class="w">  </span>not(term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span><span class="nv">C</span><span class="w"> </span>nat<span class="o">)</span><span class="kd">,</span><span class="w"> </span>term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span>bool<span class="w"> </span><span class="nv">C</span><span class="o">))</span><span class="kd">,</span>
<span class="linenos">50</span><span class="w">  </span>not(term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span>nat<span class="w"> </span>nat<span class="o">)</span><span class="kd">,</span><span class="w"> </span>term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span>bool<span class="w"> </span><span class="nv">D_</span><span class="o">)).</span>
</pre></div>
</div>
<p>The injection engine:</p>
<ul class="simple">
<li><p>Retrieves all <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">elpi::</span></code> directives</p></li>
<li><p>Changes them into <code class="docutils literal notranslate"><span class="pre">literalinclude</span></code> in the generated source with relevant options</p></li>
<li><p>Runs <code class="docutils literal notranslate"><span class="pre">dune</span> <span class="pre">exec</span> <span class="pre">elpi</span> <span class="pre">--</span> <span class="pre">-test</span> <span class="pre">FILE</span></code> on the <code class="docutils literal notranslate"><span class="pre">FILE</span></code> containing the <code class="docutils literal notranslate"><span class="pre">elpi</span></code> snippet, test or example.</p></li>
<li><p>Captures its output (<code class="docutils literal notranslate"><span class="pre">stdout</span></code>)</p></li>
<li><p>Creates a <code class="docutils literal notranslate"><span class="pre">code-block::</span> <span class="pre">console</span></code> just after it to inject the captured console output</p></li>
<li><p>Captures its output (<code class="docutils literal notranslate"><span class="pre">stderr</span></code>)</p></li>
<li><p>Creates a <code class="docutils literal notranslate"><span class="pre">code-block::</span> <span class="pre">console</span></code> just after it to inject the captured console erros</p></li>
<li><p>In case of an assertion option for the <code class="docutils literal notranslate"><span class="pre">elpi</span></code> directive, the output is injected only if matched</p></li>
</ul>
<p>Result should look as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.004</span>
<span class="go">File &quot;/home/jwintz/Development/elpi/tests/sources/chr.elpi&quot;, line 7, column 60, character 133: Warning: constant term has no declared type.</span>
<span class="go">File &quot;/home/jwintz/Development/elpi/tests/sources/chr.elpi&quot;, line 11, column 8, character 319: Warning: constant len has no declared type. Did you mean std.length ?</span>
<span class="go">File &quot;/home/jwintz/Development/elpi/tests/sources/chr.elpi&quot;, line 28, column 28, character 761: Warning: constant compatible has no declared type.</span>

<span class="go">Typechecking time: 0.154</span>
<span class="go">compat [term c1 (uvar frozen--501 []), term c0 (uvar frozen--502 [])] |- frozen--494 [</span>
<span class="go"> c1, c0] arr (uvar frozen--495 [c0, c1]) (arr (uvar frozen--496 [c0, c1]) (uvar frozen--497 [])) , [</span>
<span class="go"> term c3 (uvar frozen--499 []), term c2 (uvar frozen--498 [])] |- frozen--494 [</span>
<span class="go"> c2, c3] arr (uvar frozen--498 []) (arr (uvar frozen--499 []) (uvar frozen--500 []))</span>
<span class="go">NEW [X0 = X1, X2 = X3] arr (X4 c0 c1) (arr (X5 c0 c1) X6) = arr X1 (arr X3 X7)</span>
<span class="go">1</span>
<span class="go">compat [term c0 bool] |- frozen--507 [c0] uvar frozen--508 [] , [term c1 (uvar frozen--509 [])] |- frozen--507 [c1] nat</span>
<span class="go">NEW [bool = X8] X9 = nat</span>
<span class="go">2</span>
<span class="go">compat [term c0 bool] |- frozen--514 [c0] uvar frozen--515 [] , [term c1 (uvar frozen--515 [])] |- frozen--514 [c1] nat</span>
<span class="go">NEW [bool = X10] X10 = nat</span>
<span class="go">compat [term c0 bool] |- frozen--520 [c0] uvar frozen--521 [] , [term c1 nat] |- frozen--520 [c1] nat</span>
<span class="go">NEW [bool = nat] X11 = nat</span>

<span class="go">Success:</span>

<span class="go">Time: 0.001</span>

<span class="go">Constraints:</span>
<span class="go"> {c0} : term c0 bool ?- term (X12 c0) nat  /* suspended on X12 */ {c0 c1} : term c1 X13, term c0 X13 ?- term (X14 c1 c0) (arr X13 (arr X13 X6))  /* suspended on X14 */</span>

<span class="go">State:</span>
</pre></div>
</div>
</section>
<section id="regexp-matching">
<h2>Regexp Matching<a class="headerlink" href="#regexp-matching" title="Link to this heading"></a></h2>
<p>This <code class="docutils literal notranslate"><span class="pre">elpi</span></code> directive should pass validation:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">.. elpi:: ./a.elpi</span>
<span class="go">   :assert: V = s \(.*\)</span>
</pre></div>
</div>
<p><strong>./a.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">type</span><span class="w"> </span><span class="nf">s</span><span class="w"> </span><span class="kt">num</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">num</span>.
<span class="linenos">2</span><span class="kd">type</span><span class="w"> </span><span class="nf">zero</span><span class="w"> </span><span class="kt">num</span>.
<span class="linenos">3</span><span class="kd">pred</span><span class="w"> </span><span class="nf">ack</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">num</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">num</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">num</span>.
<span class="linenos">4</span>ack<span class="w"> </span>zero<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">N</span><span class="o">).</span>
<span class="linenos">5</span>ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span>zero<span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">M2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M2</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span>
<span class="linenos">6</span>ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">M2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">N2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">N</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N2</span><span class="w"> </span><span class="nv">V2</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M2</span><span class="w"> </span><span class="nv">V2</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span>
<span class="linenos">7</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ack<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)))</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;V =&quot;</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight" style="background-color: rgb(248, 148, 148);"><pre>Injection failure: result did not pass regexp check (V = s \(.*\))</pre></div></div><p>This one should fail validation, only a message stating the regexp matching error will be printed:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">.. elpi:: ./a.elpi</span>
<span class="go">   :assert: /(?!)/</span>
</pre></div>
</div>
<p><strong>./a.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">type</span><span class="w"> </span><span class="nf">s</span><span class="w"> </span><span class="kt">num</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">num</span>.
<span class="linenos">2</span><span class="kd">type</span><span class="w"> </span><span class="nf">zero</span><span class="w"> </span><span class="kt">num</span>.
<span class="linenos">3</span><span class="kd">pred</span><span class="w"> </span><span class="nf">ack</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">num</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">num</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">num</span>.
<span class="linenos">4</span>ack<span class="w"> </span>zero<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">N</span><span class="o">).</span>
<span class="linenos">5</span>ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span>zero<span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">M2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M2</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span>
<span class="linenos">6</span>ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">M2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">N2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">N</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N2</span><span class="w"> </span><span class="nv">V2</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M2</span><span class="w"> </span><span class="nv">V2</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span>
<span class="linenos">7</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ack<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)))</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;V =&quot;</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight" style="background-color: rgb(248, 148, 148);"><pre>Injection failure: result did not pass regexp check (/(?!)/)</pre></div></div></section>
<section id="test-bed">
<h2>Test Bed<a class="headerlink" href="#test-bed" title="Link to this heading"></a></h2>
<p><strong>../../tests/sources/accumulate_twice1.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">doomed</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.
<span class="linenos">2</span><span class="kd">accumulate</span><span class="w"> </span>accumulated<span class="o">.</span>
<span class="linenos">3</span><span class="kd">accumulate</span><span class="w"> </span>accumulated<span class="o">.</span>
<span class="linenos">4</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">5</span><span class="w">  </span>doomed<span class="w"> </span><span class="mi">100</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/accumulate_twice1.elpi&quot;, line 1, column 0, characters 0-17:</span>
<span class="go">Duplicate mode declaration for doomed (also at File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/accumulated.elpi&quot;, line 1, column 0, characters 0-17:)</span>
</pre></div>
</div>
<p><strong>../../tests/sources/accumulate_twice2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">accumulate</span><span class="w"> </span>accumulated<span class="o">.</span>
<span class="linenos">2</span><span class="kd">namespace</span><span class="w"> </span>other<span class="w"> </span>{ <span class="kd">accumulate</span><span class="w"> </span>accumulated<span class="o">.</span><span class="w"> </span>}
<span class="linenos">3</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">4</span><span class="w">  </span>doomed<span class="w"> </span><span class="mi">100</span><span class="kd">,</span>
<span class="linenos">5</span><span class="w">  </span>other.doomed<span class="w"> </span><span class="mi">100</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning:</span>
<span class="go">Undeclared globals:</span>
<span class="go">- File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/accumulate_twice2.elpi&quot;, line 5, column 3, characters 93-108: other.doomed.</span>
<span class="go">Please add the following text to your program:</span>
<span class="go">type other.doomed int -&gt; prop.</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>
</pre></div>
</div>
<p><strong>../../tests/sources/accumulated.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">doomed</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>.
<span class="linenos">2</span>doomed<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos">3</span>doomed<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="kd">,</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">-</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span>doomed<span class="w"> </span><span class="nv">M</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>
</pre></div>
</div>
<p><strong>../../tests/sources/ackermann.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">% ack (s zero) (s zero) V.              yields V = s(s(s(zero)))   = 3</span>
<span class="linenos"> 2</span><span class="c">% ack (s (s zero)) (s (s zero)) V.      yields V = s(s...(s zero)) = 7</span>
<span class="linenos"> 3</span><span class="c">% ack (s (s (s zero))) (s zero) V.      yields V = s(s...(s zero)) = 13</span>
<span class="linenos"> 4</span><span class="c">% ack (s (s (s zero))) (s (s zero)) V.  yields V = ....            = 29</span>
<span class="linenos"> 5</span><span class="c">% ack (s (s (s (s zero)))) (s zero) V.  yields  nothing</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c">% ack   +int    +int  -int</span>
<span class="linenos"> 8</span><span class="c">% ack(0, N, V) :- !, V is N + 1.</span>
<span class="linenos"> 9</span><span class="c">% ack(M, 0, V) :- !, M2 is M - 1, ack(M2, 1, V).</span>
<span class="linenos">10</span><span class="c">% ack(M, N, V) :- M2 is M - 1, N2 is N - 1, ack(M, N2, V2), ack(M2, V2, V).</span>
<span class="linenos">11</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="kd">kind</span><span class="w"> </span><span class="nf">nat</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos">14</span><span class="kd">type</span><span class="w"> </span><span class="nf">s</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">nat</span>.
<span class="linenos">15</span><span class="kd">type</span><span class="w"> </span><span class="nf">zero</span><span class="w"> </span><span class="kt">nat</span>.
<span class="linenos">16</span>
<span class="linenos">17</span><span class="kd">pred</span><span class="w"> </span><span class="nf">ack</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">nat</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">nat</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">nat</span>.
<span class="linenos">18</span>ack<span class="w"> </span>zero<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">N</span><span class="o">).</span>
<span class="linenos">19</span>
<span class="linenos">20</span>ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span>zero<span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">M2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M2</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span>
<span class="linenos">21</span>
<span class="linenos">22</span>ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">M2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">N2</span><span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">N</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N2</span><span class="w"> </span><span class="nv">V2</span><span class="kd">,</span><span class="w"> </span>ack<span class="w"> </span><span class="nv">M2</span><span class="w"> </span><span class="nv">V2</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span>
<span class="linenos">23</span>
<span class="linenos">24</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ack<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)))</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ackermann.elpi&quot;, line 24, column 39, characters 795-795:</span>
<span class="go">V is linear: name it _V (discard) or V_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/asclause.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">tm</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 2</span><span class="kd">type</span><span class="w"> </span><span class="nf">lam</span><span class="w"> </span><span class="kt">(tm</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tm)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tm</span>.
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kd">pred</span><span class="w"> </span><span class="nf">hard</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">tm</span>.
<span class="linenos"> 5</span>hard<span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="nv">P</span><span class="o">.</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="kd">pred</span><span class="w"> </span><span class="nf">simple</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>.
<span class="linenos"> 8</span>simple<span class="w"> </span>(<span class="mi">1</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="nv">P</span><span class="o">.</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">11</span><span class="w">  </span>simple<span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span>hard<span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>x<span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">lam c0 \ c0</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/beta.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">tm</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos">2</span><span class="kd">type</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="kt">tm</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tm</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tm</span>.
<span class="linenos">3</span><span class="kd">type</span><span class="w"> </span><span class="nf">a, b</span><span class="w"> </span><span class="kt">tm</span>.
<span class="linenos">4</span>
<span class="linenos">5</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span><span class="nv">y\</span><span class="w"> </span>f<span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>a<span class="w"> </span>b<span class="w"> </span><span class="kd">=</span><span class="w"> </span>f<span class="w"> </span>a<span class="w"> </span>b<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/block.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">namespace</span><span class="w"> </span>xxx<span class="w"> </span>{
<span class="linenos">2</span><span class="w"> </span>foo<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/block.elpi&quot;, line 1, column 0, characters 0-15:</span>
<span class="go">matching } is missing</span>
</pre></div>
</div>
<p><strong>../../tests/sources/chr.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">term</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 2</span><span class="kd">type</span><span class="w"> </span><span class="nf">app</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">lam</span><span class="w"> </span><span class="kt">(term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kd">kind</span><span class="w"> </span><span class="nf">ty</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 6</span><span class="kd">type</span><span class="w"> </span><span class="nf">arr</span><span class="w"> </span><span class="kt">ty</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty</span>.
<span class="linenos"> 7</span><span class="kd">type</span><span class="w"> </span><span class="nf">nat</span><span class="w"> </span><span class="kt">ty</span>.
<span class="linenos"> 8</span><span class="kd">type</span><span class="w"> </span><span class="nf">bool</span><span class="w"> </span><span class="kt">ty</span>.
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="kd">pred</span><span class="w"> </span><span class="nf">term</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">ty</span>.
<span class="linenos">11</span>term<span class="w"> </span>(app<span class="w"> </span><span class="nv">HD</span><span class="w"> </span><span class="nv">ARG</span><span class="o">)</span><span class="w"> </span><span class="nv">TGT</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>term<span class="w"> </span><span class="nv">HD</span><span class="w"> </span>(arr<span class="w"> </span><span class="nv">SRC</span><span class="w"> </span><span class="nv">TGT</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>term<span class="w"> </span><span class="nv">ARG</span><span class="w"> </span><span class="nv">SRC</span><span class="o">.</span>
<span class="linenos">12</span>term<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(arr<span class="w"> </span><span class="nv">SRC</span><span class="w"> </span><span class="nv">TGT</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>term<span class="w"> </span>x<span class="w"> </span><span class="nv">SRC</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>term<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">TGT</span><span class="o">.</span>
<span class="linenos">13</span>term<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>(term<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="kd">pred</span><span class="w"> </span><span class="nf">len</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.
<span class="linenos">16</span>len<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="mi">0</span><span class="o">.</span>
<span class="linenos">17</span>len<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>len<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="kd">constraint</span><span class="w"> </span><span class="nf">term </span>{
<span class="linenos">20</span><span class="w">  </span><span class="kd">rule</span>
<span class="linenos">21</span><span class="w">     </span><span class="kd">\</span><span class="w"> </span>(term<span class="w"> </span><span class="o">(</span><span class="kd">uvar</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">LX</span><span class="o">)</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span>(term<span class="w"> </span><span class="o">(</span><span class="kd">uvar</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">LY</span><span class="o">)</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span>
<span class="linenos">22</span><span class="w">     </span><span class="kd">|</span><span class="w"> </span>(len<span class="w"> </span><span class="nv">LX</span><span class="w"> </span><span class="nv">N</span><span class="kd">,</span><span class="w"> </span>len<span class="w"> </span><span class="nv">LY</span><span class="w"> </span><span class="nv">M</span><span class="kd">,</span><span class="w"> </span>not<span class="o">(</span><span class="nv">N</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">M</span><span class="o">))</span>
<span class="linenos">23</span><span class="w">   </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(print<span class="w"> </span><span class="s2">&quot;wrong arity&quot;</span><span class="w"> </span><span class="nv">K</span><span class="kd">,</span><span class="w"> </span>false<span class="o">).</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(<span class="nv">GX</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>term<span class="w"> </span><span class="o">(</span><span class="kd">uvar</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">LX</span><span class="o">)</span><span class="w"> </span><span class="nv">TX</span><span class="o">)</span>
<span class="linenos">26</span><span class="w">     </span><span class="kd">\</span><span class="w"> </span>(<span class="nv">GY</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>term<span class="w"> </span><span class="o">(</span><span class="kd">uvar</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">LY</span><span class="o">)</span><span class="w"> </span><span class="nv">TY</span><span class="o">)</span>
<span class="linenos">27</span><span class="w">     </span><span class="kd">|</span><span class="w"> </span>(print<span class="w"> </span><span class="s2">&quot;compat&quot;</span><span class="w"> </span><span class="nv">GX</span><span class="w"> </span><span class="s2">&quot;|-&quot;</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">LX</span><span class="w"> </span><span class="nv">TX</span><span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span><span class="nv">GY</span><span class="w"> </span><span class="s2">&quot;|-&quot;</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">LY</span><span class="w"> </span><span class="nv">TY</span><span class="kd">,</span><span class="w"> </span>
<span class="linenos">28</span><span class="w">        </span>compatible<span class="w"> </span><span class="nv">GX</span><span class="w"> </span><span class="nv">LX</span><span class="w"> </span><span class="nv">GY</span><span class="w"> </span><span class="nv">LY</span><span class="w"> </span><span class="nv">CTXCONSTR</span><span class="o">)</span>
<span class="linenos">29</span><span class="w">   </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(print<span class="w"> </span><span class="s2">&quot;NEW&quot;</span><span class="w"> </span><span class="nv">CTXCONSTR</span><span class="w"> </span><span class="nv">TX</span><span class="w"> </span><span class="s2">&quot;=&quot;</span><span class="w"> </span><span class="nv">TY</span><span class="kd">,</span><span class="w"> </span><span class="nv">CTXCONSTR</span><span class="kd">,</span><span class="w"> </span><span class="nv">TX</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">TY</span><span class="o">).</span>
<span class="linenos">30</span>
<span class="linenos">31</span>}
<span class="linenos">32</span>
<span class="linenos">33</span><span class="kd">pred</span><span class="w"> </span><span class="nf">compatible</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">prop</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">term</span>,<span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">prop</span>,<span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">term</span>,<span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">34</span>compatible<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">35</span>compatible<span class="w"> </span><span class="nv">GX</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">GY</span><span class="w"> </span><span class="kd">[</span><span class="nv">Y</span><span class="kd">|</span><span class="nv">YS</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="nv">TX</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">K</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">36</span><span class="w"> </span>(<span class="nv">GX</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>term<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">TX</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">37</span><span class="w"> </span>(<span class="nv">GY</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>term<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">TY</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">38</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">39</span><span class="w"> </span>compatible<span class="w"> </span><span class="nv">GX</span><span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">GY</span><span class="w"> </span><span class="nv">YS</span><span class="w"> </span><span class="nv">K</span><span class="o">.</span>
<span class="linenos">40</span>compatible<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[</span>false<span class="kd">]</span><span class="o">.</span>
<span class="linenos">41</span>
<span class="linenos">42</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">43</span><span class="w">  </span>(term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">T1_</span><span class="kd">,</span><span class="w"> </span>
<span class="linenos">44</span><span class="w">   </span>term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">T2_</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">45</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="kd">,</span>
<span class="linenos">46</span><span class="w">  </span>(term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span><span class="nv">A_</span><span class="w"> </span>nat<span class="o">)</span><span class="kd">,</span>
<span class="linenos">47</span><span class="w">   </span>term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span>bool<span class="w"> </span><span class="nv">B_</span><span class="o">))</span><span class="kd">,</span>
<span class="linenos">48</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;2&quot;</span><span class="kd">,</span>
<span class="linenos">49</span><span class="w">  </span>not(term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span><span class="nv">C</span><span class="w"> </span>nat<span class="o">)</span><span class="kd">,</span><span class="w"> </span>term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span>bool<span class="w"> </span><span class="nv">C</span><span class="o">))</span><span class="kd">,</span>
<span class="linenos">50</span><span class="w">  </span>not(term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span>nat<span class="w"> </span>nat<span class="o">)</span><span class="kd">,</span><span class="w"> </span>term<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span>bool<span class="w"> </span><span class="nv">D_</span><span class="o">)).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">compat [term c1 (uvar frozen--389 []), term c0 (uvar frozen--390 [])] |-</span>
<span class="go"> frozen--382 [c1, c0]</span>
<span class="go"> arr (uvar frozen--383 [c0, c1])</span>
<span class="go">  (arr (uvar frozen--384 [c0, c1]) (uvar frozen--385 [])) ,</span>
<span class="go"> [term c3 (uvar frozen--387 []), term c2 (uvar frozen--386 [])] |- frozen--382</span>
<span class="go"> [c2, c3]</span>
<span class="go"> arr (uvar frozen--386 []) (arr (uvar frozen--387 []) (uvar frozen--388 []))</span>
<span class="go">NEW [X0 = X1, X2 = X3] arr (X4 c0 c1) (arr (X5 c0 c1) X6) = arr X1 (arr X3 X7)</span>
<span class="go">1</span>
<span class="go">compat [term c0 bool] |- frozen--395 [c0] uvar frozen--396 [] ,</span>
<span class="go"> [term c1 (uvar frozen--397 [])] |- frozen--395 [c1] nat</span>
<span class="go">NEW [bool = X8] X9 = nat</span>
<span class="go">2</span>
<span class="go">compat [term c0 bool] |- frozen--402 [c0] uvar frozen--403 [] ,</span>
<span class="go"> [term c1 (uvar frozen--403 [])] |- frozen--402 [c1] nat</span>
<span class="go">NEW [bool = X10] X10 = nat</span>
<span class="go">compat [term c0 bool] |- frozen--408 [c0] uvar frozen--409 [] , [term c1 nat]</span>
<span class="go"> |- frozen--408 [c1] nat</span>
<span class="go">NEW [bool = nat] X11 = nat</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.001</span>

<span class="go">Constraints:</span>
<span class="go"> {c0} : term c0 bool ?- term (X12 c0) nat  /* suspended on X12 */</span>
<span class="go"> {c0 c1} : term c1 X13, term c0 X13 ?- term (X14 c1 c0) (arr X13 (arr X13 X6))  /* suspended on X14 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/chrGCD.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">gcd</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">group</span>.
<span class="linenos"> 2</span><span class="kd">kind</span><span class="w"> </span><span class="nf">group</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">group-1</span><span class="w"> </span><span class="kt">group</span>.
<span class="linenos"> 4</span><span class="kd">type</span><span class="w"> </span><span class="nf">group-2</span><span class="w"> </span><span class="kt">group</span>.
<span class="linenos"> 5</span>
<span class="linenos"> 6</span>gcd<span class="w"> </span><span class="nv">A</span><span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>declare_constraint<span class="w"> </span>(gcd<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">B</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c">% assert result is OK</span>
<span class="linenos"> 9</span>gcd<span class="w"> </span><span class="mi">11</span><span class="w"> </span>group-1<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;group 1 solved&quot;</span><span class="o">.</span>
<span class="linenos">10</span>gcd<span class="w"> </span><span class="mi">7</span><span class="w"> </span>group-2<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;group 2 solved&quot;</span><span class="o">.</span>
<span class="linenos">11</span>
<span class="linenos">12</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>gcd<span class="w"> </span><span class="mi">99</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>gcd<span class="w"> </span><span class="mi">66</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>gcd<span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span>gcd<span class="w"> </span><span class="mi">22</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>gcd<span class="w"> </span><span class="mi">77</span><span class="w"> </span><span class="nv">Y</span><span class="kd">,</span>
<span class="linenos">13</span><span class="w">        </span><span class="c">% we then force a resumption to check only GCDs are there</span>
<span class="linenos">14</span><span class="w">        </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>group-1<span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>group-2<span class="o">.</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="kd">constraint</span><span class="w"> </span><span class="nf">gcd </span>{
<span class="linenos">17</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(gcd<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(gcd<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">B</span><span class="o">).</span>
<span class="linenos">18</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(gcd<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(gcd<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">&lt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span><span class="kd">-</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>gcd<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span>
<span class="linenos">19</span>}
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">group 1 solved</span>
<span class="go">group 2 solved</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/chrLEQ.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">leq</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>.
<span class="linenos"> 2</span>leq<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w">  </span>declare_constraint<span class="w"> </span>(leq<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">A</span><span class="kd">,</span><span class="nv">B</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 3</span>leq<span class="w"> </span><span class="nv">A</span><span class="w">         </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w">  </span>declare_constraint<span class="w"> </span>(leq<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">B</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 4</span>leq<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="w">         </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w">  </span>declare_constraint<span class="w"> </span>(leq<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">A</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kd">pred</span><span class="w"> </span><span class="nf">ltn</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>.
<span class="linenos"> 7</span>ltn<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w">  </span>declare_constraint<span class="w"> </span>(ltn<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">A</span><span class="kd">,</span><span class="nv">B</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 8</span>ltn<span class="w"> </span><span class="nv">A</span><span class="w">         </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w">  </span>declare_constraint<span class="w"> </span>(ltn<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">B</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 9</span>ltn<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="w">         </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w">  </span>declare_constraint<span class="w"> </span>(ltn<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">A</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos">10</span>
<span class="linenos">11</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">12</span><span class="w">  </span>leq<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span>leq<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="kd">,</span><span class="w"> </span>not<span class="w"> </span>(ltn<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>ltn<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span>not(<span class="nv">A</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">C</span><span class="o">).</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="kd">constraint</span><span class="w"> </span><span class="nf">leq ltn </span>{
<span class="linenos">15</span><span class="w">  </span><span class="c">% incompat (FIRST!!)</span>
<span class="linenos">16</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>false<span class="o">.</span>
<span class="linenos">17</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>false<span class="o">.</span>
<span class="linenos">18</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>false<span class="o">.</span>
<span class="linenos">19</span><span class="w">  </span>
<span class="linenos">20</span><span class="w">  </span><span class="c">% refl</span>
<span class="linenos">21</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="w">  </span><span class="c">% atisym</span>
<span class="linenos">24</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="w">  </span><span class="c">% trans</span>
<span class="linenos">27</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Z</span><span class="o">).</span>
<span class="linenos">28</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Z</span><span class="o">).</span>
<span class="linenos">29</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Z</span><span class="o">).</span>
<span class="linenos">30</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Z</span><span class="o">).</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="w">  </span><span class="c">% idempotence</span>
<span class="linenos">33</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(leq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">).</span>
<span class="linenos">34</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(ltn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">).</span>
<span class="linenos">35</span>
<span class="linenos">36</span>}
<span class="linenos">37</span>
<span class="linenos">38</span><span class="c">% vim:set ft=lprolog:</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.001</span>

<span class="go">Constraints:</span>
<span class="go"> ltn X0 X1  /* suspended on X0, X1 */ leq X0 X1  /* suspended on X0, X1 */</span>
<span class="go"> leq X2 X1  /* suspended on X2, X1 */ ltn X0 X2  /* suspended on X0, X2 */</span>
<span class="go"> leq X0 X2  /* suspended on X0, X2 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/chr_nokey.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">type</span><span class="w"> </span><span class="nf">test</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 2</span>
<span class="linenos"> 3</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>(test<span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">],</span><span class="w"> </span>declare_constraint<span class="w"> </span>(test<span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kd">constraint</span><span class="w"> </span><span class="nf">test </span>{
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="w"> </span><span class="k k-Mode">:name</span><span class="w"> </span><span class="s2">&quot;fst&quot;</span>
<span class="linenos"> 8</span><span class="w"> </span><span class="kd">rule</span><span class="w"> </span>(test<span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(test<span class="w"> </span><span class="mi">2</span><span class="o">).</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="w"> </span><span class="kd">rule</span><span class="w"> </span>(test<span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos">11</span>
<span class="linenos">12</span>}
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> test 1  /* suspended on X0 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/chr_nokey2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">type</span><span class="w"> </span><span class="nf">foo</span><span class="w"> </span><span class="kt">any</span>.
<span class="linenos">2</span><span class="kd">type</span><span class="w"> </span><span class="nf">bar</span><span class="w"> </span><span class="kt">any</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">any</span>.
<span class="linenos">3</span>
<span class="linenos">4</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>foo<span class="w"> </span><span class="kd">[],</span><span class="w"> </span>declare_constraint<span class="w"> </span>(bar<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[],</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">5</span>
<span class="linenos">6</span><span class="kd">constraint</span><span class="w"> </span><span class="nf">foo bar </span>{<span class="w"> </span><span class="kd">rule</span><span class="w"> </span>foo<span class="w"> </span>(bar<span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>false<span class="o">.</span><span class="w"> </span><span class="kd">rule</span><span class="w"> </span>(bar<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>true<span class="o">).</span><span class="w"> </span>}
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> bar true  /* suspended on  */ foo  /* suspended on  */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/chr_not_clique.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">constraint</span><span class="w"> </span><span class="nf">a </span>{
<span class="linenos">2</span>
<span class="linenos">3</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>b<span class="o">.</span>
<span class="linenos">4</span>
<span class="linenos">5</span>}
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/chr_not_clique.elpi&quot;, line 1, column 14, characters 14-24:</span>
<span class="go">CHR rule File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/chr_not_clique.elpi&quot;, line 1, column 14, characters 14-24:: matches b which is not a constraint on which it is applied. Check the list of predicates after the &quot;constraint&quot; keyword.</span>
</pre></div>
</div>
<p><strong>../../tests/sources/chr_sem.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">type</span><span class="w"> </span><span class="nf">a, b, c, d</span><span class="w"> </span><span class="kt">any</span>.
<span class="linenos"> 2</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>a<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">],</span>
<span class="linenos"> 3</span><span class="w">        </span>declare_constraint<span class="w"> </span>b<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">],</span>
<span class="linenos"> 4</span><span class="w">        </span>declare_constraint<span class="w"> </span>b<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">],</span>
<span class="linenos"> 5</span><span class="w">        </span>declare_constraint<span class="w"> </span>d<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="kd">constraint</span><span class="w"> </span><span class="nf">a b c d </span>{
<span class="linenos"> 8</span><span class="w"> </span><span class="kd">rule</span><span class="w"> </span>a<span class="w"> </span>(d<span class="o">)</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>b<span class="w"> </span>b<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(print<span class="w"> </span>c<span class="kd">,</span><span class="w"> </span>declare_constraint<span class="w"> </span>c<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">]</span><span class="o">).</span>
<span class="linenos"> 9</span><span class="w"> </span><span class="kd">rule</span><span class="w"> </span>c<span class="w"> </span>c<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos">10</span>
<span class="linenos">11</span>}
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">c</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> c  /* suspended on X0 */ d  /* suspended on X0 */ a  /* suspended on X0 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/conj2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">test1</span>.
<span class="linenos">2</span><span class="kd">pred</span><span class="w"> </span><span class="nf">test2</span>.
<span class="linenos">3</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>test1<span class="kd">,</span><span class="w"> </span>test2<span class="o">.</span>
<span class="linenos">4</span>
<span class="linenos">5</span>test1<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>true<span class="w"> </span><span class="kd">&amp;</span><span class="w"> </span>true<span class="w"> </span><span class="kd">&amp;</span><span class="w"> </span>true<span class="o">.</span>
<span class="linenos">6</span>test2<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span>true<span class="w"> </span><span class="kd">&amp;</span><span class="w"> </span>true<span class="kd">,</span><span class="w"> </span>false<span class="kd">],</span><span class="w"> </span>std.length<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/ctx_loading.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">constraint</span><span class="w"> </span><span class="nf">a b c d1 d2 d3 d11 d22 d33 </span>{
<span class="linenos"> 2</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d1<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(print<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>declare_constraint<span class="w"> </span><span class="o">(</span>d11<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="o">).</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d2<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(print<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>declare_constraint<span class="w"> </span><span class="o">(</span>d22<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="o">).</span>
<span class="linenos"> 4</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d3<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(print<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>declare_constraint<span class="w"> </span><span class="o">(</span>d33<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="o">).</span>
<span class="linenos"> 5</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d1<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d11<span class="w"> </span><span class="nv">X</span><span class="o">).</span>
<span class="linenos"> 6</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d2<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d22<span class="w"> </span><span class="nv">X</span><span class="o">).</span>
<span class="linenos"> 7</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d3<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>d33<span class="w"> </span><span class="nv">X</span><span class="o">).</span>
<span class="linenos"> 8</span>}
<span class="linenos"> 9</span><span class="kd">type</span><span class="w"> </span><span class="nf">p</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">10</span><span class="kd">type</span><span class="w"> </span><span class="nf">a</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">11</span><span class="kd">type</span><span class="w"> </span><span class="nf">b</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">12</span><span class="kd">type</span><span class="w"> </span><span class="nf">c</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">13</span><span class="kd">type</span><span class="w"> </span><span class="nf">d1, d2, d3, d11, d22, d33</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">14</span>
<span class="linenos">15</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">16</span><span class="w">  </span>p<span class="w"> </span>b<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>p<span class="w"> </span>a<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>p<span class="w"> </span><span class="nv">W</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">W</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>a<span class="kd">,</span>
<span class="linenos">17</span><span class="w">  </span><span class="kd">[</span>p<span class="w"> </span>a<span class="kd">,</span><span class="w"> </span>p<span class="w"> </span>b<span class="kd">]</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>p<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>a<span class="kd">,</span><span class="w"> </span>
<span class="linenos">18</span><span class="w">  </span>(p<span class="w"> </span>a<span class="kd">,</span><span class="w"> </span>p<span class="w"> </span>b<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>p<span class="w"> </span><span class="nv">Z</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>a<span class="kd">,</span>
<span class="linenos">19</span><span class="w">  </span><span class="kd">[</span>a<span class="kd">,</span><span class="w"> </span>b<span class="kd">,</span><span class="w"> </span>c<span class="kd">]</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w">   </span>declare_constraint<span class="w"> </span>(d1<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">],</span>
<span class="linenos">20</span><span class="w">  </span>c<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>b<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>a<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>declare_constraint<span class="w"> </span>(d2<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">],</span>
<span class="linenos">21</span><span class="w">  </span>(a<span class="kd">,</span><span class="w"> </span>b<span class="kd">,</span><span class="w"> </span>c<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w">   </span>declare_constraint<span class="w"> </span>(d3<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">],</span>
<span class="linenos">22</span><span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>a<span class="o">.</span>
<span class="linenos">23</span><span class="w">	</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[a, b, c]</span>
<span class="go">[a, b, c]</span>
<span class="go">[a, b, c]</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 21, column 3, characters 676-719:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 20, column 3, characters 628-671:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 21, column 3, characters 676-719:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 20, column 3, characters 628-671:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 19, column 3, characters 580-623:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 21, column 3, characters 676-719:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 20, column 3, characters 628-671:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 19, column 3, characters 580-623:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 21, column 3, characters 676-719:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 20, column 3, characters 628-671:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 19, column 3, characters 580-623:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 21, column 3, characters 676-719:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 20, column 3, characters 628-671:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 19, column 3, characters 580-623:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 18, column 3, characters 549-565:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 21, column 3, characters 676-719:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 20, column 3, characters 628-671:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 19, column 3, characters 580-623:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 18, column 3, characters 549-565:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 21, column 3, characters 676-719:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 20, column 3, characters 628-671:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 19, column 3, characters 580-623:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 18, column 3, characters 549-565:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 21, column 3, characters 676-719:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 20, column 3, characters 628-671:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 19, column 3, characters 580-623:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 18, column 3, characters 549-565:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 17, column 3, characters 517-533:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 21, column 3, characters 676-719:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 20, column 3, characters 628-671:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 19, column 3, characters 580-623:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 18, column 3, characters 549-565:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 17, column 3, characters 517-533:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 21, column 3, characters 676-719:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 20, column 3, characters 628-671:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 19, column 3, characters 580-623:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 18, column 3, characters 549-565:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 17, column 3, characters 517-533:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 21, column 3, characters 676-719:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 20, column 3, characters 628-671:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 19, column 3, characters 580-623:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 18, column 3, characters 549-565:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 17, column 3, characters 517-533:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/ctx_loading.elpi&quot;, line 16, column 3, characters 486-502:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>

<span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/cut.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">/* To test: query q X. The only answer should be X = ok. */</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kd">kind</span><span class="w"> </span><span class="nf">tm</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 4</span><span class="kd">type</span><span class="w"> </span><span class="nf">two, three, four, ok, ko</span><span class="w"> </span><span class="kt">tm</span>.
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kd">type</span><span class="w"> </span><span class="nf">a, b, c, q</span><span class="w"> </span><span class="kt">tm</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>a<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos"> 9</span>q<span class="w"> </span>ok<span class="o">.</span>
<span class="linenos">10</span>
<span class="linenos">11</span>a<span class="w"> </span>ko<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>b<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>c<span class="w"> </span><span class="nv">Y</span><span class="o">.</span>
<span class="linenos">12</span>a<span class="w"> </span>two<span class="o">.</span>
<span class="linenos">13</span>
<span class="linenos">14</span>b<span class="w"> </span>three<span class="o">.</span>
<span class="linenos">15</span>b<span class="w"> </span>four<span class="o">.</span>
<span class="linenos">16</span>
<span class="linenos">17</span>c<span class="w"> </span>four<span class="o">.</span>
<span class="linenos">18</span>
<span class="linenos">19</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/cut2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">/* To test run q X; the only expected result is X=ok.</span>
<span class="linenos"> 2</span><span class="w">   </span><span class="nv">This</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span>different<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span>brain-damaged<span class="w"> </span>semantics<span class="w"> </span>of<span class="w"> </span><span class="nv">Teyjus</span>
<span class="linenos"> 3</span><span class="w">   </span>and<span class="w"> </span>consistent<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>implicit<span class="w"> </span>declaration
<span class="linenos"> 4</span><span class="w">   </span><span class="kd">;</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos"> 5</span><span class="w">   </span><span class="kd">;</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">B</span>
<span class="linenos"> 6</span><span class="kd">*/</span>
<span class="linenos"> 7</span><span class="kd">kind</span><span class="w"> </span><span class="nf">i</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 8</span><span class="kd">type</span><span class="w"> </span><span class="nf">one</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 9</span><span class="kd">type</span><span class="w"> </span><span class="nf">x</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">diagnostic</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">10</span><span class="kd">type</span><span class="w"> </span><span class="nf">two</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">11</span><span class="kd">type</span><span class="w"> </span><span class="nf">q</span><span class="w"> </span><span class="kt">diagnostic</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">12</span><span class="kd">type</span><span class="w"> </span><span class="nf">ko2</span><span class="w"> </span><span class="kt">diagnostic</span>.
<span class="linenos">13</span><span class="kd">type</span><span class="w"> </span><span class="nf">ko1</span><span class="w"> </span><span class="kt">diagnostic</span>.
<span class="linenos">14</span><span class="kd">type</span><span class="w"> </span><span class="nf">e</span><span class="w"> </span><span class="kt">diagnostic</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">15</span><span class="kd">type</span><span class="w"> </span><span class="nf">c</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">16</span>
<span class="linenos">17</span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>c<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>x<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>e<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">18</span>q<span class="w"> </span>ok<span class="o">.</span>
<span class="linenos">19</span>
<span class="linenos">20</span>c<span class="w"> </span>one<span class="o">.</span>
<span class="linenos">21</span>c<span class="w"> </span>two<span class="o">.</span>
<span class="linenos">22</span>
<span class="linenos">23</span>x<span class="w"> </span>two<span class="w"> </span>ko1<span class="o">.</span>
<span class="linenos">24</span>
<span class="linenos">25</span>e<span class="w"> </span>ko2<span class="o">.</span>
<span class="linenos">26</span>
<span class="linenos">27</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/cut3.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">% Test with q X; should yield X=ok</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kd">kind</span><span class="w"> </span><span class="nf">i</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 4</span><span class="kd">type</span><span class="w"> </span><span class="nf">ko</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 5</span><span class="kd">type</span><span class="w"> </span><span class="nf">ok</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 6</span><span class="kd">type</span><span class="w"> </span><span class="nf">q</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 7</span><span class="kd">type</span><span class="w"> </span><span class="nf">c</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 8</span><span class="kd">type</span><span class="w"> </span><span class="nf">b</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 9</span><span class="kd">type</span><span class="w"> </span><span class="nf">a</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">10</span>
<span class="linenos">11</span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>a<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>b<span class="kd">,</span><span class="w"> </span>c<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">12</span>
<span class="linenos">13</span>a<span class="w"> </span>ko<span class="o">.</span>
<span class="linenos">14</span>a<span class="w"> </span>ok<span class="o">.</span>
<span class="linenos">15</span>
<span class="linenos">16</span>b<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">17</span>b<span class="o">.</span>
<span class="linenos">18</span>
<span class="linenos">19</span>c<span class="w"> </span>ok<span class="o">.</span>
<span class="linenos">20</span>
<span class="linenos">21</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/cut4.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c">% Test: main. Should not fail.</span>
<span class="linenos">2</span>
<span class="linenos">3</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/cut5.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">/* To test: query q X. The only answer should be X = ok. */</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kd">kind</span><span class="w"> </span><span class="nf">i</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 4</span><span class="kd">type</span><span class="w"> </span><span class="nf">ko</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 5</span><span class="kd">type</span><span class="w"> </span><span class="nf">ok</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 6</span><span class="kd">type</span><span class="w"> </span><span class="nf">four</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 7</span><span class="kd">type</span><span class="w"> </span><span class="nf">two</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 8</span><span class="kd">type</span><span class="w"> </span><span class="nf">three</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 9</span><span class="kd">type</span><span class="w"> </span><span class="nf">q</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">10</span><span class="kd">type</span><span class="w"> </span><span class="nf">d</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">11</span><span class="kd">type</span><span class="w"> </span><span class="nf">c</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">12</span><span class="kd">type</span><span class="w"> </span><span class="nf">b</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">13</span><span class="kd">type</span><span class="w"> </span><span class="nf">a</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">14</span>
<span class="linenos">15</span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>a<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">16</span>q<span class="w"> </span>ok<span class="o">.</span>
<span class="linenos">17</span>a<span class="w"> </span>ko<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>b<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>d<span class="w"> </span><span class="nv">Z</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>c<span class="w"> </span><span class="nv">Z</span><span class="o">.</span>
<span class="linenos">18</span>a<span class="w"> </span>two<span class="o">.</span>
<span class="linenos">19</span>b<span class="w"> </span>three<span class="o">.</span>
<span class="linenos">20</span>b<span class="w"> </span>four<span class="o">.</span>
<span class="linenos">21</span>c<span class="w"> </span>four<span class="o">.</span>
<span class="linenos">22</span>d<span class="w"> </span>three<span class="o">.</span>
<span class="linenos">23</span>d<span class="w"> </span>four<span class="o">.</span>
<span class="linenos">24</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/cut5.elpi&quot;, line 17, column 11, characters 255-255:</span>
<span class="go">Y is linear: name it _Y (discard) or Y_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/cut6.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">% q X should yield X=ok</span>
<span class="linenos"> 2</span><span class="kd">kind</span><span class="w"> </span><span class="nf">i</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">ko</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 4</span><span class="kd">type</span><span class="w"> </span><span class="nf">ok</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 5</span><span class="kd">type</span><span class="w"> </span><span class="nf">q</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 6</span><span class="kd">type</span><span class="w"> </span><span class="nf">c</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 7</span><span class="kd">type</span><span class="w"> </span><span class="nf">b</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 8</span><span class="kd">type</span><span class="w"> </span><span class="nf">a</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 9</span>
<span class="linenos">10</span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>a<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">11</span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>b<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">12</span>a<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>c<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">13</span>c<span class="w"> </span>ok<span class="o">.</span>
<span class="linenos">14</span>c<span class="w"> </span>ko<span class="o">.</span>
<span class="linenos">15</span>b<span class="w"> </span>ko<span class="o">.</span>
<span class="linenos">16</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/deep_indexing.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">% select should only find 2 clauses (the last 2) since indexing at level 3 drops the others</span>
<span class="linenos"> 2</span><span class="c">% ./elpi -test tests/sources/deep_indexing.elpi -no-tc -trace-on -trace-at run 1 300 -trace-only select</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kd">kind</span><span class="w"> </span><span class="nf">term</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 5</span><span class="kd">type</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 6</span><span class="kd">type</span><span class="w"> </span><span class="nf">g</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="k k-Mode">:index</span><span class="w">(</span><span class="mi">3</span>)
<span class="linenos"> 9</span><span class="kd">pred</span><span class="w"> </span><span class="nf">find</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">term</span>.
<span class="linenos">10</span>find<span class="w"> </span>g<span class="o">.</span>
<span class="linenos">11</span>find<span class="w"> </span>(f<span class="w"> </span>g<span class="o">).</span>
<span class="linenos">12</span>find<span class="w"> </span>(f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span>g<span class="o">)).</span>
<span class="linenos">13</span>find<span class="w"> </span>(f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span>g<span class="o">))).</span>
<span class="linenos">14</span>find<span class="w"> </span>(f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span>g<span class="o">)))).</span>
<span class="linenos">15</span>
<span class="linenos">16</span>
<span class="linenos">17</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>find<span class="w"> </span>(f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span><span class="o">(</span>f<span class="w"> </span>g<span class="o">))).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/discard.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">type</span><span class="w"> </span><span class="nf">foo</span><span class="w"> </span><span class="kt">int</span>.
<span class="linenos">2</span><span class="kd">type</span><span class="w"> </span><span class="nf">bar</span><span class="w"> </span><span class="kt">int</span>.
<span class="linenos">3</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">4</span><span class="w">  </span>foo<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">_</span><span class="kd">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nv">_</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="mi">4</span><span class="kd">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nv">_</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="kd">,</span>
<span class="linenos">7</span><span class="w">  </span><span class="nv">_</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">_</span><span class="kd">,</span>
<span class="linenos">8</span><span class="w">  </span><span class="nv">_Foo</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>bar<span class="kd">,</span>
<span class="linenos">9</span><span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span><span class="nv">_Foo</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>x<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/elpi_only_llam.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>p<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>p<span class="w"> </span>(f<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>f<span class="w"> </span>x<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>
<span class="go">Fatal error:</span>
<span class="go">Unification problem outside the pattern fragment. ((Data.Term.App (f, (Data.Term.Const x), [])) == (Data.Term.AppUVar (</span>
<span class="go">   { Data.Term.contents = please extend this printer; uid_private = 2 }, 0,</span>
<span class="go">   [(Data.Term.UVar (</span>
<span class="go">       { Data.Term.contents = please extend this printer; uid_private = 1 },</span>
<span class="go">       0, 0))</span>
<span class="go">     ]</span>
<span class="go">   ))) Pass -delay-problems-outside-pattern-fragment (elpi command line utility) or set delay_outside_fragment to true (Elpi_API) in order to delay (deprecated, for Teyjus compatibility).</span>
</pre></div>
</div>
<p><strong>../../tests/sources/end_comment.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>main<span class="o">.</span>
<span class="linenos">2</span><span class="c">% foo </span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/eta.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">tm</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 2</span><span class="kd">type</span><span class="w"> </span><span class="nf">c</span><span class="w"> </span><span class="kt">(tm</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tm</span>.
<span class="linenos"> 3</span>macro<span class="w"> </span><span class="kd">@</span>ctx<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>c<span class="w"> </span>(<span class="nv">_</span><span class="err">\</span><span class="w"> </span><span class="nv">A</span><span class="o">).</span><span class="w"> </span><span class="c">% to have depth &gt; 0 in unif</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="c">% to test the indexing</span>
<span class="linenos"> 6</span><span class="err">:</span>untyped<span class="w"> </span>k1<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>g<span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 7</span><span class="err">:</span>untyped<span class="w"> </span>k2<span class="w"> </span>g<span class="o">.</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c">%mode (foo i i).</span>
<span class="linenos">10</span><span class="kd">pred</span><span class="w"> </span><span class="nf">foo</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(X</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">X)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(X</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">X</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">X)</span>.
<span class="linenos">11</span>foo<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(x1<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>x2<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>x2<span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(print<span class="w"> </span><span class="nv">X</span><span class="o">).</span>
<span class="linenos">12</span><span class="c">%% Fails, but should output `y`</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">15</span><span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">f y</span>\
<span class="linenos">16</span><span class="w">    </span><span class="c">% 4 branches in unif</span>
<span class="linenos">17</span><span class="w">    </span><span class="kd">@</span>ctx<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>f<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">@</span>ctx<span class="w"> </span>f<span class="kd">,</span>
<span class="linenos">18</span><span class="w">    </span><span class="kd">@</span>ctx<span class="w"> </span>f<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">@</span>ctx<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>f<span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos">19</span><span class="w">    </span><span class="kd">@</span>ctx<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>f<span class="w"> </span>y<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">@</span>ctx<span class="w"> </span>(f<span class="w"> </span>y<span class="o">)</span><span class="kd">,</span>
<span class="linenos">20</span><span class="w">    </span><span class="kd">@</span>ctx<span class="w"> </span>(f<span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">@</span>ctx<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>f<span class="w"> </span>y<span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="w">    </span><span class="c">% put some uvar around</span>
<span class="linenos">23</span><span class="w">    </span><span class="kd">@</span>ctx<span class="w"> </span>(f<span class="w"> </span><span class="o">(</span><span class="nv">X</span><span class="w"> </span>y<span class="o">))</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">@</span>ctx<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>f<span class="w"> </span>y<span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">X</span><span class="kd">,</span>
<span class="linenos">24</span><span class="w">    </span><span class="kd">@</span>ctx<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>f<span class="w"> </span>y<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">@</span>ctx<span class="w"> </span>(f<span class="w"> </span><span class="o">(</span><span class="nv">Y</span><span class="w"> </span>y<span class="o">))</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="w">    </span><span class="c">% index + adepth=2 &lt;&gt; bdepth=0</span>
<span class="linenos">27</span><span class="w">    </span>k1<span class="w"> </span>g<span class="kd">,</span>
<span class="linenos">28</span><span class="w">    </span>k2<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>g<span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos">29</span><span class="w">    </span>
<span class="linenos">30</span><span class="w">    </span><span class="c">% regression #135</span>
<span class="linenos">31</span><span class="w">    </span>foo<span class="w"> </span>y<span class="w"> </span>(x1<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>x2<span class="w"> </span><span class="err">\</span><span class="w"> </span>y<span class="w"> </span>x2<span class="o">))</span>
<span class="linenos">32</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">c2 \ c2</span>
<span class="go">c2 \ c2</span>
<span class="go">c1</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/eta_as.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">as_1</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>.
<span class="linenos">  2</span><span class="kd">pred</span><span class="w"> </span><span class="nf">as_2</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>.
<span class="linenos">  3</span><span class="kd">pred</span><span class="w"> </span><span class="nf">as_3</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>.
<span class="linenos">  4</span>
<span class="linenos">  5</span><span class="kd">pred</span><span class="w"> </span><span class="nf">uvar_1</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>.
<span class="linenos">  6</span><span class="kd">pred</span><span class="w"> </span><span class="nf">uvar_2</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>.
<span class="linenos">  7</span><span class="kd">pred</span><span class="w"> </span><span class="nf">uvar_3</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>.
<span class="linenos">  8</span><span class="kd">pred</span><span class="w"> </span><span class="nf">uvar_4</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.
<span class="linenos">  9</span><span class="kd">pred</span><span class="w"> </span><span class="nf">uvar_5</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.
<span class="linenos"> 10</span><span class="kd">pred</span><span class="w"> </span><span class="nf">uvar_6</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.
<span class="linenos"> 11</span>
<span class="linenos"> 12</span><span class="kd">pred</span><span class="w"> </span><span class="nf">tests-as</span>.
<span class="linenos"> 13</span><span class="kd">pred</span><span class="w"> </span><span class="nf">tests-uvar</span>.
<span class="linenos"> 14</span><span class="kd">pred</span><span class="w"> </span><span class="nf">tests-var</span>.
<span class="linenos"> 15</span><span class="kd">pred</span><span class="w"> </span><span class="nf">tests-unif</span>.
<span class="linenos"> 16</span><span class="kd">pred</span><span class="w"> </span><span class="nf">tests-declare-constraint</span>.
<span class="linenos"> 17</span>
<span class="linenos"> 18</span><span class="kd">type</span><span class="w"> </span><span class="nf">bar</span><span class="w"> </span><span class="kt">variadic</span><span class="w"> </span><span class="kt">any</span><span class="w"> </span><span class="kt">any</span>.
<span class="linenos"> 19</span><span class="kd">type</span><span class="w"> </span><span class="nf">c</span><span class="w"> </span><span class="kt">variadic</span><span class="w"> </span><span class="kt">any</span><span class="w"> </span><span class="kt">any</span>.
<span class="linenos"> 20</span>uvar_1<span class="w"> </span>(bar<span class="w"> </span><span class="o">(</span><span class="kd">uvar</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">Args</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>std.assert!<span class="w"> </span>(var<span class="w"> </span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;uvar_1 bar X, not a var&quot;</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">Args</span><span class="o">.</span>
<span class="linenos"> 21</span>uvar_2<span class="w"> </span>(bar<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>std.assert!<span class="w"> </span>(var<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">Args</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;uvar_2 bar X, not a var&quot;</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">Args</span><span class="o">.</span>
<span class="linenos"> 22</span>uvar_3<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>std.assert!<span class="w"> </span>(var<span class="w"> </span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;uvar_3 X, not a var&quot;</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">K</span><span class="o">.</span>
<span class="linenos"> 23</span>uvar_4<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">Args</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>std.assert!<span class="w"> </span>(var<span class="w"> </span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;uvar_4 X, not a var&quot;</span><span class="kd">,</span><span class="w"> </span>std.assert!<span class="w"> </span>(distinct_names<span class="w"> </span><span class="nv">Args</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;uvar_4 not in pattern&quot;</span><span class="o">.</span>
<span class="linenos"> 24</span>uvar_5<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">Args</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>std.assert!<span class="w"> </span>(var<span class="w"> </span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;uvar_5 X, not a var&quot;</span><span class="kd">,</span><span class="w"> </span>distinct_names<span class="w"> </span><span class="nv">Args</span><span class="o">.</span>
<span class="linenos"> 25</span>
<span class="linenos"> 26</span>uvar_6<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos"> 27</span>uvar_6<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos"> 28</span>
<span class="linenos"> 29</span>as_1<span class="w"> </span>(bar<span class="w"> </span><span class="o">(</span><span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">K</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>std.assert!<span class="w"> </span>(var<span class="w"> </span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;bar (uvar as_1 X), not a var&quot;</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">K</span><span class="o">.</span>
<span class="linenos"> 30</span>as_2<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>std.assert!<span class="w"> </span>(var<span class="w"> </span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;uvar as_2 X, not a var&quot;</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">K</span><span class="o">.</span>
<span class="linenos"> 31</span>as_3<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>std.assert!<span class="w"> </span>(var<span class="w"> </span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;uvar as_3 X, not a var&quot;</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">K</span><span class="o">.</span>
<span class="linenos"> 32</span>
<span class="linenos"> 33</span><span class="kd">pred</span><span class="w"> </span><span class="nf">unif_1</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">any</span>.
<span class="linenos"> 34</span><span class="kd">pred</span><span class="w"> </span><span class="nf">unif_2</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">any</span>.
<span class="linenos"> 35</span>
<span class="linenos"> 36</span>unif_1<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 37</span>unif_2<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span><span class="nv">y\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">).</span>
<span class="linenos"> 38</span>
<span class="linenos"> 39</span><span class="kd">type</span><span class="w"> </span><span class="nf">u</span><span class="w"> </span><span class="kt">any</span>.
<span class="linenos"> 40</span>
<span class="linenos"> 41</span>tests-uvar<span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 42</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;--------- uvar_1&quot;</span><span class="kd">,</span>
<span class="linenos"> 43</span><span class="w">  </span>not(uvar_1<span class="w"> </span><span class="o">(</span>bar<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>u<span class="o">)))</span><span class="kd">,</span>
<span class="linenos"> 44</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;--------- uvar_2&quot;</span><span class="kd">,</span>
<span class="linenos"> 45</span><span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span><span class="o">(</span>uvar_2<span class="w"> </span><span class="o">(</span>bar<span class="w"> </span><span class="o">(</span><span class="nv">X</span><span class="w"> </span>x<span class="o">))))</span><span class="kd">,</span>
<span class="linenos"> 46</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;--------- uvar_3&quot;</span><span class="kd">,</span>
<span class="linenos"> 47</span><span class="w">  </span>not<span class="w"> </span>(uvar_3<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X0</span><span class="o">))</span><span class="kd">,</span>
<span class="linenos"> 48</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;--------- uvar_3 bis&quot;</span><span class="kd">,</span>
<span class="linenos"> 49</span><span class="w">  </span>uvar_3<span class="w"> </span>(x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">y\</span><span class="w"> </span><span class="nv">X01</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 50</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;--------- uvar_4&quot;</span><span class="kd">,</span>
<span class="linenos"> 51</span><span class="w">  </span>uvar_4<span class="w"> </span><span class="nv">X1</span><span class="kd">,</span>
<span class="linenos"> 52</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;--------- uvar_4 bis&quot;</span><span class="kd">,</span>
<span class="linenos"> 53</span><span class="w">  </span>not(uvar_4<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X2</span><span class="o">))</span><span class="kd">,</span>
<span class="linenos"> 54</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;--------- uvar_4 ter&quot;</span><span class="kd">,</span>
<span class="linenos"> 55</span><span class="w">  </span>uvar_4<span class="w"> </span>(x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X3</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 56</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;--------- uvar_4 quater&quot;</span><span class="kd">,</span>
<span class="linenos"> 57</span><span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">u</span>\<span class="w"> </span>uvar_4<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X4</span><span class="w"> </span>u<span class="w"> </span>x<span class="o">))</span><span class="kd">,</span>
<span class="linenos"> 58</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;--------- uvar_5&quot;</span><span class="kd">,</span>
<span class="linenos"> 59</span><span class="w">  </span>not<span class="w"> </span>(uvar_5<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X5</span><span class="w"> </span>u<span class="w"> </span>x<span class="o">))</span><span class="kd">,</span>
<span class="linenos"> 60</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;--------- uvar_6&quot;</span><span class="kd">,</span>
<span class="linenos"> 61</span><span class="w">  </span>uvar_6<span class="w"> </span>(x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X6</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"> </span>var<span class="w"> </span><span class="nv">X6</span><span class="o">.</span>
<span class="linenos"> 62</span>
<span class="linenos"> 63</span>tests-as<span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 64</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;---------- as_1&quot;</span><span class="kd">,</span>
<span class="linenos"> 65</span><span class="w">  </span>not(as_1<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>bar<span class="w"> </span>u<span class="o">))</span><span class="kd">,</span><span class="w"> </span><span class="c">% fails because (bar (uvar as K) x ==!== bar u)</span>
<span class="linenos"> 66</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;---------- as_1 bis&quot;</span><span class="kd">,</span>
<span class="linenos"> 67</span><span class="w">  </span>not(as_1<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>bar<span class="w"> </span>u<span class="w"> </span>x<span class="o">))</span><span class="kd">,</span><span class="w"> </span><span class="c">% fails because u is not flexible (input mode)</span>
<span class="linenos"> 68</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;---------- as_1 ter&quot;</span><span class="kd">,</span>
<span class="linenos"> 69</span><span class="w">     </span>(as_1<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>bar<span class="w"> </span><span class="o">(</span><span class="nv">X2</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>x<span class="o">))</span><span class="kd">,</span><span class="w"> </span><span class="c">% works but X2 is pruned</span>
<span class="linenos"> 70</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">a</span>\<span class="w"> </span>var<span class="w"> </span><span class="o">(</span><span class="nv">X2</span><span class="w"> </span>a<span class="o">)</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[]</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="c">% assert pruning of X2</span>
<span class="linenos"> 71</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;---------- as_2&quot;</span><span class="kd">,</span>
<span class="linenos"> 72</span><span class="w">     </span>(as_2<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span>x<span class="o">))</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span><span class="c">% works</span>
<span class="linenos"> 73</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">a</span>\<span class="w"> </span>var<span class="w"> </span><span class="o">(</span><span class="nv">X1</span><span class="w"> </span>a<span class="o">)</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[</span>a<span class="kd">]</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="c">% assert X1 was not pruned</span>
<span class="linenos"> 74</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;---------- as_3&quot;</span><span class="kd">,</span>
<span class="linenos"> 75</span><span class="w">  </span>not<span class="w"> </span>(as_3<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X0</span><span class="o">)).</span>
<span class="linenos"> 76</span>
<span class="linenos"> 77</span>tests-unif<span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 78</span><span class="w">    </span>print<span class="w"> </span><span class="s2">&quot;---------- unif_1&quot;</span><span class="kd">,</span>
<span class="linenos"> 79</span><span class="w">    </span>unif_1<span class="w"> </span><span class="nv">X</span><span class="kd">,</span>
<span class="linenos"> 80</span><span class="w">    </span>print<span class="w"> </span><span class="s2">&quot;---------- unif_1 bis&quot;</span><span class="kd">,</span>
<span class="linenos"> 81</span><span class="w">    </span>unif_1<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 82</span><span class="w">    </span>print<span class="w"> </span><span class="s2">&quot;---------- unif_1 ter&quot;</span><span class="kd">,</span>
<span class="linenos"> 83</span><span class="w">    </span>unif_1<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span><span class="nv">y\</span><span class="w"> </span><span class="nv">X2</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 84</span><span class="w">    </span>print<span class="w"> </span><span class="s2">&quot;---------- unif_2&quot;</span><span class="kd">,</span>
<span class="linenos"> 85</span><span class="w">    </span>unif_2<span class="w"> </span><span class="nv">X3</span><span class="kd">,</span>
<span class="linenos"> 86</span><span class="w">    </span>print<span class="w"> </span><span class="s2">&quot;---------- unif_2 bis&quot;</span><span class="kd">,</span>
<span class="linenos"> 87</span><span class="w">    </span>unif_2<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span><span class="nv">X4</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 88</span><span class="w">    </span>print<span class="w"> </span><span class="s2">&quot;---------- unif_2 ter&quot;</span><span class="kd">,</span>
<span class="linenos"> 89</span><span class="w">    </span>unif_2<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span><span class="nv">y\</span><span class="w"> </span><span class="nv">X5</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 90</span><span class="w">    </span>print<span class="w"> </span><span class="s2">&quot;---------- unif_zero&quot;</span><span class="kd">,</span>
<span class="linenos"> 91</span><span class="w">    </span>(<span class="nv">x\</span><span class="w"> </span><span class="nv">X6</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X6</span><span class="o">.</span>
<span class="linenos"> 92</span>
<span class="linenos"> 93</span>tests-var<span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 94</span><span class="w">    </span>print<span class="w"> </span><span class="s2">&quot;---------- var 1&quot;</span><span class="kd">,</span>
<span class="linenos"> 95</span><span class="w">   </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>(var<span class="w"> </span><span class="o">(</span>y<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">))</span><span class="kd">,</span>
<span class="linenos"> 96</span><span class="w">    </span>print<span class="w"> </span><span class="s2">&quot;---------- var 2&quot;</span><span class="kd">,</span>
<span class="linenos"> 97</span><span class="w">   </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>(var<span class="w"> </span><span class="o">(</span>y<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>c<span class="w"> </span>y<span class="o">))</span><span class="kd">,</span><span class="w"> </span>
<span class="linenos"> 98</span><span class="w">    </span>print<span class="w"> </span><span class="s2">&quot;---------- var 3&quot;</span><span class="kd">,</span>
<span class="linenos"> 99</span><span class="w">   </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x z </span>\<span class="w"> </span>(var<span class="w"> </span><span class="o">(</span>y<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">)).</span>
<span class="linenos">100</span>
<span class="linenos">101</span>tests-declare-constraint<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">102</span><span class="w">  </span>declare_constraint<span class="w"> </span>false<span class="w"> </span><span class="kd">[</span><span class="nv">x\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>x<span class="kd">],</span>
<span class="linenos">103</span><span class="w">  </span>not(<span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">_</span><span class="err">\</span><span class="mi">1</span><span class="o">).</span>
<span class="linenos">104</span>
<span class="linenos">105</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>tests-uvar<span class="kd">,</span><span class="w"> </span>tests-as<span class="kd">,</span><span class="w"> </span>tests-unif<span class="kd">,</span><span class="w"> </span>tests-var<span class="kd">,</span><span class="w"> </span>tests-declare-constraint<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">--------- uvar_1</span>
<span class="go">--------- uvar_2</span>
<span class="go">X0 [c0]</span>
<span class="go">--------- uvar_3</span>
<span class="go">--------- uvar_3 bis</span>
<span class="go">X1</span>
<span class="go">--------- uvar_4</span>
<span class="go">--------- uvar_4 bis</span>
<span class="go">--------- uvar_4 ter</span>
<span class="go">--------- uvar_4 quater</span>
<span class="go">--------- uvar_5</span>
<span class="go">--------- uvar_6</span>
<span class="go">c0 \ X2 c0</span>
<span class="go">---------- as_1</span>
<span class="go">---------- as_1 bis</span>
<span class="go">---------- as_1 ter</span>
<span class="go">X3</span>
<span class="go">---------- as_2</span>
<span class="go">c0 \ X4 c0</span>
<span class="go">---------- as_3</span>
<span class="go">---------- unif_1</span>
<span class="go">---------- unif_1 bis</span>
<span class="go">---------- unif_1 ter</span>
<span class="go">---------- unif_2</span>
<span class="go">---------- unif_2 bis</span>
<span class="go">---------- unif_2 ter</span>
<span class="go">---------- unif_zero</span>
<span class="go">---------- var 1</span>
<span class="go">---------- var 2</span>
<span class="go">---------- var 3</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 26, column 8, characters 781-781:</span>
<span class="go">X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 36, column 12, characters 1112-1114:</span>
<span class="go">X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 37, column 15, characters 1132-1136:</span>
<span class="go">X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 45, column 24, characters 1276-1279:</span>
<span class="go">X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 47, column 20, characters 1333-1334:</span>
<span class="go">X0 is linear: name it _X0 (discard) or X0_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 49, column 18, characters 1388-1394:</span>
<span class="go">X01 is linear: name it _X01 (discard) or X01_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 51, column 10, characters 1435-1436:</span>
<span class="go">X1 is linear: name it _X1 (discard) or X1_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 53, column 19, characters 1489-1490:</span>
<span class="go">X2 is linear: name it _X2 (discard) or X2_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 55, column 15, characters 1541-1544:</span>
<span class="go">X3 is linear: name it _X3 (discard) or X3_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 57, column 22, characters 1604-1609:</span>
<span class="go">X4 is linear: name it _X4 (discard) or X4_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 59, column 20, characters 1661-1666:</span>
<span class="go">X5 is linear: name it _X5 (discard) or X5_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 75, column 18, characters 2253-2254:</span>
<span class="go">X0 is linear: name it _X0 (discard) or X0_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 79, column 12, characters 2316-2316:</span>
<span class="go">X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 81, column 16, characters 2369-2372:</span>
<span class="go">X1 is linear: name it _X1 (discard) or X1_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 83, column 19, characters 2429-2434:</span>
<span class="go">X2 is linear: name it _X2 (discard) or X2_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 85, column 12, characters 2480-2481:</span>
<span class="go">X3 is linear: name it _X3 (discard) or X3_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 87, column 16, characters 2534-2537:</span>
<span class="go">X4 is linear: name it _X4 (discard) or X4_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/eta_as.elpi&quot;, line 89, column 19, characters 2594-2599:</span>
<span class="go">X5 is linear: name it _X5 (discard) or X5_ (fresh variable)</span>

<span class="go">Compilation time: 0.001</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> false  /* suspended on X5 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/even-odd.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">nat</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 2</span><span class="kd">type</span><span class="w"> </span><span class="nf">zero</span><span class="w"> </span><span class="kt">nat</span>.
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">succ</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">nat</span>.
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kd">pred</span><span class="w"> </span><span class="nf">odd</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">nat</span>.
<span class="linenos"> 6</span><span class="kd">pred</span><span class="w"> </span><span class="nf">even</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">nat</span>.
<span class="linenos"> 7</span><span class="kd">pred</span><span class="w"> </span><span class="nf">double</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">nat</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">nat</span>.
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>even<span class="w"> </span>zero<span class="o">.</span>
<span class="linenos">10</span>odd<span class="w"> </span>(succ<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>even<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">11</span>even<span class="w"> </span>(succ<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>odd<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">12</span>even<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>var<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>declare_constraint<span class="w"> </span>(even<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos">13</span>odd<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>var<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>declare_constraint<span class="w"> </span>(odd<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos">14</span>
<span class="linenos">15</span>double<span class="w"> </span>zero<span class="w"> </span>zero<span class="o">.</span>
<span class="linenos">16</span>double<span class="w"> </span>(succ<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(succ<span class="w"> </span><span class="o">(</span>succ<span class="w"> </span><span class="nv">Y</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>double<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">.</span>
<span class="linenos">17</span>double<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>var<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>declare_constraint<span class="w"> </span>(double<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos">18</span>
<span class="linenos">19</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>odd<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>not(<span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>zero<span class="o">)</span><span class="kd">,</span><span class="w"> </span>not(double<span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="kd">constraint</span><span class="w"> </span><span class="nf">even odd double </span>{
<span class="linenos">22</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(even<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(odd<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos">23</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(double<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(even<span class="w"> </span><span class="nv">Y</span><span class="o">).</span>
<span class="linenos">24</span>}
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/even-odd.elpi&quot;, line 19, column 42, characters 437-437:</span>
<span class="go">Z is linear: name it _Z (discard) or Z_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> odd X0  /* suspended on X0 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/findall.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">p</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.
<span class="linenos"> 2</span><span class="kd">pred</span><span class="w"> </span><span class="nf">q</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.
<span class="linenos"> 3</span>p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span>
<span class="linenos"> 4</span>p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 5</span>p<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="kd">type</span><span class="w"> </span><span class="nf">test1, test2, test3, test4, test5</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>test1<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>std.findall<span class="w"> </span>(p<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span>p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="kd">,</span><span class="w"> </span>p<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos">10</span>test2<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>std.findall<span class="w"> </span>(p<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span>p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="kd">,</span><span class="w"> </span>p<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="kd">],</span><span class="w"> </span>not(var<span class="w"> </span><span class="nv">X</span><span class="o">).</span>
<span class="linenos">11</span>test3<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">12</span><span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">q</span>\
<span class="linenos">13</span><span class="w">    </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kd">=&gt;</span>
<span class="linenos">14</span><span class="w">    </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kd">=&gt;</span>
<span class="linenos">15</span><span class="w">    </span>q<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kd">=&gt;</span>
<span class="linenos">16</span><span class="w">      </span>(std.findall<span class="w"> </span><span class="o">(</span>q<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="kd">,</span><span class="w"> </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="kd">,</span><span class="w"> </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="kd">],</span><span class="w"> </span>not<span class="w"> </span><span class="o">(</span>var<span class="w"> </span><span class="nv">X</span><span class="o">)).</span>
<span class="linenos">17</span>
<span class="linenos">18</span>
<span class="linenos">19</span>test4<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">20</span><span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">q</span>\
<span class="linenos">21</span><span class="w">    </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span>
<span class="linenos">22</span><span class="w">    </span>q<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span>
<span class="linenos">23</span><span class="w">      </span>(std.findall<span class="w"> </span><span class="o">(</span>q<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>q<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">Y</span><span class="kd">],</span><span class="w"> </span>not<span class="o">(</span>same_var<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)).</span>
<span class="linenos">24</span><span class="c">% this is super tricky but hard to implement differently.</span>
<span class="linenos">25</span><span class="c">% q _ _ -&gt; q A^1 B^1</span>
<span class="linenos">26</span><span class="c">% q A^1 B^1 == q 1 X0 --restrict--&gt; X0 := X1,  A1 := _\X1</span>
<span class="linenos">27</span><span class="c">% when we backtrack the &quot;restriction&quot; on X0 is lost</span>
<span class="linenos">28</span>
<span class="linenos">29</span>test5<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">30</span><span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">q</span>\
<span class="linenos">31</span><span class="w">    </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span>
<span class="linenos">32</span><span class="w">    </span>q<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span>
<span class="linenos">33</span><span class="w">      </span>(std.findall<span class="w"> </span><span class="o">(</span>q<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">Z</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>q<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>q<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">Y</span><span class="kd">],</span><span class="w"> </span>same_var<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">).</span>
<span class="linenos">34</span><span class="c">% this works because there is no restriction</span>
<span class="linenos">35</span>
<span class="linenos">36</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>test1<span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="mi">1</span><span class="kd">,</span>
<span class="linenos">37</span><span class="w">        </span>test2<span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="mi">2</span><span class="kd">,</span>
<span class="linenos">38</span><span class="w">        </span>test3<span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="mi">3</span><span class="kd">,</span>
<span class="linenos">39</span><span class="w">        </span>test4<span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="mi">4</span><span class="kd">,</span>
<span class="linenos">40</span><span class="w">        </span>test5<span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="mi">5</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">4</span>
<span class="go">5</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/findall.elpi&quot;, line 9, column 25, characters 135-135:</span>
<span class="go">A is linear: name it _A (discard) or A_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/findall.elpi&quot;, line 9, column 27, characters 137-137:</span>
<span class="go">B is linear: name it _B (discard) or B_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/findall.elpi&quot;, line 33, column 25, characters 712-712:</span>
<span class="go">Z is linear: name it _Z (discard) or Z_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/fragment_exit.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="err">:</span>untyped<span class="w"> </span>q<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">d</span>\<span class="w"> </span>r<span class="w"> </span><span class="nv">Y</span><span class="o">.</span>
<span class="linenos">2</span><span class="err">:</span>untyped<span class="w"> </span>r<span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos">3</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span>q<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>c<span class="w"> </span>x<span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/fragment_exit2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="err">:</span>untyped<span class="w"> </span>ignore<span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos">2</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span><span class="nv">Y</span><span class="w"> </span>c<span class="w"> </span><span class="kd">=</span><span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>c<span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"> </span>ignore<span class="w"> </span>(<span class="nv">Y</span><span class="w"> </span>c<span class="w"> </span>d<span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/fragment_exit3.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="err">:</span>untyped<span class="w"> </span>ignore<span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos">2</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">Y</span>\<span class="w"> </span><span class="nv">X</span><span class="w"> </span>c<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>ignore<span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="o">(</span>f<span class="w"> </span>d<span class="o">)).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/general_case.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">i</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 2</span><span class="kd">type</span><span class="w"> </span><span class="nf">app</span><span class="w"> </span><span class="kt">(prop</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">ignore, foo</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 4</span><span class="kd">type</span><span class="w"> </span><span class="nf">c</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 5</span>app<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span><span class="w"> </span>
<span class="linenos"> 6</span>c<span class="o">.</span>
<span class="linenos"> 7</span>ignore<span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos"> 8</span>foo<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">d</span>\<span class="w"> </span>ignore<span class="w"> </span><span class="nv">P</span><span class="o">.</span>
<span class="linenos"> 9</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>app<span class="w"> </span>(<span class="nv">x\</span>x<span class="o">)</span><span class="w"> </span>c<span class="kd">,</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(<span class="nv">y\</span>y<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span>c<span class="kd">,</span><span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">d</span>\<span class="w"> </span><span class="nv">F</span><span class="w"> </span>c<span class="o">)</span><span class="kd">,</span>
<span class="linenos">10</span><span class="w">        </span>foo<span class="w"> </span>(<span class="nv">G</span><span class="w"> </span>c<span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/general_case.elpi&quot;, line 10, column 13, characters 213-216:</span>
<span class="go">G is linear: name it _G (discard) or G_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/general_case2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="err">:</span>untyped<span class="w"> </span>p<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>c<span class="w"> </span>x<span class="o">).</span>
<span class="linenos">2</span><span class="err">:</span>untyped<span class="w"> </span>q<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>c<span class="w"> </span>x<span class="o">).</span>
<span class="linenos">3</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>p<span class="w"> </span>(<span class="nv">y\</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">z</span>\<span class="w"> </span>q<span class="w"> </span>y<span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/general_case3.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">2</span><span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">X</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">d</span>\<span class="w"> </span><span class="o">(</span><span class="nv">X</span><span class="w"> </span>d<span class="w"> </span><span class="kd">=</span><span class="w"> </span>f<span class="w"> </span>c<span class="w"> </span>d<span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span>c<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X</span><span class="o">))</span><span class="kd">,</span>
<span class="linenos">3</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">c\</span><span class="w"> </span><span class="nv">d\</span><span class="w"> </span>f<span class="w"> </span>c<span class="w"> </span>d<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/hc_interp.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">/*</span>
<span class="linenos"> 2</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span><span class="nv">An</span><span class="w"> </span>interpreter<span class="w"> </span>for<span class="w"> </span>the<span class="w"> </span>logic<span class="w"> </span>of<span class="w"> </span><span class="nv">Horn</span><span class="w"> </span>clauses<span class="o">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span>code<span class="w"> </span>illustrates<span class="w"> </span>
<span class="linenos"> 3</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>the<span class="w"> </span>usefulness<span class="w"> </span>of<span class="w"> </span>beta<span class="w"> </span>reduction<span class="w"> </span>in<span class="w"> </span>realizing<span class="w"> </span>substitution<span class="o">.</span><span class="w"> </span><span class="nv">Also</span><span class="w"> </span>note
<span class="linenos"> 4</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>the<span class="w"> </span>use<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>logic<span class="w"> </span>variable<span class="w"> </span>in<span class="w"> </span>the<span class="w"> </span>third<span class="w"> </span>clause<span class="w"> </span>for<span class="w"> </span>try_clause<span class="o">.</span>
<span class="linenos"> 5</span><span class="w"> </span><span class="kd">*/</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c">%module  hc_interp.</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c">%accumulate lists.</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="c">%reduce (app (lam F) T) R :- pi x\ copy x T =&gt; copy (F x) (R&#39; x), R = R&#39; x.</span>
<span class="linenos">12</span><span class="kd">kind</span><span class="w"> </span><span class="nf">i</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos">13</span><span class="kd">type</span><span class="w"> </span><span class="nf">a</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">14</span><span class="kd">type</span><span class="w"> </span><span class="nf">xcons</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">15</span><span class="kd">type</span><span class="w"> </span><span class="nf">xnil</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">16</span><span class="kd">type</span><span class="w"> </span><span class="nf">try_clause</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">17</span><span class="kd">type</span><span class="w"> </span><span class="nf">tru</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">18</span><span class="kd">type</span><span class="w"> </span><span class="nf">test2</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">19</span><span class="kd">type</span><span class="w"> </span><span class="nf">test1</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">20</span><span class="kd">type</span><span class="w"> </span><span class="nf">subst</span><span class="w"> </span><span class="kt">(i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">21</span><span class="kd">type</span><span class="w"> </span><span class="nf">perp</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">22</span><span class="kd">type</span><span class="w"> </span><span class="nf">or</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">23</span><span class="kd">type</span><span class="w"> </span><span class="nf">memb</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">24</span><span class="kd">type</span><span class="w"> </span><span class="nf">imp</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">25</span><span class="kd">type</span><span class="w"> </span><span class="nf">hc_interp</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">26</span><span class="kd">type</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">27</span><span class="kd">type</span><span class="w"> </span><span class="nf">copy</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">28</span><span class="kd">type</span><span class="w"> </span><span class="nf">c</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">29</span><span class="kd">type</span><span class="w"> </span><span class="nf">box</span><span class="w"> </span><span class="kt">(i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">30</span><span class="kd">type</span><span class="w"> </span><span class="nf">backchain</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">31</span><span class="kd">type</span><span class="w"> </span><span class="nf">b</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">32</span><span class="kd">type</span><span class="w"> </span><span class="nf">and</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">33</span><span class="kd">type</span><span class="w"> </span><span class="nf">all</span><span class="w"> </span><span class="kt">(i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">34</span>
<span class="linenos">35</span>copy<span class="w"> </span>(and<span class="w"> </span><span class="nv">B1</span><span class="w"> </span><span class="nv">C1</span><span class="o">)</span><span class="w"> </span>(and<span class="w"> </span><span class="nv">B2</span><span class="w"> </span><span class="nv">C2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">B1</span><span class="w"> </span><span class="nv">B2</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">C1</span><span class="w"> </span><span class="nv">C2</span><span class="o">.</span>
<span class="linenos">36</span>copy<span class="w"> </span>(or<span class="w"> </span><span class="nv">B1</span><span class="w"> </span><span class="nv">C1</span><span class="o">)</span><span class="w"> </span>(or<span class="w"> </span><span class="nv">B2</span><span class="w"> </span><span class="nv">C2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">B1</span><span class="w"> </span><span class="nv">B2</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">C1</span><span class="w"> </span><span class="nv">C2</span><span class="o">.</span>
<span class="linenos">37</span>copy<span class="w"> </span>(box<span class="w"> </span><span class="nv">F1</span><span class="o">)</span><span class="w"> </span>(box<span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span>(<span class="nv">F1</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos">38</span>copy<span class="w"> </span>a<span class="w"> </span>a<span class="o">.</span>
<span class="linenos">39</span>copy<span class="w"> </span>b<span class="w"> </span>b<span class="o">.</span>
<span class="linenos">40</span>copy<span class="w"> </span>c<span class="w"> </span>c<span class="o">.</span>
<span class="linenos">41</span>copy<span class="w"> </span>(f<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(f<span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">.</span>
<span class="linenos">42</span>copy<span class="w"> </span>tru<span class="w"> </span>tru<span class="o">.</span>
<span class="linenos">43</span>copy<span class="w"> </span>perp<span class="w"> </span>perp<span class="o">.</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="c">% a[t/b] = a</span>
<span class="linenos">46</span>
<span class="linenos">47</span><span class="c">% b[t/b] = t</span>
<span class="linenos">48</span>
<span class="linenos">49</span>subst<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">B1</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>(copy<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">B2</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">B2</span><span class="w"> </span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">B1</span><span class="o">).</span>
<span class="linenos">50</span><span class="w"> </span>
<span class="linenos">51</span><span class="c">% perp is a fail.</span>
<span class="linenos">52</span><span class="c">% hc_interp Cs G means Cs |- G</span>
<span class="linenos">53</span><span class="c">%hc_interp _ tru.</span>
<span class="linenos">54</span>
<span class="linenos">55</span><span class="c">%hc_interp Cs (box B) :- !, hc_interp Cs (B T).</span>
<span class="linenos">56</span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span>(box<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>subst<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">B1</span><span class="kd">,</span><span class="w"> </span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">B1</span><span class="o">.</span>
<span class="linenos">57</span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span>(and<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">C</span><span class="o">.</span>
<span class="linenos">58</span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span>(or<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>(hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">C</span><span class="o">).</span>
<span class="linenos">59</span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">A</span><span class="w">  </span><span class="kd">:-</span><span class="w">  </span>backchain<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos">60</span><span class="c">% why there is no rule in teyjus: hc_interp Cs (all B) :- .... ?</span>
<span class="linenos">61</span>
<span class="linenos">62</span>backchain<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>memb<span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">Cs</span><span class="kd">,</span><span class="w"> </span>try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos">63</span>
<span class="linenos">64</span>memb<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">_</span><span class="o">).</span>
<span class="linenos">65</span>memb<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>memb<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span>
<span class="linenos">66</span>
<span class="linenos">67</span>
<span class="linenos">68</span><span class="c">% try_clause Cs A B means Cs, A |- B</span>
<span class="linenos">69</span>try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span>(and<span class="w"> </span><span class="nv">D1</span><span class="w"> </span><span class="nv">D2</span><span class="o">)</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>
<span class="linenos">70</span><span class="w">     </span><span class="kd">!,</span><span class="w"> </span>(try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">D1</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">D2</span><span class="w"> </span><span class="nv">A</span><span class="o">).</span>
<span class="linenos">71</span><span class="c">% try_clause Cs (all D) A :- !, try_clause Cs (D T) A.</span>
<span class="linenos">72</span>try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span>(all<span class="w"> </span><span class="nv">D</span><span class="o">)</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>subst<span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">D1</span><span class="kd">,</span><span class="w"> </span>try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">D1</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos">73</span>try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos">74</span>try_clause<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span>(imp<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="nv">G</span><span class="o">.</span>
<span class="linenos">75</span>
<span class="linenos">76</span><span class="c">%prog (xcons (adj a b) (xcons (adj b c) (xcons (adj c (f c))</span>
<span class="linenos">77</span><span class="c">%      (xcons (all X\ (all Y\ (imp (adj X Y) (path X Y))))</span>
<span class="linenos">78</span><span class="c">%      (xcons (all X\ (all Y\ (all Z\ (imp (and (adj X Y) (path Y Z)) </span>
<span class="linenos">79</span><span class="c">%                                           (path X Z))))) xnil))))).</span>
<span class="linenos">80</span>
<span class="linenos">81</span><span class="c">%pathfroma X :- prog Cs, hc_interp Cs (path a X).</span>
<span class="linenos">82</span>
<span class="linenos">83</span>test1<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="c">%Cs = (xcons a (xcons b (xcons c xnil))),</span>
<span class="linenos">84</span><span class="w">        </span><span class="c">%try_clause Cs (and a (or b c)) (or (and a b) (and a c)).</span>
<span class="linenos">85</span><span class="w">        </span>hc_interp<span class="w"> </span>(xcons<span class="w"> </span>a<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span>b<span class="w"> </span>c<span class="o">)</span><span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span>a<span class="w"> </span>b<span class="o">)</span><span class="w"> </span>xnil<span class="o">)))</span><span class="w"> </span>c<span class="o">.</span>
<span class="linenos">86</span>
<span class="linenos">87</span>test2<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">Cs</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>xcons<span class="w"> </span>(f<span class="w"> </span>a<span class="o">)</span><span class="w"> </span>xnil<span class="kd">,</span><span class="w"> </span>
<span class="linenos">88</span><span class="w">        </span>hc_interp<span class="w"> </span><span class="nv">Cs</span><span class="w"> </span>(box<span class="w"> </span>f<span class="o">).</span>
<span class="linenos">89</span>
<span class="linenos">90</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>test1<span class="kd">,</span><span class="w"> </span>test2<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 56, column 37, characters 1311-1311:</span>
<span class="go">T is linear: name it _T (discard) or T_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 65, column 15, characters 1644-1644:</span>
<span class="go">Y is linear: name it _Y (discard) or Y_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 72, column 39, characters 1877-1877:</span>
<span class="go">T is linear: name it _T (discard) or T_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/hc_interp.elpi&quot;, line 73, column 12, characters 1914-1915:</span>
<span class="go">Cs is linear: name it _Cs (discard) or Cs_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/hdclause.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">foo</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">a</span><span class="w"> </span><span class="kt">((int</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo</span>.
<span class="linenos"> 4</span><span class="kd">type</span><span class="w"> </span><span class="nf">b</span><span class="w"> </span><span class="kt">foo</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo</span>.
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kd">type</span><span class="w"> </span><span class="nf">p</span><span class="w"> </span><span class="kt">(foo</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 7</span><span class="kd">type</span><span class="w"> </span><span class="nf">q</span><span class="w"> </span><span class="kt">(foo</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">foo</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>p<span class="w"> </span><span class="nv">K</span><span class="w"> </span>(a<span class="w"> </span><span class="nv">f\</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="o">(</span>f<span class="w"> </span><span class="mi">0</span><span class="o">)).</span>
<span class="linenos">10</span>q<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(a<span class="w"> </span><span class="nv">f\</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="o">(</span>f<span class="w"> </span><span class="mi">0</span><span class="o">)).</span>
<span class="linenos">11</span>
<span class="linenos">12</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">13</span><span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span>p<span class="w"> </span>b<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="o">))</span><span class="kd">,</span>
<span class="linenos">14</span><span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span>q<span class="w"> </span>b<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="o">))</span><span class="kd">,</span>
<span class="linenos">15</span><span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x y</span>\<span class="w"> </span>q<span class="w"> </span>b<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="o">))</span><span class="kd">,</span>
<span class="linenos">16</span><span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x y</span>\<span class="w"> </span>p<span class="w"> </span>b<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="o">)).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/heap_discard.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">2</span><span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">,</span><span class="mi">2</span><span class="kd">],</span>
<span class="linenos">3</span><span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="mi">1</span><span class="kd">,</span><span class="mi">2</span><span class="kd">],</span>
<span class="linenos">4</span><span class="w">  </span>not(<span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="mi">2</span><span class="kd">,</span><span class="mi">2</span><span class="kd">]</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">a b</span>\<span class="w"> </span><span class="nv">Y</span><span class="w"> </span>b<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">],</span><span class="w"> </span>b<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">_</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/heap_discard.elpi&quot;, line 5, column 11, characters 63-65:</span>
<span class="go">Y is linear: name it _Y (discard) or Y_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/ho.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c">% q(a): OK; q(b): FAIL; q(X): exception; q(a,a): OK; q(true): OK.</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kd">pred</span><span class="w"> </span><span class="nf">q</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(pred)</span>.
<span class="linenos">4</span>q(<span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">5</span>
<span class="linenos">6</span><span class="kd">pred</span><span class="w"> </span><span class="nf">a</span>.
<span class="linenos">7</span>a<span class="o">.</span>
<span class="linenos">8</span>
<span class="linenos">9</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span>a<span class="kd">,</span><span class="w"> </span>q<span class="w"> </span>(a<span class="kd">,</span>a<span class="o">)</span><span class="kd">,</span><span class="w"> </span>q<span class="w"> </span>true<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/hollight.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">   1</span><span class="c">/* Untrusted predicates called from the kernel:</span>
<span class="linenos">   2</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>next_object<span class="w">            </span>next<span class="w"> </span>object<span class="w"> </span>to<span class="w"> </span>check
<span class="linenos">   3</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>callback_proved<span class="w">        </span>proof<span class="w"> </span>completed
<span class="linenos">   4</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>next_tactic<span class="w">            </span>next<span class="w"> </span>tactic<span class="w"> </span>to<span class="w"> </span>use
<span class="linenos">   5</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>update_certificate<span class="w">     </span>get<span class="w"> </span>new<span class="w"> </span>certificate<span class="w"> </span>after<span class="w"> </span>tactic<span class="w"> </span>application
<span class="linenos">   6</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>end_of_proof<span class="w">           </span><span class="kd">is</span><span class="w"> </span>the<span class="w"> </span>certificate/proof<span class="w"> </span>empty?
<span class="linenos">   7</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>ppterm<span class="w">                 </span>for<span class="w"> </span>pretty-printing<span class="w"> </span>messages
<span class="linenos">   8</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>deftac<span class="w">                 </span>tactic<span class="w"> </span>definition
<span class="linenos">   9</span><span class="w"> </span><span class="kd">*/</span>
<span class="linenos">  10</span>
<span class="linenos">  11</span><span class="c">/* Predicates exported from the trusted library:</span>
<span class="linenos">  12</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>append
<span class="linenos">  13</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>fold2_append
<span class="linenos">  14</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>put_binds
<span class="linenos">  15</span><span class="w"> </span><span class="kd">*/</span>
<span class="linenos">  16</span><span class="w"> </span>
<span class="linenos">  17</span><span class="c">/* Predicates exported from the kernel:</span>
<span class="linenos">  18</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>proves
<span class="linenos">  19</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>check
<span class="linenos">  20</span><span class="w"> </span><span class="kd">*/</span>
<span class="linenos">  21</span>
<span class="linenos">  22</span>{ <span class="c">/***** Trusted code base *******/</span>
<span class="linenos">  23</span>
<span class="linenos">  24</span><span class="c">/***** Trusted library functions *****/</span>
<span class="linenos">  25</span>
<span class="linenos">  26</span><span class="c">/* The names with &#39; at the end are trusted; the ones without are</span>
<span class="linenos">  27</span><span class="w">   </span>exported<span class="w"> </span>and<span class="w"> </span>therefore<span class="w"> </span>untrusted<span class="o">.</span><span class="w"> </span><span class="kd">*/</span>
<span class="linenos">  28</span><span class="kd">local</span><span class="w"> </span>append&#39;<span class="kd">,</span><span class="w"> </span>fold2_append&#39;<span class="kd">,</span><span class="w"> </span>put_binds&#39;<span class="o">.</span>
<span class="linenos">  29</span>
<span class="linenos">  30</span>append&#39;<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span>
<span class="linenos">  31</span>append&#39;<span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">RES</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>append&#39;<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">RES</span><span class="o">.</span>
<span class="linenos">  32</span>append<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>append&#39;<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="o">.</span>
<span class="linenos">  33</span>
<span class="linenos">  34</span>fold2_append&#39;<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
<span class="linenos">  35</span>fold2_append&#39;<span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">YS</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">OUTS</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">  36</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">OUT</span><span class="kd">,</span><span class="w"> </span>fold2_append&#39;<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">YS</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">OUTS2</span><span class="kd">,</span><span class="w"> </span>append&#39;<span class="w"> </span><span class="nv">OUT</span><span class="w"> </span><span class="nv">OUTS2</span><span class="w"> </span><span class="nv">OUTS</span><span class="o">.</span>
<span class="linenos">  37</span>fold2_append<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>fold2_append&#39;<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">D</span><span class="o">.</span>
<span class="linenos">  38</span>
<span class="linenos">  39</span><span class="c">% put_binds : list &#39;b -&gt; &#39;a -&gt; &#39;c -&gt; list (bounded &#39;b) -&gt; o</span>
<span class="linenos">  40</span><span class="c">% put_binds [ f1,...,fn ] x t [ bind t x \ f1,...,bind t x fn ]</span>
<span class="linenos">  41</span><span class="c">% binding all the xs that occur in f1,...,fn</span>
<span class="linenos">  42</span>put_binds&#39;<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
<span class="linenos">  43</span>put_binds&#39;<span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">YX</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">YSX</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">YYS</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">  44</span><span class="w"> </span><span class="nv">YX</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>put_binds&#39;<span class="w"> </span><span class="nv">YSX</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">YYS</span><span class="o">.</span>
<span class="linenos">  45</span>put_binds<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>put_binds&#39;<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">D</span><span class="o">.</span>
<span class="linenos">  46</span>
<span class="linenos">  47</span><span class="c">/***** The HOL kernel *****/</span>
<span class="linenos">  48</span>
<span class="linenos">  49</span><span class="kd">local</span><span class="w"> </span>thm<span class="kd">,</span><span class="w"> </span>provable<span class="kd">,</span><span class="w"> </span>def0<span class="kd">,</span><span class="w"> </span>term<span class="kd">,</span><span class="w"> </span>typ<span class="kd">,</span><span class="w"> </span>typ&#39;<span class="kd">,</span><span class="w"> </span>loop<span class="kd">,</span><span class="w"> </span>prove<span class="kd">,</span><span class="w"> </span>check1<span class="kd">,</span>
<span class="linenos">  50</span><span class="w"> </span>check1def<span class="kd">,</span><span class="w"> </span>check1thm<span class="kd">,</span><span class="w"> </span>check1axm<span class="kd">,</span><span class="w"> </span>check1nbt<span class="kd">,</span>
<span class="linenos">  51</span><span class="w"> </span>reterm<span class="kd">,</span><span class="w"> </span>not_defined<span class="kd">,</span><span class="w"> </span>check_hyps<span class="o">.</span>
<span class="linenos">  52</span>
<span class="linenos">  53</span>proves<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>provable<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">TY</span><span class="o">.</span>
<span class="linenos">  54</span>
<span class="linenos">  55</span>typ<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"> </span><span class="c">% this line temporarily drops checking of well-formedness for types</span>
<span class="linenos">  56</span><span class="w">            </span><span class="c">% to avoid too much slow down. It is ultimately due to re-typing</span>
<span class="linenos">  57</span><span class="w">            </span><span class="c">% terms that should be recognized as already well typed.</span>
<span class="linenos">  58</span>typ<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>var<span class="w"> </span><span class="nv">T</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>declare_constraint<span class="w"> </span>(typ<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos">  59</span>typ<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>typ&#39;<span class="w"> </span><span class="nv">T</span><span class="o">.</span>
<span class="linenos">  60</span>typ&#39;<span class="w"> </span>prop<span class="o">.</span>
<span class="linenos">  61</span>typ&#39;<span class="w"> </span>(univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>typ<span class="w"> </span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span>typ<span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos">  62</span>typ&#39;<span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>typ<span class="w"> </span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span>typ<span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos">  63</span>typ&#39;<span class="w"> </span>(disj_union<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>typ<span class="w"> </span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span>typ<span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos">  64</span>
<span class="linenos">  65</span><span class="kd">pred</span><span class="w"> </span><span class="nf">term</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">B</span>.
<span class="linenos">  66</span>term<span class="w"> </span>(lam<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>typ<span class="w"> </span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>term<span class="w"> </span>x<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>term<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos">  67</span>term<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>#<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>term<span class="w"> </span><span class="nv">F</span><span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>term<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos">  68</span>term<span class="w"> </span>(eq<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>typ<span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos">  69</span>term<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>(term<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">TY</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span>
<span class="linenos">  70</span>
<span class="linenos">  71</span><span class="c">/* like term, but on terms that are already known to be well-typed */</span>
<span class="linenos">  72</span><span class="kd">pred</span><span class="w"> </span><span class="nf">reterm</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">B</span>.
<span class="linenos">  73</span>reterm<span class="w"> </span>(lam<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>reterm<span class="w"> </span>x<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>reterm<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos">  74</span>reterm<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>#<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>reterm<span class="w"> </span><span class="nv">F</span><span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">).</span>
<span class="linenos">  75</span>reterm<span class="w"> </span>(eq<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">).</span>
<span class="linenos">  76</span>reterm<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>(reterm<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">TY</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span>
<span class="linenos">  77</span>
<span class="linenos">  78</span><span class="kd">constraint</span><span class="w"> </span><span class="nf">term reterm </span>{<span class="w"> </span><span class="c">/* No propagation rules for now */</span>}
<span class="linenos">  79</span>
<span class="linenos">  80</span><span class="c">% thm : bounded tactic -&gt; bounded sequent -&gt; list (bounded sequent) -&gt; o</span>
<span class="linenos">  81</span>thm<span class="w"> </span><span class="nv">C</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>debug<span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="s2">&quot;|- &quot;</span><span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="s2">&quot; := &quot;</span><span class="w"> </span><span class="nv">C</span><span class="kd">,</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos">  82</span>
<span class="linenos">  83</span><span class="c">/* &lt;&lt; HACKS FOR DEBUGGING */</span>
<span class="linenos">  84</span>thm<span class="w"> </span>daemon<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
<span class="linenos">  85</span><span class="c">/* &gt;&gt; HACKS FOR DEBUGGING */</span>
<span class="linenos">  86</span>
<span class="linenos">  87</span>thm<span class="w"> </span>r<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">X</span><span class="w"> </span>#<span class="w"> </span><span class="nv">X</span><span class="o">))</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
<span class="linenos">  88</span>thm<span class="w"> </span>(t<span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span><span class="nv">X</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Z</span><span class="o">))</span>
<span class="linenos">  89</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(eq<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span><span class="nv">X</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(eq<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Y</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Z</span><span class="o">)</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>term<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos">  90</span>thm<span class="w"> </span>(m<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(eq<span class="w"> </span>##<span class="w"> </span>prop<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>term<span class="w"> </span><span class="nv">P</span><span class="w"> </span>prop<span class="o">.</span>
<span class="linenos">  91</span>thm<span class="w"> </span>b<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="o">((</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">)))</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
<span class="linenos">  92</span>thm<span class="w"> </span>c<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>#<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">G</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Y</span><span class="o">)))</span>
<span class="linenos">  93</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(eq<span class="w"> </span>##<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="nv">F</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(eq<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span><span class="nv">X</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>reterm<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span>reterm<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos">  94</span>thm<span class="w"> </span>k<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">S</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">T</span><span class="o">)))</span>
<span class="linenos">  95</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(eq<span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">S</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">T</span><span class="w"> </span>x<span class="o">))</span><span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos">  96</span>thm<span class="w"> </span>s<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span>prop<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">))</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>seq<span class="w"> </span>(<span class="nv">P</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="nv">Gamma</span><span class="o">)</span><span class="w"> </span><span class="nv">Q</span><span class="kd">,</span><span class="w"> </span>seq<span class="w"> </span>(<span class="nv">Q</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="nv">Gamma</span><span class="o">)</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos">  97</span>thm<span class="w"> </span>(h<span class="w"> </span><span class="nv">IGN</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>append&#39;<span class="w"> </span><span class="nv">IGN</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">Gamma2</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="nv">Gamma</span><span class="o">.</span>
<span class="linenos">  98</span>
<span class="linenos">  99</span>thm<span class="w"> </span>d<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">C</span><span class="w"> </span>#<span class="w"> </span><span class="nv">A</span><span class="o">))</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>def0<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos"> 100</span>thm<span class="w"> </span>(th<span class="w"> </span><span class="nv">NAME</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>provable<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">G</span><span class="o">.</span>
<span class="linenos"> 101</span>
<span class="linenos"> 102</span>thm<span class="w"> </span>(thenll<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">TACN</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 103</span><span class="w"> </span>thm<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">NEW</span><span class="kd">,</span>
<span class="linenos"> 104</span><span class="w"> </span>deftacl<span class="w"> </span><span class="nv">TACN</span><span class="w"> </span><span class="nv">NEW</span><span class="w"> </span><span class="nv">TACL</span><span class="kd">,</span>
<span class="linenos"> 105</span><span class="w"> </span>fold2_append&#39;<span class="w"> </span><span class="nv">TACL</span><span class="w"> </span><span class="nv">NEW</span><span class="w"> </span>thm<span class="w"> </span><span class="nv">SEQS</span><span class="o">.</span>
<span class="linenos"> 106</span>
<span class="linenos"> 107</span><span class="c">/*debprint _ (then _ _) :- !.</span>
<span class="linenos"> 108</span>debprint<span class="w"> </span><span class="nv">_</span><span class="w"> </span>(thenl<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 109</span>debprint<span class="w"> </span><span class="nv">O</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="nv">O</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span><span class="kd">*/</span>
<span class="linenos"> 110</span>
<span class="linenos"> 111</span>thm<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 112</span><span class="w"> </span>deftac<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">XTAC</span><span class="kd">,</span>
<span class="linenos"> 113</span><span class="w"> </span><span class="c">/*debprint &quot;&lt;&lt;&quot; TAC,</span>
<span class="linenos"> 114</span><span class="w"> </span>(<span class="kd">*/</span><span class="w"> </span>thm<span class="w"> </span><span class="nv">XTAC</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span><span class="c">/*, debprint &quot;&gt;&gt;&quot; TAC</span>
<span class="linenos"> 115</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>debprint<span class="w"> </span><span class="s2">&quot;XX&quot;</span><span class="w"> </span><span class="nv">TAC</span><span class="kd">,</span><span class="w"> </span>fail<span class="err">)</span><span class="kd">*/</span><span class="o">.</span>
<span class="linenos"> 116</span>
<span class="linenos"> 117</span>thm<span class="w"> </span>(<span class="kd">!</span><span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 118</span><span class="w"> </span>thm<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">SEQS</span><span class="kd">,</span>
<span class="linenos"> 119</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 120</span>
<span class="linenos"> 121</span>thm<span class="w"> </span>id<span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 122</span>
<span class="linenos"> 123</span>thm<span class="w"> </span>(wl<span class="w"> </span><span class="nv">Gamma1</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>seq<span class="w"> </span><span class="nv">WGamma</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 124</span><span class="w"> </span>append&#39;<span class="w"> </span><span class="nv">Gamma1</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">Gamma2</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="nv">Gamma</span><span class="kd">,</span>
<span class="linenos"> 125</span><span class="w"> </span>append&#39;<span class="w"> </span><span class="nv">Gamma1</span><span class="w"> </span><span class="nv">Gamma2</span><span class="w"> </span><span class="nv">WGamma</span><span class="o">.</span>
<span class="linenos"> 126</span>
<span class="linenos"> 127</span>thm<span class="w"> </span>(bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span>(bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">SEQ</span><span class="o">)</span><span class="w"> </span><span class="nv">NEWL</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 128</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>term<span class="w"> </span>x<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>reterm<span class="w"> </span>x<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>thm<span class="w"> </span>(<span class="nv">TAC</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">SEQ</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">NEW</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"> </span>put_binds&#39;<span class="w"> </span>(<span class="nv">NEW</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>x<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">NEWL</span><span class="o">.</span>
<span class="linenos"> 129</span>
<span class="linenos"> 130</span>thm<span class="w"> </span>ww<span class="w"> </span>(bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">SEQ</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 131</span>
<span class="linenos"> 132</span><span class="c">/* debuggin only, remove it */</span>
<span class="linenos"> 133</span><span class="c">%thm A B C :- print &quot;FAILED &quot; (thm A B C), fail.</span>
<span class="linenos"> 134</span>
<span class="linenos"> 135</span><span class="c">% loop : list (bounded sequent) -&gt; certificate -&gt; o</span>
<span class="linenos"> 136</span><span class="c">%loop SEQS TACS :- print &quot;LOOP&quot; (loop SEQS TACS), fail.</span>
<span class="linenos"> 137</span>loop<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">CERTIFICATE</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>end_of_proof<span class="w"> </span><span class="nv">CERTIFICATE</span><span class="o">.</span>
<span class="linenos"> 138</span>loop<span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">OLD</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="nv">CERTIFICATE</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 139</span><span class="w"> </span>next_tactic<span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">OLD</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="nv">CERTIFICATE</span><span class="w"> </span><span class="nv">ITAC</span><span class="kd">,</span>
<span class="linenos"> 140</span><span class="w"> </span>thm<span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">NEW</span><span class="kd">,</span>
<span class="linenos"> 141</span><span class="w"> </span>append&#39;<span class="w"> </span><span class="nv">NEW</span><span class="w"> </span><span class="nv">OLD</span><span class="w"> </span><span class="nv">SEQS</span><span class="kd">,</span>
<span class="linenos"> 142</span><span class="w"> </span>update_certificate<span class="w"> </span><span class="nv">CERTIFICATE</span><span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="nv">NEW</span><span class="w"> </span><span class="nv">NEW_CERTIFICATE</span><span class="kd">,</span>
<span class="linenos"> 143</span><span class="w"> </span>loop<span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span><span class="nv">NEW_CERTIFICATE</span><span class="o">.</span>
<span class="linenos"> 144</span>
<span class="linenos"> 145</span>prove<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="nv">TACS</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 146</span><span class="w"> </span>(term<span class="w"> </span><span class="nv">G</span><span class="w"> </span>prop<span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>ppterm<span class="w"> </span><span class="nv">PG</span><span class="w"> </span><span class="nv">G</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;Bad statement:&quot;</span><span class="w"> </span><span class="nv">PG</span><span class="kd">,</span><span class="w"> </span>fail<span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 147</span><span class="c">% (TACS = (false,_), ! ;</span>
<span class="linenos"> 148</span><span class="w"> </span>loop<span class="w"> </span><span class="kd">[</span><span class="w"> </span>seq<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="nv">TACS</span>
<span class="linenos"> 149</span><span class="o">.</span><span class="w"> </span><span class="c">% ).</span>
<span class="linenos"> 150</span>
<span class="linenos"> 151</span>not_defined<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 152</span><span class="w"> </span>not<span class="w"> </span>(<span class="nv">P</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;Error:&quot;</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span>already<span class="w"> </span>defined<span class="kd">,</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos"> 153</span>
<span class="linenos"> 154</span>check_hyps<span class="w"> </span><span class="nv">HS</span><span class="w"> </span>(typ&#39;<span class="w"> </span><span class="nv">TYPE</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 155</span><span class="w"> </span>(not<span class="w"> </span><span class="o">(</span>typ&#39;<span class="w"> </span><span class="nv">TYPE</span><span class="o">)</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;Error:&quot;</span><span class="w"> </span><span class="nv">TYPE</span><span class="w"> </span>already<span class="w"> </span>defined<span class="kd">,</span><span class="w"> </span>fail<span class="o">)</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">HS</span><span class="w"> </span>new<span class="w"> </span><span class="nv">TYPE</span><span class="o">.</span>
<span class="linenos"> 156</span>check_hyps<span class="w"> </span><span class="nv">HS</span><span class="w"> </span>(def0<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">DEF</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppterm<span class="w"> </span><span class="nv">PDEF</span><span class="w"> </span><span class="nv">DEF</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">HS</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="s2">&quot;=&quot;</span><span class="w"> </span><span class="nv">PDEF</span><span class="o">.</span>
<span class="linenos"> 157</span>check_hyps<span class="w"> </span><span class="nv">HS</span><span class="w"> </span>(term<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">TYPE</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 158</span><span class="w"> </span>not_defined<span class="w"> </span>term<span class="w"> </span><span class="nv">NAME</span><span class="kd">,</span><span class="w"> </span>ppterm<span class="w"> </span><span class="nv">PTYPE</span><span class="w"> </span><span class="nv">TYPE</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">HS</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="s2">&quot;:&quot;</span><span class="w"> </span><span class="nv">PTYPE</span><span class="o">.</span>
<span class="linenos"> 159</span>check_hyps<span class="w"> </span><span class="nv">HS</span><span class="w"> </span>(reterm<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="o">).</span>
<span class="linenos"> 160</span>check_hyps<span class="w"> </span><span class="nv">HS</span><span class="w"> </span>(provable<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">TYPE</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 161</span><span class="w"> </span>not_defined<span class="w"> </span>provable<span class="w"> </span><span class="nv">NAME</span><span class="kd">,</span><span class="w"> </span>ppterm<span class="w"> </span><span class="nv">PTYPE</span><span class="w"> </span><span class="nv">TYPE</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">HS</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="s2">&quot;:&quot;</span><span class="w"> </span><span class="nv">PTYPE</span><span class="o">.</span>
<span class="linenos"> 162</span>check_hyps<span class="w"> </span><span class="nv">HS</span><span class="w"> </span>(<span class="nv">H1</span><span class="kd">,</span><span class="nv">H2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>check_hyps<span class="w"> </span><span class="nv">HS</span><span class="w"> </span><span class="nv">H1</span><span class="kd">,</span><span class="w"> </span>check_hyps<span class="w"> </span><span class="nv">HS</span><span class="w"> </span><span class="nv">H2</span><span class="o">.</span>
<span class="linenos"> 163</span>check_hyps<span class="w"> </span><span class="nv">HS</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">H</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>typ&#39;<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>check_hyps<span class="w"> </span><span class="kd">[</span>x<span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">HS</span><span class="kd">]</span><span class="w"> </span>(<span class="nv">H</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 164</span>check_hyps<span class="w"> </span><span class="nv">HS</span><span class="w"> </span>(<span class="nv">_</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="nv">H2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>check_hyps<span class="w"> </span><span class="nv">HS</span><span class="w"> </span><span class="nv">H2</span><span class="o">.</span>
<span class="linenos"> 165</span>
<span class="linenos"> 166</span><span class="c">/* check1 I O</span>
<span class="linenos"> 167</span><span class="w">   </span>checks<span class="w"> </span>the<span class="w"> </span>declaration<span class="w"> </span><span class="nv">I</span>
<span class="linenos"> 168</span><span class="w">   </span>returns<span class="w"> </span>the<span class="w"> </span>new<span class="w"> </span>assumption<span class="w"> </span><span class="nv">O</span><span class="w"> </span><span class="kd">*/</span>
<span class="linenos"> 169</span>check1<span class="w"> </span>(theorem<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">GOALTACTICS</span><span class="o">)</span><span class="w"> </span><span class="nv">HYPS</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>check1thm<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">GOALTACTICS</span><span class="w"> </span><span class="nv">HYPS</span><span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 170</span>check1<span class="w"> </span>(axiom<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">ST</span><span class="o">)</span><span class="w"> </span><span class="nv">HYPS</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>check1axm<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">ST</span><span class="w"> </span><span class="nv">HYPS</span><span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 171</span>check1<span class="w"> </span>(new_basic_type<span class="w"> </span><span class="nv">TYPE</span><span class="w"> </span><span class="nv">REP</span><span class="w"> </span><span class="nv">ABS</span><span class="w"> </span><span class="nv">REPABS</span><span class="w"> </span><span class="nv">ABSREP</span><span class="w"> </span><span class="nv">PREPH</span><span class="w"> </span><span class="nv">P_TACTICS</span><span class="o">)</span><span class="w"> </span><span class="nv">HYPS</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>check1nbt<span class="w"> </span><span class="nv">TYPE</span><span class="w"> </span><span class="nv">REP</span><span class="w"> </span><span class="nv">ABS</span><span class="w"> </span><span class="nv">REPABS</span><span class="w"> </span><span class="nv">ABSREP</span><span class="w"> </span><span class="nv">PREPH</span><span class="w"> </span><span class="nv">P_TACTICS</span><span class="w"> </span>true<span class="w"> </span><span class="nv">HYPS</span><span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 172</span>check1<span class="w"> </span>(def<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">TYPDEF</span><span class="o">)</span><span class="w"> </span><span class="nv">HYPS</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>check1def<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">TYPDEF</span><span class="w"> </span>true<span class="w"> </span><span class="nv">HYPS</span><span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 173</span>check1<span class="w"> </span>(decl<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">TYP</span><span class="o">)</span><span class="w"> </span><span class="nv">HYPS</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>check1decl<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">TYP</span><span class="w"> </span>true<span class="w"> </span><span class="nv">HYPS</span><span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 174</span>
<span class="linenos"> 175</span>check1def<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">I</span><span class="o">)</span><span class="w"> </span><span class="nv">HYPSUCHTHAT</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">HYPS</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 176</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>typ&#39;<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>check1def<span class="w"> </span>(<span class="nv">NAME</span><span class="w"> </span>##<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">I</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">HYPSUCHTHAT</span><span class="kd">,</span><span class="w"> </span>typ<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">HYPS</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 177</span>check1def<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span>(<span class="nv">TYP</span><span class="kd">,</span><span class="nv">DEF</span><span class="o">)</span><span class="w"> </span><span class="nv">HYPSUCHTHAT</span><span class="w"> </span><span class="nv">HYPS</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 178</span><span class="w"> </span>typ<span class="w"> </span><span class="nv">TYP</span><span class="kd">,</span><span class="w"> </span>term<span class="w"> </span><span class="nv">DEF</span><span class="w"> </span><span class="nv">TYP</span><span class="kd">,</span>
<span class="linenos"> 179</span><span class="w"> </span><span class="nv">HYPS</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(<span class="o">(</span><span class="nv">HYPSUCHTHAT</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>term<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">TYP</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>reterm<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">TYP</span><span class="kd">,</span><span class="w"> </span>def0<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">DEF</span><span class="o">).</span>
<span class="linenos"> 180</span>
<span class="linenos"> 181</span>check1decl<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">I</span><span class="o">)</span><span class="w"> </span><span class="nv">HYPSUCHTHAT</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">HYPS</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 182</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>typ&#39;<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>check1decl<span class="w"> </span>(<span class="nv">NAME</span><span class="w"> </span>##<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">I</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">HYPSUCHTHAT</span><span class="kd">,</span><span class="w"> </span>typ<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">HYPS</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 183</span>check1decl<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">TYP</span><span class="w"> </span><span class="nv">HYPSUCHTHAT</span><span class="w"> </span><span class="nv">HYPS</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 184</span><span class="w"> </span>typ<span class="w"> </span><span class="nv">TYP</span><span class="kd">,</span><span class="w"> </span><span class="nv">HYPS</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(<span class="o">(</span><span class="nv">HYPSUCHTHAT</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>term<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">TYP</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>reterm<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">TYP</span><span class="o">).</span>
<span class="linenos"> 185</span>
<span class="linenos"> 186</span>check1thm<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">I</span><span class="o">)</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">HYPS</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 187</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>typ&#39;<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>check1thm<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span>(<span class="nv">I</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">HYPS</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 188</span>check1thm<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span>(<span class="nv">GOAL</span><span class="kd">,</span><span class="nv">TACTICS</span><span class="o">)</span><span class="w"> </span>(provable<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">GOAL</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 189</span><span class="w">  </span>prove<span class="w"> </span><span class="nv">GOAL</span><span class="w"> </span><span class="nv">TACTICS</span><span class="kd">,</span>
<span class="linenos"> 190</span><span class="w">  </span>callback_proved<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">GOAL</span><span class="w"> </span><span class="nv">TACTICS</span><span class="o">.</span>
<span class="linenos"> 191</span>
<span class="linenos"> 192</span>check1axm<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">I</span><span class="o">)</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">HYPS</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 193</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>typ&#39;<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>check1axm<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span>(<span class="nv">I</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">HYPS</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 194</span>check1axm<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">GOAL</span><span class="w"> </span>(provable<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">GOAL</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 195</span><span class="w"> </span>term<span class="w"> </span><span class="nv">GOAL</span><span class="w"> </span>prop<span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>ppterm<span class="w"> </span><span class="nv">PGOAL</span><span class="w"> </span><span class="nv">GOAL</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;Bad statement:&quot;</span><span class="w"> </span><span class="nv">PGOAL</span><span class="kd">,</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos"> 196</span>
<span class="linenos"> 197</span>check1nbt<span class="w"> </span><span class="nv">TYPE</span><span class="w"> </span><span class="nv">REP</span><span class="w"> </span><span class="nv">ABS</span><span class="w"> </span><span class="nv">REPABS</span><span class="w"> </span><span class="nv">ABSREP</span><span class="w"> </span><span class="nv">PREPH</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">P_TACTICS</span><span class="o">)</span><span class="w"> </span><span class="nv">HYPSUCHTHAT</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">HYPS</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 198</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>typ&#39;<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>check1nbt<span class="w"> </span>(<span class="nv">TYPE</span><span class="w"> </span>##<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">REP</span><span class="w"> </span>##<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">ABS</span><span class="w"> </span>##<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">REPABS</span><span class="w"> </span><span class="nv">ABSREP</span><span class="w"> </span><span class="nv">PREPH</span><span class="w"> </span>(<span class="nv">P_TACTICS</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">HYPSUCHTHAT</span><span class="kd">,</span><span class="w"> </span>typ<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">HYPS</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 199</span>check1nbt<span class="w"> </span><span class="nv">TYPE</span><span class="w"> </span><span class="nv">REP</span><span class="w"> </span><span class="nv">ABS</span><span class="w"> </span><span class="nv">REPABS</span><span class="w"> </span><span class="nv">ABSREP</span><span class="w"> </span><span class="nv">PREPH</span><span class="w"> </span>(<span class="nv">P</span><span class="kd">,</span><span class="nv">TACTICS</span><span class="o">)</span><span class="w"> </span><span class="nv">HYPSUCHTHAT</span><span class="w"> </span><span class="nv">HYPS</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 200</span><span class="w">  </span>term<span class="w"> </span><span class="nv">P</span><span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 201</span><span class="w">  </span>prove<span class="w"> </span>(exists<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="nv">TACTICS</span><span class="kd">,</span>
<span class="linenos"> 202</span><span class="w">  </span>callback_proved<span class="w"> </span>existence_condition<span class="w"> </span>(exists<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span><span class="nv">TACTICS</span><span class="kd">,</span>
<span class="linenos"> 203</span><span class="w">  </span><span class="nv">REPTYP</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(<span class="nv">TYPE</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 204</span><span class="w">  </span><span class="nv">ABSTYP</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">TYPE</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 205</span><span class="w">  </span><span class="nv">ABSREPTYP</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(forall<span class="w"> </span>##<span class="w"> </span><span class="nv">TYPE</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">TYPE</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">TYPE</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">ABS</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">REP</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">))</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 206</span><span class="w">  </span><span class="nv">REPABSTYP</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(forall<span class="w"> </span>##<span class="w"> </span><span class="nv">X</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">X</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>impl<span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">X</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">REP</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">ABS</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">))</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">))</span><span class="kd">,</span>
<span class="linenos"> 207</span><span class="w">  </span><span class="nv">PREPHTYP</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(forall<span class="w"> </span>##<span class="w"> </span><span class="nv">TYPE</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">TYPE</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">REP</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">)))</span><span class="kd">,</span>
<span class="linenos"> 208</span><span class="w">  </span><span class="kd">!,</span>
<span class="linenos"> 209</span><span class="w">  </span><span class="nv">HYPS</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 210</span><span class="w">   </span>(<span class="w"> </span><span class="o">(</span><span class="nv">HYPSUCHTHAT</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>typ&#39;<span class="w"> </span><span class="nv">TYPE</span><span class="o">)</span>
<span class="linenos"> 211</span><span class="w">   </span><span class="kd">,</span><span class="w"> </span><span class="o">(</span><span class="nv">HYPSUCHTHAT</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>term<span class="w"> </span><span class="nv">REP</span><span class="w"> </span><span class="nv">REPTYP</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>reterm<span class="w"> </span><span class="nv">REP</span><span class="w"> </span><span class="nv">REPTYP</span>
<span class="linenos"> 212</span><span class="w">   </span><span class="kd">,</span><span class="w"> </span><span class="o">(</span><span class="nv">HYPSUCHTHAT</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>term<span class="w"> </span><span class="nv">ABS</span><span class="w"> </span><span class="nv">ABSTYP</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>reterm<span class="w"> </span><span class="nv">ABS</span><span class="w"> </span><span class="nv">ABSTYP</span>
<span class="linenos"> 213</span><span class="w">   </span><span class="kd">,</span><span class="w"> </span>provable<span class="w"> </span><span class="nv">ABSREP</span><span class="w"> </span><span class="nv">ABSREPTYP</span>
<span class="linenos"> 214</span><span class="w">   </span><span class="kd">,</span><span class="w"> </span>provable<span class="w"> </span><span class="nv">REPABS</span><span class="w"> </span><span class="nv">REPABSTYP</span><span class="kd">,</span><span class="w"> </span>provable<span class="w"> </span><span class="nv">PREPH</span><span class="w"> </span><span class="nv">PREPHTYP</span><span class="o">).</span>
<span class="linenos"> 215</span>
<span class="linenos"> 216</span>check<span class="w"> </span><span class="nv">WHAT</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 217</span><span class="w"> </span>next_object<span class="w"> </span><span class="nv">WHAT</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">CONT</span><span class="kd">,</span>
<span class="linenos"> 218</span><span class="w"> </span>(<span class="nv">C</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>stop<span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>true<span class="w"> </span><span class="kd">;</span><span class="w"> </span>check1<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">H</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>check_hyps<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">H</span><span class="kd">,</span><span class="w"> </span>print_constraints<span class="kd">,</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span><span class="nv">H</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>check<span class="w"> </span><span class="nv">CONT</span><span class="o">))</span><span class="kd">,</span>
<span class="linenos"> 219</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">K</span><span class="o">.</span>
<span class="linenos"> 220</span>
<span class="linenos"> 221</span><span class="err">}</span>
<span class="linenos"> 222</span>
<span class="linenos"> 223</span><span class="c">/************ parsing and pretty-printing ********/</span>
<span class="linenos"> 224</span><span class="c">% ppterm/parseterm</span>
<span class="linenos"> 225</span><span class="c">%ppterm X Y :- ppp X Y. parseterm X Y :- ppp X Y.</span>
<span class="linenos"> 226</span><span class="c">%ppp X Y :- var X, var Y, !, X = Y.</span>
<span class="linenos"> 227</span><span class="c">%ppp X (F # G) :- var X, (var F ; var G), !, X = (F # G).</span>
<span class="linenos"> 228</span><span class="c">%ppp X (F # G # H) :- var X, (var F ; var G ; var H), !,</span>
<span class="linenos"> 229</span><span class="c">% X = (F # G # H).</span>
<span class="linenos"> 230</span>
<span class="linenos"> 231</span>mode<span class="w"> </span>(ppp<span class="w"> </span>o<span class="w"> </span>i<span class="o">)</span><span class="w"> </span>xas<span class="w"> </span>ppterm<span class="kd">,</span><span class="w"> </span>(ppp<span class="w"> </span>i<span class="w"> </span>o<span class="o">)</span><span class="w"> </span>xas<span class="w"> </span>parseterm<span class="o">.</span>
<span class="linenos"> 232</span>
<span class="linenos"> 233</span>ppp<span class="w"> </span>(<span class="kd">!</span><span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span>(forall<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">F1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>ppp<span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F1</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 234</span>ppp<span class="w"> </span>(<span class="kd">!</span><span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span>(forall<span class="w"> </span>##<span class="w"> </span><span class="nv">TY</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">F1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>ppp<span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F1</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 235</span>ppp<span class="w"> </span>(?<span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span>(exists<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">F1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>ppp<span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F1</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 236</span>ppp<span class="w"> </span>(?<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span>(exists<span class="w"> </span>##<span class="w"> </span><span class="nv">TY</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">F1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>ppp<span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F1</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 237</span>ppp<span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span><span class="nv">G2</span><span class="o">)</span><span class="w"> </span>(eq<span class="w"> </span>##<span class="w"> </span>prop<span class="w"> </span>#<span class="w"> </span><span class="nv">F1</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">F2</span><span class="w"> </span><span class="nv">F1</span><span class="kd">,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">G2</span><span class="w"> </span><span class="nv">G1</span><span class="o">.</span>
<span class="linenos"> 238</span>ppp<span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">G2</span><span class="o">)</span><span class="w"> </span>(eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">F1</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">F2</span><span class="w"> </span><span class="nv">F1</span><span class="kd">,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">G2</span><span class="w"> </span><span class="nv">G1</span><span class="o">.</span>
<span class="linenos"> 239</span>ppp<span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span><span class="nv">G2</span><span class="o">)</span><span class="w"> </span>(and<span class="w"> </span>#<span class="w"> </span><span class="nv">F1</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">F2</span><span class="w"> </span><span class="nv">F1</span><span class="kd">,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">G2</span><span class="w"> </span><span class="nv">G1</span><span class="o">.</span>
<span class="linenos"> 240</span>ppp<span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span><span class="kd">||</span><span class="w"> </span><span class="nv">G2</span><span class="o">)</span><span class="w"> </span>(or<span class="w"> </span>#<span class="w"> </span><span class="nv">F1</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">F2</span><span class="w"> </span><span class="nv">F1</span><span class="kd">,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">G2</span><span class="w"> </span><span class="nv">G1</span><span class="o">.</span>
<span class="linenos"> 241</span>ppp<span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="nv">G2</span><span class="o">)</span><span class="w"> </span>(impl<span class="w"> </span>#<span class="w"> </span><span class="nv">F1</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">F2</span><span class="w"> </span><span class="nv">F1</span><span class="kd">,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">G2</span><span class="w"> </span><span class="nv">G1</span><span class="o">.</span>
<span class="linenos"> 242</span>ppp<span class="w"> </span>(<span class="nv">X2</span><span class="w"> </span>#in<span class="w"> </span><span class="nv">S2</span><span class="o">)</span><span class="w"> </span>(in<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">X1</span><span class="w"> </span>#<span class="w"> </span><span class="nv">S1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">X1</span><span class="kd">,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">S2</span><span class="w"> </span><span class="nv">S1</span><span class="o">.</span>
<span class="linenos"> 243</span>ppp<span class="w"> </span>(<span class="nv">U2</span><span class="w"> </span><span class="kd">&lt;&lt;=</span><span class="w"> </span><span class="nv">V2</span><span class="o">)</span><span class="w"> </span>(subseteq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">U1</span><span class="w"> </span>#<span class="w"> </span><span class="nv">V1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">U2</span><span class="w"> </span><span class="nv">U1</span><span class="kd">,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">V2</span><span class="w"> </span><span class="nv">V1</span><span class="o">.</span>
<span class="linenos"> 244</span>ppp<span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="nv">G2</span><span class="o">)</span><span class="w"> </span>(plus<span class="w"> </span>#<span class="w"> </span><span class="nv">F1</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">F2</span><span class="w"> </span><span class="nv">F1</span><span class="kd">,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">G2</span><span class="w"> </span><span class="nv">G1</span><span class="o">.</span>
<span class="linenos"> 245</span>ppp<span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G2</span><span class="o">)</span><span class="w"> </span>(<span class="nv">F1</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">F2</span><span class="w"> </span><span class="nv">F1</span><span class="kd">,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">G2</span><span class="w"> </span><span class="nv">G1</span><span class="o">.</span>
<span class="linenos"> 246</span>ppp<span class="w"> </span>(lam<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">F1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>ppp<span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F1</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 247</span>ppp<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos"> 248</span>
<span class="linenos"> 249</span><span class="c">/* safe_list_map that unifies the two lists if they are both flexible</span>
<span class="linenos"> 250</span><span class="w">   </span>probably<span class="w"> </span>only<span class="w"> </span>useful<span class="w"> </span>for<span class="w"> </span>parsing/pretty-printing<span class="w"> </span><span class="kd">*/</span>
<span class="linenos"> 251</span>safe_list_map<span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">L2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>var<span class="w"> </span><span class="nv">L1</span><span class="kd">,</span><span class="w"> </span>var<span class="w"> </span><span class="nv">L2</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">L2</span><span class="o">.</span>
<span class="linenos"> 252</span>safe_list_map<span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">L2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>list_map<span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">L2</span><span class="o">.</span>
<span class="linenos"> 253</span>
<span class="linenos"> 254</span><span class="c">% pptac(ppterm)/parsetac(parseterm)</span>
<span class="linenos"> 255</span><span class="c">% pptac X Y :- ppptac X Y.  parsetac X Y :- ppptac X Y.</span>
<span class="linenos"> 256</span>
<span class="linenos"> 257</span>mode<span class="w"> </span>(ppptac<span class="w"> </span>i<span class="w"> </span>o<span class="o">)</span><span class="w"> </span>xas<span class="w"> </span>parsetac(ppp<span class="w"> </span><span class="kd">-&gt;</span><span class="w"> </span>parseterm<span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 258</span><span class="w">     </span>(ppptac<span class="w"> </span>o<span class="w"> </span>i<span class="o">)</span><span class="w"> </span>xas<span class="w"> </span>pptac(ppp<span class="w"> </span><span class="kd">-&gt;</span><span class="w"> </span>ppterm<span class="o">).</span>
<span class="linenos"> 259</span>
<span class="linenos"> 260</span>ppptac<span class="w"> </span>daemon<span class="w"> </span>daemon<span class="o">.</span>
<span class="linenos"> 261</span>ppptac<span class="w"> </span>r<span class="w"> </span>r<span class="o">.</span>
<span class="linenos"> 262</span>ppptac<span class="w"> </span>(t<span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(t<span class="w"> </span><span class="nv">PY</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">PY</span><span class="o">.</span>
<span class="linenos"> 263</span>ppptac<span class="w"> </span>(m<span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(m<span class="w"> </span><span class="nv">PY</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">PY</span><span class="o">.</span>
<span class="linenos"> 264</span>ppptac<span class="w"> </span>b<span class="w"> </span>b<span class="o">.</span>
<span class="linenos"> 265</span>ppptac<span class="w"> </span>c<span class="w"> </span>c<span class="o">.</span>
<span class="linenos"> 266</span>ppptac<span class="w"> </span>k<span class="w"> </span>k<span class="o">.</span>
<span class="linenos"> 267</span>ppptac<span class="w"> </span>s<span class="w"> </span>s<span class="o">.</span>
<span class="linenos"> 268</span>ppptac<span class="w"> </span>(h<span class="w"> </span><span class="nv">Gamma</span><span class="o">)</span><span class="w"> </span>(h<span class="w"> </span><span class="nv">PGamma</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>safe_list_map<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">PGamma</span><span class="o">.</span>
<span class="linenos"> 269</span>ppptac<span class="w"> </span>d<span class="w"> </span>d<span class="o">.</span>
<span class="linenos"> 270</span>ppptac<span class="w"> </span>(th<span class="w"> </span><span class="nv">NAME</span><span class="o">)</span><span class="w"> </span>(th<span class="w"> </span><span class="nv">NAME</span><span class="o">).</span>
<span class="linenos"> 271</span>ppptac<span class="w"> </span>(thenll<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">TACN</span><span class="o">)</span><span class="w"> </span>(thenll<span class="w"> </span><span class="nv">PTAC1</span><span class="w"> </span><span class="nv">PTACN</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 272</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">PTAC1</span><span class="kd">,</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TACN</span><span class="w"> </span><span class="nv">PTACN</span><span class="o">.</span>
<span class="linenos"> 273</span>ppptac<span class="w"> </span>(<span class="kd">!</span><span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span>(<span class="kd">!</span><span class="w"> </span><span class="nv">PTAC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">PTAC</span><span class="o">.</span>
<span class="linenos"> 274</span>ppptac<span class="w"> </span>id<span class="w"> </span>id<span class="o">.</span>
<span class="linenos"> 275</span>ppptac<span class="w"> </span>(wl<span class="w"> </span><span class="nv">Gamma</span><span class="o">)</span><span class="w"> </span>(wl<span class="w"> </span><span class="nv">PGamma</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>safe_list_map<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">PGamma</span><span class="o">.</span>
<span class="linenos"> 276</span>ppptac<span class="w"> </span>(bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span>(bind<span class="w"> </span><span class="nv">PA</span><span class="w"> </span><span class="nv">PTAC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 277</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">PA</span><span class="kd">,</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>ppptac<span class="w"> </span>(<span class="nv">TAC</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">PTAC</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 278</span>ppptac<span class="w"> </span>ww<span class="w"> </span>ww<span class="o">.</span>
<span class="linenos"> 279</span>
<span class="linenos"> 280</span><span class="c">/************ interactive and non interactive loops ********/</span>
<span class="linenos"> 281</span>
<span class="linenos"> 282</span>ppptac<span class="w"> </span>interactive<span class="w"> </span>interactive<span class="o">.</span>
<span class="linenos"> 283</span>
<span class="linenos"> 284</span>parse_obj<span class="w"> </span>(theorem<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">PSTTAC</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>theorem<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">STTAC</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 285</span><span class="w"> </span>parse_thm<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">PSTTAC</span><span class="w"> </span><span class="nv">STTAC</span><span class="o">.</span>
<span class="linenos"> 286</span>parse_obj<span class="w"> </span>(axiom<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">PTYP</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>axiom<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">TYP</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>parse_axiom<span class="w"> </span><span class="nv">PTYP</span><span class="w"> </span><span class="nv">TYP</span><span class="o">.</span>
<span class="linenos"> 287</span>parse_obj<span class="w"> </span>(new_basic_type<span class="w"> </span><span class="nv">TYPE</span><span class="w"> </span><span class="nv">REP</span><span class="w"> </span><span class="nv">ABS</span><span class="w"> </span><span class="nv">REPABS</span><span class="w"> </span><span class="nv">ABSREP</span><span class="w"> </span><span class="nv">PREP</span><span class="w"> </span><span class="nv">PP_TACTICS</span><span class="o">)</span>
<span class="linenos"> 288</span><span class="w"> </span><span class="kd">[</span>new_basic_type<span class="w"> </span><span class="nv">TYPE</span><span class="w"> </span><span class="nv">REP</span><span class="w"> </span><span class="nv">ABS</span><span class="w"> </span><span class="nv">REPABS</span><span class="w"> </span><span class="nv">ABSREP</span><span class="w"> </span><span class="nv">PREP</span><span class="w"> </span><span class="nv">P_TACTICS</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>parse_nbt<span class="w"> </span><span class="nv">PP_TACTICS</span><span class="w"> </span><span class="nv">P_TACTICS</span><span class="o">.</span>
<span class="linenos"> 289</span>parse_obj<span class="w"> </span>(def<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">PTYBO</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>def<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">TYBO</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>parse_def<span class="w"> </span><span class="nv">PTYBO</span><span class="w"> </span><span class="nv">TYBO</span><span class="o">.</span>
<span class="linenos"> 290</span>parse_obj<span class="w"> </span>(decl<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">TY</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>decl<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">TY</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 291</span>parse_obj<span class="w"> </span>(inductive_def<span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">PREDF_MON</span><span class="w"> </span><span class="nv">PRED_I</span><span class="w"> </span><span class="nv">PRED_E0</span><span class="w"> </span><span class="nv">PRED_E</span><span class="w"> </span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 292</span><span class="w"> </span>inductive_def_pkg<span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">PREDF_MON</span><span class="w"> </span><span class="nv">PRED_I</span><span class="w"> </span><span class="nv">PRED_E0</span><span class="w"> </span><span class="nv">PRED_E</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">EXP</span><span class="o">.</span>
<span class="linenos"> 293</span>parse_obj<span class="w"> </span>stop<span class="w"> </span><span class="kd">[</span>stop<span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 294</span>
<span class="linenos"> 295</span>parse_def<span class="w"> </span>(pi<span class="w"> </span><span class="nv">I</span><span class="o">)</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">O</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>parse_def<span class="w"> </span>(<span class="nv">I</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">O</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 296</span>parse_def<span class="w"> </span>(<span class="nv">TY</span><span class="kd">,</span><span class="nv">PB</span><span class="o">)</span><span class="w"> </span>(<span class="nv">TY</span><span class="kd">,</span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>parseterm<span class="w"> </span><span class="nv">PB</span><span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos"> 297</span>
<span class="linenos"> 298</span>parse_axiom<span class="w"> </span>(pi<span class="w"> </span><span class="nv">I</span><span class="o">)</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">O</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>parse_axiom<span class="w"> </span>(<span class="nv">I</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">O</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 299</span>parse_axiom<span class="w"> </span><span class="nv">PST</span><span class="w"> </span><span class="nv">ST</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>parseterm<span class="w"> </span><span class="nv">PST</span><span class="w"> </span><span class="nv">ST</span><span class="o">.</span>
<span class="linenos"> 300</span>
<span class="linenos"> 301</span>parse_thm<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">I</span><span class="o">)</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">O</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>parse_thm<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span>(<span class="nv">I</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">O</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 302</span>parse_thm<span class="w"> </span><span class="nv">_</span><span class="w"> </span>(<span class="nv">PST</span><span class="kd">,</span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span>(<span class="nv">ST</span><span class="kd">,</span><span class="o">(</span>false<span class="kd">,</span><span class="nv">TAC</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>parseterm<span class="w"> </span><span class="nv">PST</span><span class="w"> </span><span class="nv">ST</span><span class="o">.</span>
<span class="linenos"> 303</span>parse_thm<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">PST</span><span class="w"> </span>(<span class="nv">ST</span><span class="kd">,</span><span class="o">(</span>true<span class="kd">,[</span><span class="nv">_</span><span class="kd">]</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 304</span><span class="w"> </span>(not<span class="w"> </span><span class="o">(</span>proves<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;Error:&quot;</span><span class="w"> </span><span class="nv">NAME</span><span class="w"> </span>already<span class="w"> </span>defined<span class="kd">,</span><span class="w"> </span>fail<span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 305</span><span class="w"> </span>parseterm<span class="w"> </span><span class="nv">PST</span><span class="w"> </span><span class="nv">ST</span><span class="o">.</span>
<span class="linenos"> 306</span>
<span class="linenos"> 307</span>parse_nbt<span class="w"> </span>(pi<span class="w"> </span><span class="nv">I</span><span class="o">)</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">O</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>parse_nbt<span class="w"> </span>(<span class="nv">I</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">O</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 308</span>parse_nbt<span class="w"> </span>(<span class="nv">PP</span><span class="kd">,</span><span class="nv">TACTICS</span><span class="o">)</span><span class="w"> </span>(<span class="nv">P</span><span class="kd">,</span><span class="o">(</span>false<span class="kd">,</span><span class="nv">TACTICS</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>parseterm<span class="w"> </span><span class="nv">PP</span><span class="w"> </span><span class="nv">P</span><span class="o">.</span>
<span class="linenos"> 309</span>parse_nbt<span class="w"> </span><span class="nv">PP</span><span class="w"> </span>(<span class="nv">P</span><span class="kd">,</span><span class="o">(</span>true<span class="kd">,[</span><span class="nv">_</span><span class="kd">]</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>parseterm<span class="w"> </span><span class="nv">PP</span><span class="w"> </span><span class="nv">P</span><span class="o">.</span>
<span class="linenos"> 310</span>
<span class="linenos"> 311</span>next_object<span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">NEXT</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="nv">CT</span><span class="w"> </span><span class="nv">CONTNEXT</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 312</span><span class="w">  </span>parse_obj<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">CT</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">CONT</span><span class="w"> </span><span class="kd">],</span><span class="w"> </span>append<span class="w"> </span><span class="nv">CONT</span><span class="w"> </span><span class="nv">NEXT</span><span class="w"> </span><span class="nv">CONTNEXT</span><span class="o">.</span>
<span class="linenos"> 313</span>next_object<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">CONT</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>
<span class="linenos"> 314</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;Welcome to HOL extra-light&quot;</span><span class="kd">,</span>
<span class="linenos"> 315</span><span class="w"> </span>toplevel_loop<span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">CONT</span><span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 316</span>next_object<span class="w"> </span>toplevel<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">CONT</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>toplevel_loop<span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">CONT</span><span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 317</span>
<span class="linenos"> 318</span>read_cmd<span class="w"> </span><span class="nv">H</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 319</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;Enter a command or \&quot;</span>stop<span class="o">.</span><span class="err">\</span><span class="s2">&quot;&quot;</span><span class="kd">,</span>
<span class="linenos"> 320</span><span class="w"> </span>flush<span class="w"> </span>std_out<span class="kd">,</span><span class="w"> </span><span class="err">$</span>readterm<span class="w"> </span>std_in<span class="w"> </span><span class="nv">H</span><span class="kd">,</span>
<span class="linenos"> 321</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 322</span>read_cmd<span class="w"> </span><span class="nv">H</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>read_cmd<span class="w"> </span><span class="nv">H</span><span class="o">.</span>
<span class="linenos"> 323</span>
<span class="linenos"> 324</span>toplevel_loop<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 325</span><span class="w"> </span>read_cmd<span class="w"> </span><span class="nv">H</span><span class="kd">,</span>
<span class="linenos"> 326</span><span class="w"> </span>(<span class="w"> </span><span class="nv">H</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>stop<span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span>stop<span class="kd">]</span>
<span class="linenos"> 327</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>parse_obj<span class="w"> </span><span class="nv">H</span><span class="w"> </span><span class="nv">PH</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="o">(</span>append<span class="w"> </span><span class="nv">PH</span><span class="w"> </span>toplevel<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;error&quot;</span><span class="kd">,</span><span class="w"> </span>toplevel_loop<span class="w"> </span><span class="nv">G</span><span class="o">)</span>
<span class="linenos"> 328</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;bad command&quot;</span><span class="kd">,</span><span class="w"> </span>toplevel_loop<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="o">).</span>
<span class="linenos"> 329</span>
<span class="linenos"> 330</span>callback_proved<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span>(false<span class="kd">,</span><span class="nv">_</span><span class="o">).</span>
<span class="linenos"> 331</span>callback_proved<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="nv">G</span><span class="w"> </span>(true<span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 332</span><span class="w"> </span>canonical<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">CANONICALTAC</span><span class="kd">,</span>
<span class="linenos"> 333</span><span class="w"> </span>pptac<span class="w"> </span><span class="nv">PCANONICALTAC</span><span class="w"> </span><span class="nv">CANONICALTAC</span><span class="kd">,</span>
<span class="linenos"> 334</span><span class="w"> </span>ppterm<span class="w"> </span><span class="nv">PG</span><span class="w"> </span><span class="nv">G</span><span class="kd">,</span>
<span class="linenos"> 335</span><span class="w"> </span>print<span class="w"> </span>(theorem<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="o">(</span><span class="nv">PG</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">PCANONICALTAC</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="o">)).</span>
<span class="linenos"> 336</span>
<span class="linenos"> 337</span>end_of_proof<span class="w"> </span>(true<span class="kd">,</span><span class="w"> </span><span class="kd">[]</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;proof completed&quot;</span><span class="o">.</span>
<span class="linenos"> 338</span>end_of_proof<span class="w"> </span>(false<span class="kd">,</span><span class="w"> </span><span class="kd">[]</span><span class="o">).</span>
<span class="linenos"> 339</span>
<span class="linenos"> 340</span>next_tactic0<span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">OLD</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span>(true<span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 341</span><span class="w"> </span>print<span class="kd">,</span>
<span class="linenos"> 342</span><span class="w"> </span>list_iter_rev<span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">OLD</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span>print_sequent<span class="kd">,</span>
<span class="linenos"> 343</span><span class="w"> </span>read_in_context<span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="nv">BACKTRACK</span><span class="kd">,</span>
<span class="linenos"> 344</span><span class="w"> </span><span class="nv">BACKTRACK</span><span class="o">.</span>
<span class="linenos"> 345</span>next_tactic0<span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span>(true<span class="kd">,</span><span class="w"> </span><span class="nv">CERT</span><span class="o">)</span><span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 346</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;error&quot;</span><span class="kd">,</span>
<span class="linenos"> 347</span><span class="w"> </span>next_tactic<span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span>(true<span class="kd">,</span><span class="w"> </span><span class="nv">CERT</span><span class="o">)</span><span class="w"> </span><span class="nv">ITAC</span><span class="o">.</span>
<span class="linenos"> 348</span>next_tactic0<span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span>(true_then_false<span class="kd">,</span><span class="w"> </span><span class="o">(</span><span class="nv">_</span><span class="kd">,</span><span class="nv">INT_TACS</span><span class="kd">,</span><span class="nv">_</span><span class="o">))</span><span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 349</span><span class="w"> </span>next_tactic0<span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span>(true<span class="kd">,</span><span class="w"> </span><span class="nv">INT_TACS</span><span class="o">)</span><span class="w"> </span><span class="nv">ITAC</span><span class="o">.</span>
<span class="linenos"> 350</span>next_tactic0<span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span>(false<span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>interactive<span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 351</span><span class="w"> </span>next_tactic0<span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span>(true<span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="nv">ITAC</span><span class="o">.</span>
<span class="linenos"> 352</span>next_tactic0<span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">OLD</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span>(false<span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="o">.</span>
<span class="linenos"> 353</span>next_tactic0<span class="w"> </span><span class="nv">_</span><span class="w"> </span>(false<span class="kd">,</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 354</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;aborted&quot;</span><span class="kd">,</span>
<span class="linenos"> 355</span><span class="w"> </span>halt<span class="o">.</span>
<span class="linenos"> 356</span>
<span class="linenos"> 357</span>next_tactic<span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span><span class="nv">CERT</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>next_tactic0<span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span><span class="nv">CERT</span><span class="w"> </span><span class="nv">PTAC</span><span class="kd">,</span><span class="w"> </span>parsetac<span class="w"> </span><span class="nv">PTAC</span><span class="w"> </span><span class="nv">TAC</span><span class="o">.</span>
<span class="linenos"> 358</span>
<span class="linenos"> 359</span>update_certificate<span class="w"> </span>(true<span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">OTHER_TACS</span><span class="w"> </span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="nv">NEW</span><span class="w"> </span>(true<span class="kd">,</span><span class="w"> </span><span class="nv">TACS</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 360</span><span class="w"> </span>mk_script<span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="nv">NEW</span><span class="w"> </span><span class="nv">NEW_TACS</span><span class="w"> </span><span class="nv">TAC</span><span class="kd">,</span>
<span class="linenos"> 361</span><span class="w"> </span>append<span class="w"> </span><span class="nv">NEW_TACS</span><span class="w"> </span><span class="nv">OTHER_TACS</span><span class="w"> </span><span class="nv">TACS</span><span class="o">.</span>
<span class="linenos"> 362</span>update_certificate<span class="w"> </span>(false<span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>interactive<span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">NON_INTERACTIVE_TACS</span><span class="w"> </span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="nv">NEW</span><span class="w"> </span><span class="nv">CERTIFICATE</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 363</span><span class="w"> </span>update_certificate<span class="w"> </span>(true_then_false<span class="kd">,</span><span class="w"> </span><span class="o">(</span><span class="nv">SCRIPT</span><span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">SCRIPT</span><span class="w"> </span><span class="kd">],</span><span class="w"> </span><span class="nv">NON_INTERACTIVE_TACS</span><span class="o">))</span><span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="nv">NEW</span><span class="w"> </span><span class="nv">CERTIFICATE</span><span class="o">.</span>
<span class="linenos"> 364</span>update_certificate<span class="w"> </span>(true_then_false<span class="kd">,</span><span class="w"> </span><span class="o">(</span><span class="nv">SCRIPT</span><span class="kd">,[</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">OTHER_TACS</span><span class="w"> </span><span class="kd">],</span><span class="nv">NON_INTERACTIVE_TACS</span><span class="o">))</span><span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="nv">NEW</span><span class="w"> </span><span class="nv">CERTIFICATE</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 365</span><span class="w"> </span>mk_script<span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="nv">NEW</span><span class="w"> </span><span class="nv">NEW_INTERACTIVE_TACS</span><span class="w"> </span><span class="nv">TAC</span><span class="kd">,</span>
<span class="linenos"> 366</span><span class="w"> </span>append<span class="w"> </span><span class="nv">NEW_INTERACTIVE_TACS</span><span class="w"> </span><span class="nv">OTHER_TACS</span><span class="w"> </span><span class="nv">INTERACTIVE_TACS</span><span class="kd">,</span>
<span class="linenos"> 367</span><span class="w"> </span>(<span class="w"> </span><span class="nv">INTERACTIVE_TACS</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">],</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 368</span><span class="w">   </span><span class="nv">CERTIFICATE</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 369</span><span class="w">    </span><span class="o">(</span>true_then_false<span class="kd">,</span><span class="w"> </span><span class="o">(</span><span class="nv">SCRIPT</span><span class="kd">,</span><span class="nv">INTERACTIVE_TACS</span><span class="kd">,</span><span class="nv">NON_INTERACTIVE_TACS</span><span class="o">))</span>
<span class="linenos"> 370</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span><span class="nv">CERTIFICATE</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span>false<span class="kd">,</span><span class="w"> </span><span class="nv">NON_INTERACTIVE_TACS</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 371</span><span class="w">   </span>print<span class="w"> </span><span class="s2">&quot;INTERACTIVE SUBPROOF COMPLETED&quot;</span><span class="kd">,</span>
<span class="linenos"> 372</span><span class="w">   </span>canonical<span class="w"> </span><span class="nv">SCRIPT</span><span class="w"> </span><span class="nv">CSCRIPT</span><span class="kd">,</span>
<span class="linenos"> 373</span><span class="w">   </span>pptac<span class="w"> </span><span class="nv">PSCRIPT</span><span class="w"> </span><span class="nv">CSCRIPT</span><span class="kd">,</span>
<span class="linenos"> 374</span><span class="w">   </span>print<span class="w"> </span><span class="nv">PSCRIPT</span><span class="o">).</span>
<span class="linenos"> 375</span>update_certificate<span class="w"> </span>(false<span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">OTHER_TACS</span><span class="w"> </span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span>(false<span class="kd">,</span><span class="w"> </span><span class="nv">OTHER_TACS</span><span class="o">).</span>
<span class="linenos"> 376</span>
<span class="linenos"> 377</span>mk_script<span class="w"> </span>(bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">NEW</span><span class="w"> </span><span class="nv">NEW_TACS</span><span class="w"> </span>(bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">T2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 378</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\
<span class="linenos"> 379</span><span class="w">  </span>put_binds<span class="w"> </span>(<span class="nv">NEW2</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>x<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">NEW</span><span class="kd">,</span>
<span class="linenos"> 380</span><span class="w">  </span>mk_script<span class="w"> </span>(<span class="nv">T</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">NEW2</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">NEWT</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">T2</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 381</span><span class="w">  </span>put_binds<span class="w"> </span>(<span class="nv">NEWT</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>x<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">NEW_TACS</span><span class="o">.</span>
<span class="linenos"> 382</span>mk_script<span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="nv">NEW</span><span class="w"> </span><span class="nv">NEW_TACS</span><span class="w"> </span>(thenl<span class="w"> </span><span class="nv">ITAC</span><span class="w"> </span><span class="nv">NEW_TACS</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 383</span><span class="w"> </span>mk_list_of_bounded_fresh<span class="w"> </span><span class="nv">NEW</span><span class="w"> </span><span class="nv">NEW_TACS</span><span class="o">.</span>
<span class="linenos"> 384</span>
<span class="linenos"> 385</span>read_in_context<span class="w"> </span>(bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">K</span><span class="o">)</span><span class="w"> </span>(bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span><span class="nv">BACKTRACK</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 386</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span><span class="c">/* term x A =&gt; reterm # x A =&gt; */</span><span class="w"> </span>read_in_context<span class="w"> </span>(<span class="nv">K</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">TAC</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">BACKTRACK</span><span class="o">.</span>
<span class="linenos"> 387</span>read_in_context<span class="w"> </span>(seq<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">BACKTRACK</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 388</span><span class="w"> </span>flush<span class="w"> </span>std_out<span class="kd">,</span><span class="w"> </span><span class="err">$</span>readterm<span class="w"> </span>std_in<span class="w"> </span><span class="nv">TAC</span><span class="kd">,</span>
<span class="linenos"> 389</span><span class="w"> </span>(<span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>backtrack<span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">BACKTRACK</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span><span class="kd">!,</span><span class="w"> </span>fail<span class="o">)</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span><span class="nv">BACKTRACK</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>true<span class="o">).</span>
<span class="linenos"> 390</span>
<span class="linenos"> 391</span>print_sequent<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 392</span><span class="w"> </span>print<span class="kd">,</span>
<span class="linenos"> 393</span><span class="w"> </span>list_iter_rev<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">PX </span>\<span class="w"> </span>ppterm<span class="w"> </span><span class="nv">PX</span><span class="w"> </span>x<span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">PX</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 394</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;|------------------&quot;</span><span class="kd">,</span>
<span class="linenos"> 395</span><span class="w"> </span>ppterm<span class="w"> </span><span class="nv">PG</span><span class="w"> </span><span class="nv">G</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">PG</span><span class="o">.</span>
<span class="linenos"> 396</span>print_sequent<span class="w"> </span>(bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>print_sequent<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 397</span>
<span class="linenos"> 398</span><span class="c">/* turns thenl into then */</span>
<span class="linenos"> 399</span>canonical<span class="w"> </span>(bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">T1</span><span class="o">)</span><span class="w"> </span>(bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">T2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 400</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>canonical<span class="w"> </span>(<span class="nv">T1</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">T2</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 401</span>canonical<span class="w"> </span>(thenl<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span><span class="nv">OTAC</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 402</span><span class="w"> </span>list_map<span class="w"> </span><span class="nv">L</span><span class="w"> </span>canonical<span class="w"> </span><span class="nv">L2</span><span class="kd">,</span>
<span class="linenos"> 403</span><span class="w"> </span>(mk_constant_list<span class="w"> </span><span class="nv">L2</span><span class="w"> </span><span class="nv">S</span><span class="w"> </span><span class="nv">L2</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 404</span><span class="w">  </span><span class="o">(</span><span class="nv">S</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[],</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">OTAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span><span class="nv">OTAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">S</span><span class="o">)</span>
<span class="linenos"> 405</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span><span class="nv">OTAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>thenl<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">L2</span><span class="o">).</span>
<span class="linenos"> 406</span>canonical<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span>
<span class="linenos"> 407</span>
<span class="linenos"> 408</span><span class="c">/************ inductive_def package ********/</span>
<span class="linenos"> 409</span>parse_inductive_def_spec<span class="w"> </span>(pi<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">PF</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 410</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span>parse_inductive_def_spec<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="nv">PF</span><span class="w"> </span><span class="nv">A</span><span class="o">).</span>
<span class="linenos"> 411</span>parse_inductive_def_spec<span class="w"> </span>(param<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(param<span class="w"> </span><span class="nv">PTY</span><span class="w"> </span><span class="nv">PF</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 412</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">PTY</span><span class="kd">,</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>parse_inductive_def_spec<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">PF</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 413</span>parse_inductive_def_spec<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">PL</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 414</span><span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">p </span>\<span class="w"> </span>list_map<span class="w"> </span><span class="o">(</span><span class="nv">L</span><span class="w"> </span>p<span class="o">)</span>
<span class="linenos"> 415</span><span class="w">  </span><span class="o">(</span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>px<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">PB </span>\<span class="w"> </span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>parseterm<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">PB</span><span class="kd">,</span><span class="w"> </span>px<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span><span class="nv">PB</span><span class="o">))</span>
<span class="linenos"> 416</span><span class="w">  </span><span class="o">(</span><span class="nv">PL</span><span class="w"> </span>p<span class="o">)).</span>
<span class="linenos"> 417</span>
<span class="linenos"> 418</span>build_quantified_predicate<span class="w"> </span>(pi<span class="w"> </span><span class="nv">I</span><span class="o">)</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">O</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 419</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span>build_quantified_predicate<span class="w"> </span>(<span class="nv">I</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="nv">O</span><span class="w"> </span><span class="nv">A</span><span class="o">).</span>
<span class="linenos"> 420</span>build_quantified_predicate<span class="w"> </span>(param<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">I</span><span class="o">)</span><span class="w"> </span>(<span class="nv">TY</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">TYP</span><span class="kd">,</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">BO</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 421</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>build_quantified_predicate<span class="w"> </span>(<span class="nv">I</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">TYP</span><span class="kd">,</span><span class="w"> </span><span class="nv">BO</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 422</span>build_quantified_predicate<span class="w"> </span><span class="nv">L</span><span class="w"> </span>(<span class="nv">_</span><span class="kd">,</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span>p<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 423</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">p </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>build_predicate<span class="w"> </span>(<span class="nv">L</span><span class="w"> </span>p<span class="o">)</span><span class="w"> </span>p<span class="w"> </span>x<span class="w"> </span>(<span class="nv">P</span><span class="w"> </span>p<span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 424</span>
<span class="linenos"> 425</span>build_predicate<span class="w"> </span><span class="kd">[</span><span class="w"> </span>(<span class="nv">_</span><span class="kd">,</span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 426</span><span class="w"> </span>process_constructor<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">R</span><span class="o">.</span>
<span class="linenos"> 427</span>build_predicate<span class="w"> </span><span class="kd">[</span><span class="w"> </span>(<span class="nv">_</span><span class="kd">,</span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">REST</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>(or<span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="w"> </span>#<span class="w"> </span><span class="nv">R</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 428</span><span class="w"> </span>process_constructor<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Q</span><span class="kd">,</span>
<span class="linenos"> 429</span><span class="w"> </span>build_predicate<span class="w"> </span><span class="nv">REST</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">R</span><span class="o">.</span>
<span class="linenos"> 430</span>
<span class="linenos"> 431</span>process_constructor<span class="w"> </span>(forall<span class="w"> </span>##<span class="w"> </span><span class="nv">TY</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>(exists<span class="w"> </span>##<span class="w"> </span><span class="nv">TY</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">R</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 432</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y </span>\<span class="w"> </span>process_constructor<span class="w"> </span>(<span class="nv">Q</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>(<span class="nv">R</span><span class="w"> </span>y<span class="o">).</span>
<span class="linenos"> 433</span>process_constructor<span class="w"> </span>(impl<span class="w"> </span>#<span class="w"> </span><span class="nv">H</span><span class="w"> </span>#<span class="w"> </span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>(and<span class="w"> </span>#<span class="w"> </span><span class="nv">H</span><span class="w"> </span>#<span class="w"> </span><span class="nv">R</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 434</span><span class="w"> </span>process_constructor<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">R</span><span class="o">.</span>
<span class="linenos"> 435</span>process_constructor<span class="w"> </span>(<span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>(eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">X</span><span class="w"> </span>#<span class="w"> </span><span class="nv">T</span><span class="o">).</span>
<span class="linenos"> 436</span>
<span class="linenos"> 437</span>prove_monotonicity_thm<span class="w"> </span>(pi<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">APREDF</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">THM</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 438</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span>prove_monotonicity_thm<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span>(<span class="nv">APREDF</span><span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="nv">THM</span><span class="w"> </span><span class="nv">A</span><span class="o">).</span>
<span class="linenos"> 439</span>prove_monotonicity_thm<span class="w"> </span>(param<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">APREDF</span><span class="w"> </span>(forall<span class="w"> </span>##<span class="w"> </span><span class="nv">TY</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">STM</span><span class="kd">,</span><span class="w"> </span><span class="nv">PROOF</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 440</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>prove_monotonicity_thm<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span>(<span class="nv">APREDF</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">STM</span><span class="w"> </span>x<span class="kd">,</span><span class="w"> </span><span class="nv">PROOF</span><span class="o">).</span>
<span class="linenos"> 441</span>prove_monotonicity_thm<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">APREDF</span><span class="w"> </span><span class="nv">THM</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 442</span><span class="w"> </span><span class="nv">THM</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 443</span><span class="w">  </span>(monotone<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">APREDF</span><span class="kd">,</span>
<span class="linenos"> 444</span><span class="w">   </span><span class="kd">[</span><span class="w"> </span>then<span class="w"> </span>inv<span class="w"> </span><span class="o">(</span>bind*<span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span><span class="nv">PREDF</span><span class="kd">]</span><span class="o">)))</span><span class="w"> </span>auto_monotone<span class="o">))</span><span class="w"> </span><span class="kd">]</span><span class="o">).</span>
<span class="linenos"> 445</span>
<span class="linenos"> 446</span>state_fixpoint_def<span class="w"> </span>(pi<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">DEF</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 447</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span>state_fixpoint_def<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="nv">PREDF</span><span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="nv">DEF</span><span class="w"> </span><span class="nv">A</span><span class="o">).</span>
<span class="linenos"> 448</span>state_fixpoint_def<span class="w"> </span>(param<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span>(<span class="nv">_</span><span class="kd">,</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">BO</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 449</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>state_fixpoint_def<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">PREDF</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">_</span><span class="kd">,</span><span class="w"> </span><span class="nv">BO</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 450</span>state_fixpoint_def<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span>(<span class="nv">_</span><span class="kd">,</span><span class="w"> </span>fixpoint<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">PREDF</span><span class="o">).</span>
<span class="linenos"> 451</span>
<span class="linenos"> 452</span>prove_fix_intro_thm<span class="w"> </span>(pi<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">PREDF_MONOTONE</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">THM</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 453</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span>prove_fix_intro_thm<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="nv">PREDF</span><span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="nv">PRED</span><span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="nv">PREDF_MONOTONE</span><span class="w"> </span>(<span class="nv">THM</span><span class="w"> </span><span class="nv">A</span><span class="o">).</span>
<span class="linenos"> 454</span>prove_fix_intro_thm<span class="w"> </span>(param<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">PREDF_MONOTONE</span><span class="w"> </span>(forall<span class="w"> </span>##<span class="w"> </span><span class="nv">TY</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">STM</span><span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">PROOF</span><span class="o">)</span><span class="w"> </span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 455</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>prove_fix_intro_thm<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">PREDF</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">PRED</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">PREDF_MONOTONE</span><span class="w"> </span>(<span class="nv">STM</span><span class="w"> </span>x<span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">PROOF</span><span class="w"> </span>x<span class="w"> </span><span class="kd">]</span><span class="o">).</span>
<span class="linenos"> 456</span>prove_fix_intro_thm<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">PREDF_MONOTONE</span><span class="w"> </span><span class="nv">THM</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 457</span><span class="w"> </span><span class="nv">THM</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 458</span><span class="w">  </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span>#<span class="w"> </span><span class="nv">PRED</span><span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="nv">PRED</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 459</span><span class="w">   </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos"> 460</span><span class="w">     </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x13<span class="w"> </span><span class="err">\</span>
<span class="linenos"> 461</span><span class="w">       </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span><span class="o">(</span>rator_tac<span class="w"> </span>dd<span class="o">)))</span>
<span class="linenos"> 462</span><span class="w">        </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>rator_tac<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span>dd<span class="o">))))</span>
<span class="linenos"> 463</span><span class="w">          </span><span class="o">(</span>then<span class="w"> </span>inv
<span class="linenos"> 464</span><span class="w">            </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>fixpoint_is_prefixpoint<span class="o">)</span>
<span class="linenos"> 465</span><span class="w">              </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span><span class="nv">PREDF</span><span class="o">)</span>
<span class="linenos"> 466</span><span class="w">                </span><span class="o">(</span>thenl<span class="w"> </span>lapply<span class="w"> </span><span class="kd">[</span>applyth<span class="w"> </span><span class="nv">PREDF_MONOTONE</span><span class="kd">,</span>
<span class="linenos"> 467</span><span class="w">                  </span>then
<span class="linenos"> 468</span><span class="w">                   </span><span class="o">(</span>g
<span class="linenos"> 469</span><span class="w">                     </span><span class="o">(</span>subseteq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>&#39;
<span class="linenos"> 470</span><span class="w">                       </span><span class="o">(</span><span class="nv">PREDF</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>fixpoint<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">PREDF</span><span class="o">))</span><span class="w"> </span>&#39;
<span class="linenos"> 471</span><span class="w">                       </span><span class="o">(</span>fixpoint<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">PREDF</span><span class="o">)))</span>
<span class="linenos"> 472</span><span class="w">                   </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>subseteq<span class="kd">]</span><span class="o">)))</span>
<span class="linenos"> 473</span><span class="w">                     </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>in<span class="kd">]</span><span class="o">)))</span>
<span class="linenos"> 474</span><span class="w">                       </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>in<span class="kd">]</span><span class="o">)))(</span>itaut<span class="w"> </span><span class="mi">4</span><span class="o">))))</span><span class="kd">]</span><span class="o">))))))</span><span class="kd">]</span><span class="o">).</span>
<span class="linenos"> 475</span>
<span class="linenos"> 476</span>prove_fix_elim_thm<span class="w"> </span>(pi<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">OPRED</span><span class="w"> </span>(pi<span class="w"> </span><span class="nv">THM</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 477</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span>prove_fix_elim_thm<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="nv">PREDF</span><span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="nv">PRED</span><span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="nv">OPRED</span><span class="w"> </span>(<span class="nv">THM</span><span class="w"> </span><span class="nv">A</span><span class="o">).</span>
<span class="linenos"> 478</span>prove_fix_elim_thm<span class="w"> </span>(param<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">OPRED</span><span class="w"> </span>(forall<span class="w"> </span>##<span class="w"> </span><span class="nv">TY</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">STM</span><span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">PROOF</span><span class="o">)</span><span class="w"> </span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 479</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\<span class="w"> </span>prove_fix_elim_thm<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">PREDF</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">PRED</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">OPRED</span><span class="w"> </span>(<span class="nv">STM</span><span class="w"> </span>x<span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">PROOF</span><span class="w"> </span>x<span class="w"> </span><span class="kd">]</span><span class="o">).</span>
<span class="linenos"> 480</span>prove_fix_elim_thm<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">OPRED</span><span class="w"> </span><span class="nv">THM</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 481</span><span class="w"> </span><span class="nv">THM</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 482</span><span class="w">  </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>x13<span class="w"> </span><span class="err">\</span>
<span class="linenos"> 483</span><span class="w">     </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span>#<span class="w"> </span>x13<span class="w"> </span>#<span class="w"> </span>x14<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x13<span class="w"> </span>#<span class="w"> </span>x14<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span>
<span class="linenos"> 484</span><span class="w">      </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">PRED</span><span class="w"> </span>#<span class="w"> </span>x14<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x13<span class="w"> </span>#<span class="w"> </span>x14<span class="o">))</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos"> 485</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos"> 486</span><span class="w">      </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x23<span class="w"> </span><span class="err">\</span>
<span class="linenos"> 487</span><span class="w">        </span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>fixpoint_subseteq_any_prefixpoint<span class="o">)</span>
<span class="linenos"> 488</span><span class="w">         </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span><span class="nv">PREDF</span><span class="o">)</span>
<span class="linenos"> 489</span><span class="w">           </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span>x23<span class="o">)</span>
<span class="linenos"> 490</span><span class="w">             </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span><span class="nv">OPRED</span><span class="kd">]</span><span class="o">)))</span>
<span class="linenos"> 491</span><span class="w">               </span><span class="o">(</span>then<span class="w"> </span>inv
<span class="linenos"> 492</span><span class="w">                 </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x24<span class="w"> </span><span class="err">\</span>
<span class="linenos"> 493</span><span class="w">                   </span>then
<span class="linenos"> 494</span><span class="w">                    </span><span class="o">(</span>g
<span class="linenos"> 495</span><span class="w">                      </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>subseteq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">PREDF</span><span class="w"> </span>#<span class="w"> </span>x23<span class="o">)</span><span class="w"> </span>#<span class="w"> </span>x23<span class="o">)</span><span class="w"> </span>&#39;
<span class="linenos"> 496</span><span class="w">                        </span><span class="o">(</span>subseteq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>fixpoint<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">PREDF</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span>x23<span class="o">)))</span>
<span class="linenos"> 497</span><span class="w">                    </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>subseteq<span class="kd">]</span><span class="o">)))</span>
<span class="linenos"> 498</span><span class="w">                      </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>subseteq<span class="kd">]</span><span class="o">)))</span>
<span class="linenos"> 499</span><span class="w">                        </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>in<span class="kd">]</span><span class="o">)))</span>
<span class="linenos"> 500</span><span class="w">                          </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>in<span class="kd">]</span><span class="o">)))</span>
<span class="linenos"> 501</span><span class="w">                            </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>in<span class="kd">]</span><span class="o">)))</span>
<span class="linenos"> 502</span><span class="w">                              </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>in<span class="kd">]</span><span class="o">)))</span>
<span class="linenos"> 503</span><span class="w">                                </span><span class="o">(</span>then
<span class="linenos"> 504</span><span class="w">                                  </span><span class="o">(</span>w
<span class="linenos"> 505</span><span class="w">                                    </span><span class="o">(</span>impl<span class="w"> </span>&#39;
<span class="linenos"> 506</span><span class="w">                                      </span><span class="o">(</span>subseteq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">PREDF</span><span class="w"> </span>#<span class="w"> </span>x23<span class="o">)</span><span class="w"> </span>#<span class="w"> </span>x23<span class="o">)</span><span class="w"> </span>&#39;
<span class="linenos"> 507</span><span class="w">                                      </span><span class="o">(</span>subseteq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>&#39;
<span class="linenos"> 508</span><span class="w">                                        </span><span class="o">(</span>fixpoint<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">PREDF</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span>x23<span class="o">)))</span>
<span class="linenos"> 509</span><span class="w">                                  </span><span class="o">(</span>then<span class="w"> </span>inv
<span class="linenos"> 510</span><span class="w">                                    </span><span class="o">(</span>thenl<span class="w"> </span>lapply_last<span class="w"> </span><span class="kd">[</span>h<span class="kd">,</span>
<span class="linenos"> 511</span><span class="w">                                      </span>then<span class="w"> </span><span class="o">(</span>lforall_last<span class="w"> </span>x24<span class="o">)</span>
<span class="linenos"> 512</span><span class="w">                                       </span><span class="o">(</span>then<span class="w"> </span>lapply_last<span class="w"> </span>h<span class="o">)</span><span class="kd">]</span><span class="o">)))))))))))))))</span><span class="kd">]</span><span class="o">).</span>
<span class="linenos"> 513</span>
<span class="linenos"> 514</span>prove_intro_thms<span class="w"> </span>(pi<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">PRED_I</span><span class="w"> </span><span class="nv">INTROTHMS</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 515</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\
<span class="linenos"> 516</span><span class="w">  </span>prove_intro_thms<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(<span class="nv">PRED</span><span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="nv">PRED_I</span><span class="w"> </span>(<span class="nv">OUT</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 517</span><span class="w">  </span>list_map<span class="w"> </span>(<span class="nv">OUT</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span>
<span class="linenos"> 518</span><span class="w">   </span>(i<span class="w"> </span><span class="err">\</span><span class="w"> </span>o<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">Y </span>\<span class="w"> </span>i<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span>theorem<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="o">(</span><span class="nv">P</span><span class="w"> </span><span class="nv">A</span><span class="o">))</span><span class="kd">,</span><span class="w"> </span>o<span class="w"> </span><span class="kd">=</span><span class="w"> </span>theorem<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="o">(</span>pi<span class="w"> </span><span class="nv">P</span><span class="o">))</span>
<span class="linenos"> 519</span><span class="w">   </span><span class="nv">INTROTHMS</span><span class="o">.</span>
<span class="linenos"> 520</span>prove_intro_thms<span class="w"> </span>(param<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">PRED_I</span><span class="w"> </span><span class="nv">INTROTHMS</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 521</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x </span>\
<span class="linenos"> 522</span><span class="w">  </span>prove_intro_thms<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">PRED</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">PRED_I</span><span class="w"> </span>(<span class="nv">OUT</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 523</span><span class="w">  </span>list_map<span class="w"> </span>(<span class="nv">OUT</span><span class="w"> </span>x<span class="o">)</span>
<span class="linenos"> 524</span><span class="w">   </span>(i<span class="w"> </span><span class="err">\</span><span class="w"> </span>o<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">Y </span>\
<span class="linenos"> 525</span><span class="w">     </span>i<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span>theorem<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="o">(</span><span class="nv">STM</span><span class="w"> </span>x<span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">PROOF</span><span class="w"> </span>x<span class="w"> </span><span class="kd">]</span><span class="o">))</span><span class="kd">,</span>
<span class="linenos"> 526</span><span class="w">     </span>o<span class="w"> </span><span class="kd">=</span><span class="w"> </span>theorem<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="o">(</span>forall<span class="w"> </span>##<span class="w"> </span><span class="nv">TY</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">STM</span><span class="kd">,</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">PROOF</span><span class="o">)</span><span class="w"> </span><span class="kd">]</span><span class="o">))</span>
<span class="linenos"> 527</span><span class="w">   </span><span class="nv">INTROTHMS</span><span class="o">.</span>
<span class="linenos"> 528</span>prove_intro_thms<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">PRED_I</span><span class="w"> </span><span class="nv">INTROTHMS</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 529</span><span class="w"> </span>list_map<span class="w"> </span>(<span class="nv">L</span><span class="w"> </span><span class="nv">PRED</span><span class="o">)</span><span class="w"> </span>(mk_intro_thm<span class="w"> </span><span class="nv">PRED_I</span><span class="o">)</span><span class="w"> </span><span class="nv">INTROTHMS</span><span class="o">.</span>
<span class="linenos"> 530</span>
<span class="linenos"> 531</span>mk_intro_thm<span class="w"> </span><span class="nv">PRED_I</span><span class="w"> </span>(<span class="nv">NAME</span><span class="kd">,</span><span class="nv">ST</span><span class="o">)</span>
<span class="linenos"> 532</span><span class="w"> </span>(theorem<span class="w"> </span><span class="nv">NAME</span><span class="w"> </span><span class="o">(</span><span class="nv">ST</span><span class="kd">,</span>
<span class="linenos"> 533</span><span class="w">   </span><span class="kd">[</span><span class="w"> </span>daemon<span class="w"> </span><span class="c">/*(then inv (bind* (then (applyth PRED_I) (then (conv dd) (itauteq 6)))))*/</span><span class="w"> </span><span class="c">/* TOO MANY GOALS DELAYED ON typ (?): USE daemon INSTEAD */</span><span class="w"> </span><span class="kd">]</span><span class="o">)).</span>
<span class="linenos"> 534</span>
<span class="linenos"> 535</span>inductive_def_pkg<span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">PREDF_MONOTONE</span><span class="w"> </span><span class="nv">PRED_I</span><span class="w"> </span><span class="nv">PRED_E0</span><span class="w"> </span><span class="nv">PRED_E</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">OUT</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 536</span><span class="w"> </span>parse_inductive_def_spec<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">PL</span><span class="kd">,</span>
<span class="linenos"> 537</span><span class="w"> </span>build_quantified_predicate<span class="w"> </span><span class="nv">PL</span><span class="w"> </span><span class="nv">F</span><span class="kd">,</span>
<span class="linenos"> 538</span><span class="w"> </span>prove_monotonicity_thm<span class="w"> </span><span class="nv">PL</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">MONTHM</span><span class="kd">,</span>
<span class="linenos"> 539</span><span class="w"> </span>state_fixpoint_def<span class="w"> </span><span class="nv">PL</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">FIXDEF</span><span class="kd">,</span>
<span class="linenos"> 540</span><span class="w"> </span>prove_fix_intro_thm<span class="w"> </span><span class="nv">PL</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">PREDF_MONOTONE</span><span class="w"> </span><span class="nv">INTROTHM</span><span class="kd">,</span>
<span class="linenos"> 541</span><span class="w"> </span>prove_intro_thms<span class="w"> </span><span class="nv">PL</span><span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">PRED_I</span><span class="w"> </span><span class="nv">INTROTHMS</span><span class="kd">,</span>
<span class="linenos"> 542</span><span class="w"> </span>prove_fix_elim_thm<span class="w"> </span><span class="nv">PL</span><span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">ELIMTHM</span><span class="kd">,</span>
<span class="linenos"> 543</span><span class="w"> </span><span class="nv">OUT1</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 544</span><span class="w">  </span><span class="kd">[</span><span class="w"> </span>def<span class="w"> </span><span class="nv">PREDF</span><span class="w"> </span><span class="nv">F</span>
<span class="linenos"> 545</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span><span class="nv">PREDF_MONOTONE</span><span class="w"> </span><span class="nv">MONTHM</span>
<span class="linenos"> 546</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span><span class="nv">PRED</span><span class="w"> </span><span class="nv">FIXDEF</span>
<span class="linenos"> 547</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span><span class="nv">PRED_I</span><span class="w"> </span><span class="nv">INTROTHM</span>
<span class="linenos"> 548</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span><span class="nv">PRED_E0</span><span class="w"> </span><span class="nv">ELIMTHM</span><span class="w"> </span><span class="kd">],</span>
<span class="linenos"> 549</span><span class="w"> </span>append<span class="w"> </span><span class="nv">OUT1</span><span class="w"> </span><span class="nv">INTROTHMS</span><span class="w"> </span><span class="nv">OUT</span><span class="o">.</span>
<span class="linenos"> 550</span>
<span class="linenos"> 551</span><span class="c">/************ library of basic data types ********/</span>
<span class="linenos"> 552</span>mk_bounded_fresh<span class="w"> </span>(bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>mk_bounded_fresh<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">G</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 553</span>mk_bounded_fresh<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos"> 554</span>
<span class="linenos"> 555</span>mk_list_of_bounded_fresh<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
<span class="linenos"> 556</span>mk_list_of_bounded_fresh<span class="w"> </span><span class="kd">[</span><span class="nv">S</span><span class="kd">|</span><span class="nv">L</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">R</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 557</span><span class="w"> </span>mk_bounded_fresh<span class="w"> </span><span class="nv">S</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>mk_list_of_bounded_fresh<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">R</span><span class="o">.</span>
<span class="linenos"> 558</span>
<span class="linenos"> 559</span><span class="c">/* list functions */</span>
<span class="linenos"> 560</span>
<span class="linenos"> 561</span>list_map<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
<span class="linenos"> 562</span>list_map<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="kd">[</span><span class="nv">Y</span><span class="kd">|</span><span class="nv">YS</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span>list_map<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">YS</span><span class="o">.</span>
<span class="linenos"> 563</span>
<span class="linenos"> 564</span>list_iter_rev<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos"> 565</span>list_iter_rev<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>list_iter_rev<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">F</span><span class="kd">,</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos"> 566</span>
<span class="linenos"> 567</span>mem<span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 568</span>mem<span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos"> 569</span>
<span class="linenos"> 570</span>mk_constant_list<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
<span class="linenos"> 571</span>mk_constant_list<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">|</span><span class="nv">L</span><span class="kd">]</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">R</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>mk_constant_list<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">R</span><span class="o">.</span>
<span class="linenos"> 572</span>
<span class="linenos"> 573</span>bang<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">P</span><span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 574</span>
<span class="linenos"> 575</span><span class="c">/********** tacticals ********/</span>
<span class="linenos"> 576</span>
<span class="linenos"> 577</span><span class="c">% BUG in runtime.ml if the sigma is uncommented out. It does not matter btw.</span>
<span class="linenos"> 578</span><span class="c">/*sigma ff \*/</span><span class="w"> </span>deftac<span class="w"> </span>fail<span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span>ff<span class="o">.</span>
<span class="linenos"> 579</span>
<span class="linenos"> 580</span>ppptac<span class="w"> </span>(constant_tacl<span class="w"> </span><span class="nv">TACL</span><span class="o">)</span><span class="w"> </span>(constant_tacl<span class="w"> </span><span class="nv">PTACL</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 581</span><span class="w"> </span>list_map<span class="w"> </span><span class="nv">TACL</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">PTACL</span><span class="o">.</span>
<span class="linenos"> 582</span>deftacl<span class="w"> </span>(constant_tacl<span class="w"> </span><span class="nv">TACL</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span><span class="nv">TACL</span><span class="o">.</span>
<span class="linenos"> 583</span>
<span class="linenos"> 584</span>ppptac<span class="w"> </span>(thenl<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">TACL</span><span class="o">)</span><span class="w"> </span>(thenl<span class="w"> </span><span class="nv">PTAC</span><span class="w"> </span><span class="nv">PTACL</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 585</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">PTAC</span><span class="kd">,</span><span class="w"> </span>list_map<span class="w"> </span><span class="nv">TACL</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">PTACL</span><span class="o">.</span><span class="w"> </span>
<span class="linenos"> 586</span>deftac<span class="w"> </span>(thenl<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">TACL</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">XTAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 587</span><span class="w"> </span><span class="nv">XTAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>thenll<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span>(constant_tacl<span class="w"> </span><span class="nv">TACL</span><span class="o">).</span>
<span class="linenos"> 588</span>
<span class="linenos"> 589</span>ppptac<span class="w"> </span>(all_equals_list<span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span>(all_equals_list<span class="w"> </span><span class="nv">PTAC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">PTAC</span><span class="o">.</span>
<span class="linenos"> 590</span>deftacl<span class="w"> </span>(all_equals_list<span class="w"> </span><span class="nv">TAC2</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span><span class="nv">TACL</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 591</span><span class="w"> </span>mk_constant_list<span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span><span class="nv">TAC2</span><span class="w"> </span><span class="nv">TACL</span><span class="o">.</span>
<span class="linenos"> 592</span>
<span class="linenos"> 593</span>ppptac<span class="w"> </span>(then<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">TAC2</span><span class="o">)</span><span class="w"> </span>(then<span class="w"> </span><span class="nv">PTAC1</span><span class="w"> </span><span class="nv">PTAC2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 594</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">PTAC1</span><span class="kd">,</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC2</span><span class="w"> </span><span class="nv">PTAC2</span><span class="o">.</span>
<span class="linenos"> 595</span>deftac<span class="w"> </span>(then<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">TAC2</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">XTAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 596</span><span class="w"> </span><span class="nv">XTAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>thenll<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span>(all_equals_list<span class="w"> </span><span class="nv">TAC2</span><span class="o">).</span>
<span class="linenos"> 597</span>
<span class="linenos"> 598</span>ppptac<span class="w"> </span>(then!<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">TAC2</span><span class="o">)</span><span class="w"> </span>(then!<span class="w"> </span><span class="nv">PTAC1</span><span class="w"> </span><span class="nv">PTAC2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 599</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">PTAC1</span><span class="kd">,</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC2</span><span class="w"> </span><span class="nv">PTAC2</span><span class="o">.</span>
<span class="linenos"> 600</span>deftac<span class="w"> </span>(then!<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">TAC2</span><span class="o">)</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span>(then<span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span><span class="nv">TAC1</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC2</span><span class="o">).</span>
<span class="linenos"> 601</span>
<span class="linenos"> 602</span>ppptac<span class="w"> </span>(orelse<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">TAC2</span><span class="o">)</span><span class="w"> </span>(orelse<span class="w"> </span><span class="nv">PTAC1</span><span class="w"> </span><span class="nv">PTAC2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 603</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">PTAC1</span><span class="kd">,</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC2</span><span class="w"> </span><span class="nv">PTAC2</span><span class="o">.</span>
<span class="linenos"> 604</span>deftac<span class="w"> </span>(orelse<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">TAC2</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">XTAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 605</span><span class="w"> </span><span class="nv">XTAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span><span class="nv">XTAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">TAC2</span><span class="o">.</span>
<span class="linenos"> 606</span>
<span class="linenos"> 607</span>ppptac<span class="w"> </span>(orelse!<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">TAC2</span><span class="o">)</span><span class="w"> </span>(orelse!<span class="w"> </span><span class="nv">PTAC1</span><span class="w"> </span><span class="nv">PTAC2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 608</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">PTAC1</span><span class="kd">,</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC2</span><span class="w"> </span><span class="nv">PTAC2</span><span class="o">.</span>
<span class="linenos"> 609</span>deftac<span class="w"> </span>(orelse!<span class="w"> </span><span class="nv">TAC1</span><span class="w"> </span><span class="nv">TAC2</span><span class="o">)</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span>(orelse<span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span><span class="nv">TAC1</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC2</span><span class="o">).</span>
<span class="linenos"> 610</span>
<span class="linenos"> 611</span>ppptac<span class="w"> </span>(bind*<span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span>(bind*<span class="w"> </span><span class="nv">PTAC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">PTAC</span><span class="o">.</span>
<span class="linenos"> 612</span>deftac<span class="w"> </span>(bind*<span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span>(orelse!<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>bind*<span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="o">).</span>
<span class="linenos"> 613</span>
<span class="linenos"> 614</span>ppptac<span class="w"> </span>(repeat<span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span>(repeat<span class="w"> </span><span class="nv">PTAC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">PTAC</span><span class="o">.</span>
<span class="linenos"> 615</span>deftac<span class="w"> </span>(repeat<span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">XTAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 616</span><span class="w"> </span>(<span class="w"> </span><span class="nv">XTAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="o">(</span>repeat<span class="w"> </span><span class="o">(</span>bind*<span class="w"> </span><span class="nv">TAC</span><span class="o">))</span>
<span class="linenos"> 617</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span><span class="nv">XTAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>id<span class="o">).</span>
<span class="linenos"> 618</span>
<span class="linenos"> 619</span>ppptac<span class="w"> </span>(repeat!<span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span>(repeat!<span class="w"> </span><span class="nv">PTAC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">PTAC</span><span class="o">.</span>
<span class="linenos"> 620</span>deftac<span class="w"> </span>(repeat!<span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span>(orelse!<span class="w"> </span><span class="o">(</span>then!<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="o">(</span>repeat!<span class="w"> </span><span class="o">(</span>bind*<span class="w"> </span><span class="nv">TAC</span><span class="o">)))</span><span class="w"> </span>id<span class="o">).</span>
<span class="linenos"> 621</span>
<span class="linenos"> 622</span>ppptac<span class="w"> </span>(pptac<span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span>(pptac<span class="w"> </span><span class="nv">PTAC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">PTAC</span><span class="o">.</span>
<span class="linenos"> 623</span>deftac<span class="w"> </span>(pptac<span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 624</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;SEQ&quot;</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="s2">&quot;:=&quot;</span><span class="w"> </span><span class="nv">TAC</span><span class="o">.</span>
<span class="linenos"> 625</span>
<span class="linenos"> 626</span>ppptac<span class="w"> </span>(time<span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span>(time<span class="w"> </span><span class="nv">PTAC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">PTAC</span><span class="o">.</span>
<span class="linenos"> 627</span>deftac<span class="w"> </span>(time<span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">XTAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 628</span><span class="w"> </span><span class="err">$</span>gettimeofday<span class="w"> </span><span class="nv">B</span><span class="kd">,</span>
<span class="linenos"> 629</span><span class="w"> </span><span class="nv">XTAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>thenll<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span>(time_after<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">B</span><span class="o">).</span>
<span class="linenos"> 630</span>
<span class="linenos"> 631</span>ppptac<span class="w"> </span>(time_after<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>(time_after<span class="w"> </span><span class="nv">PTAC</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">PTAC</span><span class="o">.</span>
<span class="linenos"> 632</span>deftacl<span class="w"> </span>(time_after<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span><span class="nv">TACL</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 633</span><span class="w"> </span><span class="err">$</span>gettimeofday<span class="w"> </span><span class="nv">A</span><span class="kd">,</span>
<span class="linenos"> 634</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">-</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span>
<span class="linenos"> 635</span><span class="w"> </span>mk_constant_list<span class="w"> </span><span class="nv">SEQS</span><span class="w"> </span>id<span class="w"> </span><span class="nv">TACL</span><span class="kd">,</span>
<span class="linenos"> 636</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;TIME SPENT &quot;</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="s2">&quot;FOR&quot;</span><span class="w"> </span><span class="nv">TAC</span><span class="o">.</span>
<span class="linenos"> 637</span>
<span class="linenos"> 638</span><span class="c">/* For debugging only (?) For capturing metavariables */</span>
<span class="linenos"> 639</span>ppptac<span class="w"> </span>(inspect<span class="w"> </span><span class="o">(</span>seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span>(inspect<span class="w"> </span><span class="o">(</span>seq<span class="w"> </span><span class="nv">PGamma</span><span class="w"> </span><span class="nv">PF</span><span class="o">)</span><span class="w"> </span><span class="nv">PTAC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 640</span><span class="w"> </span>list_map<span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">PSEQ</span><span class="kd">,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">PF</span><span class="kd">,</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">PTAC</span><span class="o">.</span>
<span class="linenos"> 641</span>deftac<span class="w"> </span>(inspect<span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">TAC</span><span class="o">.</span>
<span class="linenos"> 642</span>
<span class="linenos"> 643</span><span class="c">/********** tactics ********/</span>
<span class="linenos"> 644</span>
<span class="linenos"> 645</span>ppptac<span class="w"> </span>(w<span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="w"> </span>(w<span class="w"> </span><span class="nv">PG</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="nv">PG</span><span class="o">.</span>
<span class="linenos"> 646</span>deftac<span class="w"> </span>(w<span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span>(wl<span class="w"> </span><span class="nv">Gamma1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 647</span><span class="w"> </span>append<span class="w"> </span><span class="nv">Gamma1</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="nv">Gamma</span><span class="o">.</span>
<span class="linenos"> 648</span>
<span class="linenos"> 649</span>ppptac<span class="w"> </span>h<span class="w"> </span>h<span class="o">.</span>
<span class="linenos"> 650</span>deftac<span class="w"> </span>h<span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span>(h<span class="w"> </span><span class="nv">L</span><span class="o">).</span>
<span class="linenos"> 651</span>
<span class="linenos"> 652</span><span class="c">/*** eq ***/</span>
<span class="linenos"> 653</span>
<span class="linenos"> 654</span>ppptac<span class="w"> </span>sym<span class="w"> </span>sym<span class="o">.</span>
<span class="linenos"> 655</span>deftac<span class="w"> </span>sym<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">T</span><span class="w"> </span>#<span class="w"> </span><span class="nv">L</span><span class="w"> </span>#<span class="w"> </span><span class="nv">R</span><span class="o">))</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 656</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>thenl<span class="w"> </span>(m<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">T</span><span class="w"> </span>#<span class="w"> </span><span class="nv">R</span><span class="w"> </span>#<span class="w"> </span><span class="nv">R</span><span class="o">))</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>thenl<span class="w"> </span>c<span class="w"> </span><span class="kd">[</span><span class="w"> </span>thenl<span class="w"> </span>c<span class="w"> </span><span class="kd">[</span><span class="w"> </span>r<span class="w"> </span><span class="kd">,</span><span class="w"> </span>id<span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>r<span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>r<span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 657</span>
<span class="linenos"> 658</span>ppptac<span class="w"> </span>eq_true_intro<span class="w"> </span>eq_true_intro<span class="o">.</span>
<span class="linenos"> 659</span>deftac<span class="w"> </span>eq_true_intro<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span>prop<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span>tt<span class="o">))</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 660</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>thenl<span class="w"> </span>s<span class="w"> </span><span class="kd">[</span><span class="w"> </span>th<span class="w"> </span>tt_intro<span class="kd">,</span><span class="w"> </span>wl<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 661</span>
<span class="linenos"> 662</span><span class="c">/*** true ***/</span>
<span class="linenos"> 663</span>
<span class="linenos"> 664</span><span class="c">/*** and ***/</span>
<span class="linenos"> 665</span>
<span class="linenos"> 666</span>ppptac<span class="w"> </span>conj<span class="w"> </span>conj<span class="o">.</span>
<span class="linenos"> 667</span>deftac<span class="w"> </span>conj<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="o">(</span>and<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">))</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 668</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 669</span><span class="w">  </span>then
<span class="linenos"> 670</span><span class="w">   </span>(then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>dd<span class="o">)</span>
<span class="linenos"> 671</span><span class="w">     </span><span class="o">(</span>then<span class="w"> </span>k<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span>
<span class="linenos"> 672</span><span class="w">       </span>thenl<span class="w"> </span>c
<span class="linenos"> 673</span><span class="w">        </span><span class="kd">[</span><span class="w"> </span>thenl<span class="w"> </span>c<span class="w"> </span><span class="kd">[</span><span class="w"> </span>r<span class="kd">,</span><span class="w"> </span>eq_true_intro<span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos"> 674</span><span class="w">          </span>eq_true_intro<span class="w"> </span><span class="kd">]</span><span class="o">)))</span>
<span class="linenos"> 675</span><span class="w">   </span>ww<span class="o">.</span>
<span class="linenos"> 676</span>
<span class="linenos"> 677</span><span class="c">/* Gamma  &quot;|-&quot;  q    ---&gt;   Gamma &quot;|-&quot; and # p # q*/</span>
<span class="linenos"> 678</span>ppptac<span class="w"> </span>(andr<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span>(andr<span class="w"> </span><span class="nv">PP</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">PP</span><span class="o">.</span>
<span class="linenos"> 679</span>deftac<span class="w"> </span>(andr<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 680</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 681</span><span class="w">  </span>(thenl<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="o">((</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>y<span class="w"> </span><span class="err">\</span><span class="w"> </span>y<span class="o">)))</span>
<span class="linenos"> 682</span><span class="w">    </span><span class="kd">[</span><span class="w"> </span>then
<span class="linenos"> 683</span><span class="w">       </span><span class="c">%(repeat (conv (depth_tac b))) ROBUS VERSION LINE BELOW</span>
<span class="linenos"> 684</span><span class="w">       </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>b<span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>rator_tac<span class="w"> </span>b<span class="o">)))</span><span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>b<span class="o">))))</span>
<span class="linenos"> 685</span><span class="w">      </span>r
<span class="linenos"> 686</span><span class="w">    </span><span class="kd">,</span><span class="w"> </span>thenl<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>rator_tac<span class="w"> </span>id<span class="o">))</span>
<span class="linenos"> 687</span><span class="w">       </span><span class="kd">[</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>thenl<span class="w"> </span><span class="o">(</span>t<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>tt<span class="w"> </span>#<span class="w"> </span>tt<span class="o">))</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>id<span class="kd">,</span><span class="w"> </span>r<span class="w"> </span><span class="kd">]</span><span class="o">)</span>
<span class="linenos"> 688</span><span class="w">          </span><span class="o">(</span>thenl<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="o">(</span>and<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">))</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>dd<span class="w"> </span><span class="kd">,</span><span class="w"> </span>id<span class="w"> </span><span class="kd">]</span><span class="o">)</span>
<span class="linenos"> 689</span><span class="w">       </span><span class="kd">,</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>repeat<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>b<span class="o">)))</span><span class="w"> </span><span class="o">(</span>th<span class="w"> </span>tt_intro<span class="o">)</span><span class="w"> </span><span class="kd">]]</span><span class="o">).</span>
<span class="linenos"> 690</span>
<span class="linenos"> 691</span><span class="c">/* (and # p # q) :: nil  &quot;|-&quot;  q */</span>
<span class="linenos"> 692</span>ppptac<span class="w"> </span>andr<span class="w"> </span>andr<span class="o">.</span>
<span class="linenos"> 693</span>deftac<span class="w"> </span>andr<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 694</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(and<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 695</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span>(andr<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span>h<span class="o">.</span>
<span class="linenos"> 696</span>
<span class="linenos"> 697</span><span class="c">/* Gamma  &quot;|-&quot;  p    ---&gt;   Gamma &quot;|-&quot; and # p # q*/</span>
<span class="linenos"> 698</span>ppptac<span class="w"> </span>(andl<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span>(andl<span class="w"> </span><span class="nv">PP</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">PP</span><span class="o">.</span>
<span class="linenos"> 699</span>deftac<span class="w"> </span>(andl<span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 700</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 701</span><span class="w">  </span>(thenl<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="o">((</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>y<span class="w"> </span><span class="err">\</span><span class="w"> </span>x<span class="o">)))</span>
<span class="linenos"> 702</span><span class="w">    </span><span class="kd">[</span><span class="w"> </span>then
<span class="linenos"> 703</span><span class="w">       </span><span class="c">%(repeat (conv (depth_tac b))) ROBUS VERSION LINE BELOW</span>
<span class="linenos"> 704</span><span class="w">       </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>b<span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>rator_tac<span class="w"> </span>b<span class="o">)))</span><span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>b<span class="o">))))</span>
<span class="linenos"> 705</span><span class="w">      </span>r
<span class="linenos"> 706</span><span class="w">    </span><span class="kd">,</span><span class="w"> </span>thenl<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>rator_tac<span class="w"> </span>id<span class="o">))</span>
<span class="linenos"> 707</span><span class="w">       </span><span class="kd">[</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>thenl<span class="w"> </span><span class="o">(</span>t<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>tt<span class="w"> </span>#<span class="w"> </span>tt<span class="o">))</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>id<span class="kd">,</span><span class="w"> </span>r<span class="w"> </span><span class="kd">]</span><span class="o">)</span>
<span class="linenos"> 708</span><span class="w">          </span><span class="o">(</span>thenl<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="o">(</span>and<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">))</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>dd<span class="w"> </span><span class="kd">,</span><span class="w"> </span>id<span class="w"> </span><span class="kd">]</span><span class="o">)</span>
<span class="linenos"> 709</span><span class="w">       </span><span class="kd">,</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>repeat<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>b<span class="o">)))</span><span class="w"> </span><span class="o">(</span>th<span class="w"> </span>tt_intro<span class="o">)</span><span class="w"> </span><span class="kd">]]</span><span class="o">).</span>
<span class="linenos"> 710</span>
<span class="linenos"> 711</span><span class="c">/* (and # p # q) :: nil  &quot;|-&quot;  p */</span>
<span class="linenos"> 712</span>ppptac<span class="w"> </span>andl<span class="w"> </span>andl<span class="o">.</span>
<span class="linenos"> 713</span>deftac<span class="w"> </span>andl<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 714</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(and<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 715</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span>(andl<span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span>h<span class="o">.</span>
<span class="linenos"> 716</span>
<span class="linenos"> 717</span>
<span class="linenos"> 718</span><span class="c">/*** forall ***/</span>
<span class="linenos"> 719</span>
<span class="linenos"> 720</span><span class="c">/* |- forall # F  --&gt;   |- F # x */</span>
<span class="linenos"> 721</span>ppptac<span class="w"> </span>forall_i<span class="w"> </span>forall_i<span class="o">.</span>
<span class="linenos"> 722</span>deftac<span class="w"> </span>forall_i<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="o">(</span>forall<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">G</span><span class="o">))</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 723</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span>(conv<span class="w"> </span>dd<span class="o">)</span><span class="w"> </span>(then<span class="w"> </span>k<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>eq_true_intro<span class="o">)).</span>
<span class="linenos"> 724</span>
<span class="linenos"> 725</span><span class="c">/* forall # F |- F # T */</span>
<span class="linenos"> 726</span>ppptac<span class="w"> </span>forall_e<span class="w"> </span>forall_e<span class="o">.</span>
<span class="linenos"> 727</span>deftac<span class="w"> </span>forall_e<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">GX</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 728</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(forall<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">G</span><span class="o">))</span><span class="kd">,</span><span class="w"> </span><span class="nv">GX</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span>
<span class="linenos"> 729</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>thenl<span class="w"> </span>(m<span class="w"> </span><span class="o">((</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="nv">X</span><span class="o">))</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>b<span class="kd">,</span><span class="w"> </span>thenl<span class="w"> </span>(m<span class="w"> </span><span class="o">((</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>z<span class="w"> </span><span class="err">\</span><span class="w"> </span>tt<span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="nv">X</span><span class="o">))</span>
<span class="linenos"> 730</span><span class="w">  </span><span class="kd">[</span><span class="w"> </span>thenl<span class="w"> </span>c<span class="w"> </span><span class="kd">[</span><span class="w"> </span>then<span class="w"> </span>sym<span class="w"> </span>(thenl<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="o">(</span>forall<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">G</span><span class="o">))</span><span class="w"> </span><span class="kd">[</span>dd<span class="kd">,</span>h<span class="w"> </span><span class="kd">]</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>r<span class="w"> </span><span class="kd">]</span>
<span class="linenos"> 731</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>then<span class="w"> </span>(conv<span class="w"> </span>b<span class="o">)</span><span class="w"> </span>(th<span class="w"> </span>tt_intro<span class="o">)</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 732</span>
<span class="linenos"> 733</span><span class="c">/* forall # F |- f  --&gt;  F # a, forall # F |- f */</span>
<span class="linenos"> 734</span>ppptac<span class="w"> </span>(lforall<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(lforall<span class="w"> </span><span class="nv">PF</span><span class="w"> </span><span class="nv">PA</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">PF</span><span class="kd">,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">PA</span><span class="o">.</span>
<span class="linenos"> 735</span>deftac<span class="w"> </span>(lforall<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 736</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>thenl<span class="w"> </span>(m<span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G</span><span class="o">))</span>
<span class="linenos"> 737</span><span class="w">  </span><span class="kd">[</span><span class="w"> </span>thenl<span class="w"> </span>s<span class="w"> </span><span class="kd">[</span><span class="w"> </span>then<span class="w"> </span>mp<span class="w"> </span>forall_e<span class="kd">,</span><span class="w"> </span>then<span class="w"> </span>i<span class="w"> </span>h<span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>then<span class="w"> </span>(w<span class="w"> </span><span class="o">(</span>forall<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">F</span><span class="o">))</span><span class="w"> </span>i<span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 738</span>
<span class="linenos"> 739</span><span class="c">/* forall # F |- f  --&gt;  F # a, forall # F |- f */</span>
<span class="linenos"> 740</span>ppptac<span class="w"> </span>(lforall<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(lforall<span class="w"> </span><span class="nv">PA</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">PA</span><span class="o">.</span>
<span class="linenos"> 741</span>deftac<span class="w"> </span>(lforall<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="w"> </span>(lforall<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 742</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(forall<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">F</span><span class="o">).</span>
<span class="linenos"> 743</span>
<span class="linenos"> 744</span><span class="c">/* forall # F |- f  --&gt;  F # a, forall # F |- f */</span>
<span class="linenos"> 745</span>ppptac<span class="w"> </span>lforall<span class="w"> </span>lforall<span class="o">.</span>
<span class="linenos"> 746</span>deftac<span class="w"> </span>lforall<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="w"> </span>(lforall<span class="w"> </span><span class="nv">A</span><span class="o">).</span>
<span class="linenos"> 747</span>
<span class="linenos"> 748</span><span class="c">/* forall # F |- f  --&gt;  F # a, forall # F |- f */</span>
<span class="linenos"> 749</span>ppptac<span class="w"> </span>(lforall_last<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(lforall_last<span class="w"> </span><span class="nv">PA</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">PA</span><span class="o">.</span>
<span class="linenos"> 750</span>deftac<span class="w"> </span>(lforall_last<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="o">((</span>forall<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="kd">::</span><span class="nv">Gamma</span><span class="o">)</span><span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="w"> </span>(lforall<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">A</span><span class="o">).</span>
<span class="linenos"> 751</span>
<span class="linenos"> 752</span><span class="c">/*** false ***/</span>
<span class="linenos"> 753</span><span class="w">              </span>
<span class="linenos"> 754</span><span class="c">/*** impl ***/</span>
<span class="linenos"> 755</span>
<span class="linenos"> 756</span><span class="c">/* |- p=&gt;q  --&gt;  p |- q */</span>
<span class="linenos"> 757</span>ppptac<span class="w"> </span>i<span class="w"> </span>i<span class="o">.</span>
<span class="linenos"> 758</span>deftac<span class="w"> </span>i<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">))</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 759</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span>(conv<span class="w"> </span>dd<span class="o">)</span><span class="w"> </span>(thenl<span class="w"> </span>s<span class="w"> </span><span class="kd">[</span><span class="w"> </span>andl<span class="kd">,</span><span class="w"> </span>thenl<span class="w"> </span>conj<span class="w"> </span><span class="kd">[</span><span class="w"> </span>h<span class="w"> </span><span class="kd">[],</span><span class="w"> </span>id<span class="w"> </span><span class="kd">]]</span><span class="o">).</span>
<span class="linenos"> 760</span>
<span class="linenos"> 761</span><span class="c">/* p=&gt;q |- q  --&gt;  |- p */</span>
<span class="linenos"> 762</span>ppptac<span class="w"> </span>(mp<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span>(mp<span class="w"> </span><span class="nv">PP</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">PP</span><span class="o">.</span>
<span class="linenos"> 763</span>deftac<span class="w"> </span>(mp<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 764</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span>(andr<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span>(thenl<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>then<span class="w"> </span>sym<span class="w"> </span><span class="o">(</span>thenl<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">))</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>dd<span class="w"> </span><span class="kd">,</span><span class="w"> </span>h<span class="w"> </span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>id<span class="w"> </span><span class="kd">]</span><span class="o">).</span>
<span class="linenos"> 765</span>
<span class="linenos"> 766</span><span class="c">/* p=&gt;q |- q  --&gt;  |- p */</span>
<span class="linenos"> 767</span>ppptac<span class="w"> </span>mp<span class="w"> </span>mp<span class="o">.</span>
<span class="linenos"> 768</span>deftac<span class="w"> </span>mp<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span>(mp<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 769</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(impl<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">).</span>
<span class="linenos"> 770</span>
<span class="linenos"> 771</span><span class="c">/* |- q   --&gt;   p |- q  and  |- p */</span>
<span class="linenos"> 772</span>ppptac<span class="w"> </span>(cut<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span>(cut<span class="w"> </span><span class="nv">PP</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">PP</span><span class="o">.</span>
<span class="linenos"> 773</span>deftac<span class="w"> </span>(cut<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 774</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span>(andr<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span>(thenl<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>then<span class="w"> </span>sym<span class="w"> </span><span class="o">(</span>thenl<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">))</span><span class="w"> </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>dd<span class="o">))</span><span class="w"> </span>r<span class="kd">,</span><span class="w"> </span>i<span class="kd">]</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>id<span class="kd">]</span><span class="o">).</span><span class="w"> </span>
<span class="linenos"> 775</span>
<span class="linenos"> 776</span><span class="c">/* |-q  --&gt; p |- q   where the theorem T proves p */</span>
<span class="linenos"> 777</span>ppptac<span class="w"> </span>(cutth<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span>(cutth<span class="w"> </span><span class="nv">PP</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">PP</span><span class="o">.</span>
<span class="linenos"> 778</span>deftac<span class="w"> </span>(cutth<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 779</span><span class="w"> </span>proves<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span>
<span class="linenos"> 780</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(thenl<span class="w"> </span><span class="o">(</span>cut<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>id<span class="kd">,</span><span class="w"> </span>th<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">]</span><span class="o">).</span>
<span class="linenos"> 781</span>
<span class="linenos"> 782</span><span class="c">/* applies the theorem T */</span>
<span class="linenos"> 783</span>ppptac<span class="w"> </span>(applyth<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span>(applyth<span class="w"> </span><span class="nv">PP</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">PP</span><span class="o">.</span>
<span class="linenos"> 784</span>deftac<span class="w"> </span>(applyth<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span>(then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span>apply_last<span class="o">).</span>
<span class="linenos"> 785</span>
<span class="linenos"> 786</span><span class="c">/* impl p q, Gamma |- f   ---&gt;   /*impl q f*/</span><span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="kd">|-</span><span class="w"> </span>p<span class="w">  </span><span class="kd">,</span><span class="w">  </span>q<span class="kd">,</span><span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="kd">|-</span><span class="w"> </span>f<span class="w"> </span><span class="kd">*/</span>
<span class="linenos"> 787</span>ppptac<span class="w"> </span>(lapply<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span>(lapply<span class="w"> </span><span class="nv">PP</span><span class="w"> </span><span class="nv">PQ</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">PP</span><span class="kd">,</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">Q</span><span class="w"> </span><span class="nv">PQ</span><span class="o">.</span>
<span class="linenos"> 788</span>deftac<span class="w"> </span>(lapply<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 789</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 790</span><span class="w">  </span>thenl<span class="w"> </span>(m<span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="w"> </span>#<span class="w"> </span><span class="nv">F</span><span class="o">))</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>thenl<span class="w"> </span>s<span class="w"> </span><span class="kd">[</span><span class="w"> </span>then<span class="w"> </span>(mp<span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span>(then<span class="w"> </span><span class="o">(</span>w<span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="w"> </span>#<span class="w"> </span><span class="nv">F</span><span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>mp<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>w<span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">))))</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>then<span class="w"> </span>i<span class="w"> </span>(h<span class="w"> </span><span class="kd">[</span><span class="nv">A</span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>then<span class="w"> </span>(w<span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">))</span><span class="w"> </span>(then<span class="w"> </span>i<span class="w"> </span>id<span class="o">)</span><span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 791</span>
<span class="linenos"> 792</span><span class="c">/* impl p q, Gamma |- f   ---&gt;   /*impl q f*/</span><span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="kd">|-</span><span class="w"> </span>p<span class="w">  </span><span class="kd">,</span><span class="w">  </span>q<span class="kd">,</span><span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="kd">|-</span><span class="w"> </span>f<span class="w"> </span><span class="kd">*/</span>
<span class="linenos"> 793</span>ppptac<span class="w"> </span>lapply<span class="w"> </span>lapply<span class="o">.</span>
<span class="linenos"> 794</span>deftac<span class="w"> </span>lapply<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(lapply<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 795</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(impl<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">).</span>
<span class="linenos"> 796</span>
<span class="linenos"> 797</span><span class="c">/* impl p q, Gamma |- f   ---&gt;   /*impl q f*/</span><span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="kd">|-</span><span class="w"> </span>p<span class="w">  </span><span class="kd">,</span><span class="w">  </span>q<span class="kd">,</span><span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="kd">|-</span><span class="w"> </span>f<span class="w"> </span><span class="kd">*/</span>
<span class="linenos"> 798</span>ppptac<span class="w"> </span>lapply_last<span class="w"> </span>lapply_last<span class="o">.</span>
<span class="linenos"> 799</span>deftac<span class="w"> </span>lapply_last<span class="w"> </span>(seq<span class="w"> </span><span class="o">((</span>impl<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="kd">::</span><span class="nv">Gamma</span><span class="o">)</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(lapply<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">Q</span><span class="o">).</span>
<span class="linenos"> 800</span>
<span class="linenos"> 801</span><span class="c">/* p |- f ---&gt; p |- p ==&gt; f */</span>
<span class="linenos"> 802</span>ppptac<span class="w"> </span>(g<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span>(g<span class="w"> </span><span class="nv">PP</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">PP</span><span class="o">.</span>
<span class="linenos"> 803</span>deftac<span class="w"> </span>(g<span class="w"> </span><span class="nv">P</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 804</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 805</span><span class="w">  </span>(thenl<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">F</span><span class="o">))</span><span class="w"> </span><span class="kd">[</span>thenl<span class="w"> </span>s<span class="w"> </span><span class="kd">[</span>then<span class="w"> </span>mp<span class="w"> </span>h<span class="w"> </span><span class="kd">,</span><span class="w"> </span>then<span class="w"> </span>i<span class="w"> </span>h<span class="kd">]</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>id<span class="w"> </span><span class="kd">]</span><span class="o">).</span>
<span class="linenos"> 806</span>
<span class="linenos"> 807</span><span class="c">/*** not ***/</span>
<span class="linenos"> 808</span>
<span class="linenos"> 809</span><span class="c">/*** exists ***/</span>
<span class="linenos"> 810</span>
<span class="linenos"> 811</span><span class="c">/**** apply, i.e. forall + impl ****/</span>
<span class="linenos"> 812</span>
<span class="linenos"> 813</span>ppptac<span class="w"> </span>(apply<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(apply<span class="w"> </span><span class="nv">PX</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppp<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">PX</span><span class="o">.</span>
<span class="linenos"> 814</span>deftac<span class="w"> </span>(apply<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span>h<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>var<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 815</span>deftac<span class="w"> </span>(apply<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span>h<span class="o">.</span>
<span class="linenos"> 816</span>deftac<span class="w"> </span>(apply<span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="nv">P</span><span class="w"> </span>#<span class="w"> </span><span class="nv">Q</span><span class="o">))</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 817</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>thenl<span class="w"> </span>(lapply<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">Q</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>id<span class="kd">,</span><span class="w"> </span>apply_last<span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 818</span>deftac<span class="w"> </span>(apply<span class="w"> </span><span class="o">(</span>forall<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">G</span><span class="o">))</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 819</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span>(lforall<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>apply_last<span class="o">.</span>
<span class="linenos"> 820</span>
<span class="linenos"> 821</span>ppptac<span class="w"> </span>apply_last<span class="w"> </span>apply_last<span class="o">.</span>
<span class="linenos"> 822</span>deftac<span class="w"> </span>apply_last<span class="w"> </span>(seq<span class="w"> </span><span class="o">(</span><span class="nv">H</span><span class="kd">::</span><span class="nv">Gamma</span><span class="o">)</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(apply<span class="w"> </span><span class="nv">H</span><span class="o">).</span>
<span class="linenos"> 823</span>
<span class="linenos"> 824</span>ppptac<span class="w"> </span>apply<span class="w"> </span>apply<span class="o">.</span>
<span class="linenos"> 825</span>deftac<span class="w"> </span>apply<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(apply<span class="w"> </span><span class="nv">H</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 826</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">H</span><span class="o">.</span>
<span class="linenos"> 827</span>
<span class="linenos"> 828</span><span class="c">/********** conversion(als) ***********/</span>
<span class="linenos"> 829</span>
<span class="linenos"> 830</span>strip_constant<span class="w"> </span>(<span class="nv">I</span><span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="nv">H</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>strip_constant<span class="w"> </span><span class="nv">I</span><span class="w"> </span><span class="nv">H</span><span class="o">.</span>
<span class="linenos"> 831</span>strip_constant<span class="w"> </span><span class="nv">H</span><span class="w"> </span><span class="nv">H</span><span class="o">.</span>
<span class="linenos"> 832</span>
<span class="linenos"> 833</span><span class="c">/* expands definitions, even if applied to arguments */</span>
<span class="linenos"> 834</span>ppptac<span class="w"> </span>(dd<span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span>(dd<span class="w"> </span><span class="nv">L</span><span class="o">).</span>
<span class="linenos"> 835</span>deftac<span class="w"> </span>(dd<span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">T</span><span class="w"> </span>#<span class="w"> </span><span class="nv">X</span><span class="o">))</span><span class="w"> </span>d<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>strip_constant<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">H</span><span class="kd">,</span><span class="w"> </span>bang<span class="w"> </span>(mem<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">H</span><span class="o">).</span>
<span class="linenos"> 836</span>deftac<span class="w"> </span>(dd<span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>#<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="nv">X</span><span class="o">))</span>
<span class="linenos"> 837</span><span class="w"> </span>(thenl<span class="w"> </span><span class="o">(</span>t<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span>thenl<span class="w"> </span>c<span class="w"> </span><span class="kd">[</span>dd<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>r<span class="kd">],</span><span class="w"> </span>b<span class="kd">]</span><span class="o">).</span>
<span class="linenos"> 838</span>
<span class="linenos"> 839</span>ppptac<span class="w"> </span>dd<span class="w"> </span>dd<span class="o">.</span>
<span class="linenos"> 840</span>deftac<span class="w"> </span>dd<span class="w"> </span><span class="nv">_</span><span class="w"> </span>(dd<span class="w"> </span><span class="nv">L</span><span class="o">).</span>
<span class="linenos"> 841</span>
<span class="linenos"> 842</span>ppptac<span class="w"> </span>beta_expand<span class="w"> </span>beta_expand<span class="o">.</span>
<span class="linenos"> 843</span>deftac<span class="w"> </span>beta_expand<span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">)))</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 844</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span>k<span class="w"> </span>(bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span>sym<span class="w"> </span>b<span class="o">).</span>
<span class="linenos"> 845</span>
<span class="linenos"> 846</span><span class="c">/* folds a definition, even if applied to arguments */</span>
<span class="linenos"> 847</span><span class="c">/* BUG: it seems to fail with restriction errors in some cases */</span>
<span class="linenos"> 848</span>ppptac<span class="w"> </span>f<span class="w"> </span>f<span class="o">.</span>
<span class="linenos"> 849</span>deftac<span class="w"> </span>f<span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span>(then<span class="w"> </span>sym<span class="w"> </span>dd<span class="o">).</span>
<span class="linenos"> 850</span>
<span class="linenos"> 851</span>ppptac<span class="w"> </span>(rand_tac<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>(rand_tac<span class="w"> </span><span class="nv">PC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">PC</span><span class="o">.</span>
<span class="linenos"> 852</span>deftac<span class="w"> </span>(rand_tac<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 853</span><span class="w">  </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>thenl<span class="w"> </span>c<span class="w"> </span><span class="kd">[</span><span class="w"> </span>r<span class="w"> </span><span class="kd">,</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 854</span>
<span class="linenos"> 855</span>ppptac<span class="w"> </span>(rator_tac<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>(rator_tac<span class="w"> </span><span class="nv">PC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">PC</span><span class="o">.</span>
<span class="linenos"> 856</span>deftac<span class="w"> </span>(rator_tac<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 857</span><span class="w">  </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>thenl<span class="w"> </span>c<span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>r<span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 858</span>
<span class="linenos"> 859</span>ppptac<span class="w"> </span>(abs_tac<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>(abs_tac<span class="w"> </span><span class="nv">PC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">PC</span><span class="o">.</span>
<span class="linenos"> 860</span>deftac<span class="w"> </span>(abs_tac<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 861</span><span class="w">  </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span>k<span class="w"> </span>(bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="nv">C</span><span class="o">).</span>
<span class="linenos"> 862</span>
<span class="linenos"> 863</span>ppptac<span class="w"> </span>(land_tac<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>(land_tac<span class="w"> </span><span class="nv">PC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">PC</span><span class="o">.</span>
<span class="linenos"> 864</span>deftac<span class="w"> </span>(land_tac<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 865</span><span class="w">  </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>thenl<span class="w"> </span>c<span class="w"> </span><span class="kd">[</span><span class="w"> </span>thenl<span class="w"> </span>c<span class="w"> </span><span class="kd">[</span><span class="w"> </span>r<span class="kd">,</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>r<span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 866</span>
<span class="linenos"> 867</span>ppptac<span class="w"> </span>(sub_tac<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>(sub_tac<span class="w"> </span><span class="nv">PC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">PC</span><span class="o">.</span>
<span class="linenos"> 868</span>deftac<span class="w"> </span>(sub_tac<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 869</span><span class="w">  </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>orelse<span class="w"> </span>(rand_tac<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>(orelse<span class="w"> </span><span class="o">(</span>rator_tac<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>abs_tac<span class="w"> </span><span class="nv">C</span><span class="o">)).</span>
<span class="linenos"> 870</span>
<span class="linenos"> 871</span>ppptac<span class="w"> </span>(try<span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span>(try<span class="w"> </span><span class="nv">PTAC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="nv">PTAC</span><span class="o">.</span>
<span class="linenos"> 872</span>deftac<span class="w"> </span>(try<span class="w"> </span><span class="nv">TAC</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span>(orelse<span class="w"> </span><span class="nv">TAC</span><span class="w"> </span>id<span class="o">).</span>
<span class="linenos"> 873</span>
<span class="linenos"> 874</span>ppptac<span class="w"> </span>(depth_tac<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>(depth_tac<span class="w"> </span><span class="nv">PC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">PC</span><span class="o">.</span>
<span class="linenos"> 875</span>deftac<span class="w"> </span>(depth_tac<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 876</span><span class="w">  </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span>(try<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>(sub_tac<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="nv">C</span><span class="o">)).</span>
<span class="linenos"> 877</span>
<span class="linenos"> 878</span>ppptac<span class="w"> </span>(conv<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>(conv<span class="w"> </span><span class="nv">PC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>ppptac<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">PC</span><span class="o">.</span>
<span class="linenos"> 879</span>deftac<span class="w"> </span>(conv<span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 880</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>thenl<span class="w"> </span>(m<span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>then<span class="w"> </span>sym<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>id<span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 881</span>
<span class="linenos"> 882</span><span class="c">/********** Automation ***********/</span>
<span class="linenos"> 883</span><span class="c">/* TODO:</span>
<span class="linenos"> 884</span><span class="w"> </span><span class="mi">1</span><span class="err">)</span><span class="w"> </span>our<span class="w"> </span>lforall<span class="w"> </span>gets<span class="w"> </span>rid<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>hypothesis<span class="w"> </span>(bad<span class="o">)</span><span class="w"> </span><span class="kd">*/</span>
<span class="linenos"> 885</span><span class="c">/* left tries to reduce the search space via focusing */</span>
<span class="linenos"> 886</span>ppptac<span class="w"> </span>left<span class="w"> </span>left<span class="o">.</span>
<span class="linenos"> 887</span>deftac<span class="w"> </span>left<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 888</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(not<span class="w"> </span>#<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 889</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 890</span><span class="w">  </span>(<span class="kd">!</span>
<span class="linenos"> 891</span><span class="w">   </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>not_e<span class="o">)</span>
<span class="linenos"> 892</span><span class="w">    </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall_last<span class="w"> </span><span class="nv">F</span><span class="o">)</span>
<span class="linenos"> 893</span><span class="w">     </span><span class="o">(</span>thenl<span class="w"> </span>lapply<span class="w"> </span><span class="kd">[</span><span class="w"> </span>h<span class="kd">,</span><span class="w"> </span><span class="o">(</span>w<span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span><span class="nv">F</span><span class="o">))</span><span class="w"> </span><span class="kd">]</span><span class="o">)))).</span>
<span class="linenos"> 894</span>deftac<span class="w"> </span>left<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 895</span><span class="w"> </span><span class="c">/* A bit long because we want to beta-reduce the produced hypothesis.</span>
<span class="linenos"> 896</span><span class="w">    </span><span class="nv">Maybe</span><span class="w"> </span>this<span class="w"> </span>should<span class="w"> </span>be<span class="w"> </span>automatized<span class="w"> </span>somewhere<span class="w"> </span>else<span class="o">.</span><span class="w"> </span><span class="kd">*/</span>
<span class="linenos"> 897</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(exists<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 898</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 899</span><span class="w">  </span>(<span class="kd">!</span>
<span class="linenos"> 900</span><span class="w">   </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>exists_e<span class="o">)</span>
<span class="linenos"> 901</span><span class="w">    </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall_last<span class="w"> </span><span class="nv">F</span><span class="o">)</span>
<span class="linenos"> 902</span><span class="w">     </span><span class="o">(</span>thenl<span class="w"> </span>lapply<span class="w"> </span><span class="kd">[</span><span class="w"> </span>h<span class="kd">,</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>w<span class="w"> </span><span class="o">(</span>exists<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">F</span><span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>apply_last<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>try<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>b<span class="o">)))</span><span class="w"> </span>i<span class="o">)))</span><span class="w"> </span><span class="kd">]</span><span class="o">)))).</span>
<span class="linenos"> 903</span>deftac<span class="w"> </span>left<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">H</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 904</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(or<span class="w"> </span>#<span class="w"> </span><span class="nv">F</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 905</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 906</span><span class="w">  </span>(<span class="kd">!</span>
<span class="linenos"> 907</span><span class="w">   </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>or_e<span class="o">)</span>
<span class="linenos"> 908</span><span class="w">    </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall_last<span class="w"> </span><span class="nv">F</span><span class="o">)</span>
<span class="linenos"> 909</span><span class="w">     </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall_last<span class="w"> </span><span class="nv">G</span><span class="o">)</span>
<span class="linenos"> 910</span><span class="w">      </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall_last<span class="w"> </span><span class="nv">H</span><span class="o">)</span>
<span class="linenos"> 911</span><span class="w">       </span><span class="o">(</span>thenl<span class="w"> </span>lapply<span class="w"> </span><span class="kd">[</span><span class="w"> </span>h<span class="kd">,</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>w<span class="w"> </span><span class="o">(</span>or<span class="w"> </span>#<span class="w"> </span><span class="nv">F</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G</span><span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>apply_last<span class="w"> </span>i<span class="o">)</span><span class="kd">]</span><span class="o">)))))).</span>
<span class="linenos"> 912</span>deftac<span class="w"> </span>left<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">H</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 913</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(and<span class="w"> </span>#<span class="w"> </span><span class="nv">F</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 914</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 915</span><span class="w">  </span>(<span class="kd">!</span>
<span class="linenos"> 916</span><span class="w">   </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>and_e<span class="o">)</span>
<span class="linenos"> 917</span><span class="w">    </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall_last<span class="w"> </span><span class="nv">F</span><span class="o">)</span>
<span class="linenos"> 918</span><span class="w">     </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall_last<span class="w"> </span><span class="nv">G</span><span class="o">)</span>
<span class="linenos"> 919</span><span class="w">      </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall_last<span class="w"> </span><span class="nv">H</span><span class="o">)</span>
<span class="linenos"> 920</span><span class="w">       </span><span class="o">(</span>thenl<span class="w"> </span>lapply<span class="w"> </span><span class="kd">[</span><span class="w"> </span>h<span class="kd">,</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>w<span class="w"> </span><span class="o">(</span>and<span class="w"> </span>#<span class="w"> </span><span class="nv">F</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G</span><span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>apply_last<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span>i<span class="o">))</span><span class="kd">]</span><span class="o">)))))).</span>
<span class="linenos"> 921</span>deftac<span class="w"> </span>left<span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">H</span><span class="o">)</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 922</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>(eq<span class="w"> </span>##<span class="w"> </span><span class="nv">TY</span><span class="w"> </span>#<span class="w"> </span><span class="nv">F</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 923</span><span class="w"> </span>not<span class="w"> </span>(var<span class="w"> </span><span class="nv">TY</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>prop<span class="kd">,</span>
<span class="linenos"> 924</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 925</span><span class="w">  </span>(then<span class="w"> </span><span class="o">(</span>g<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">TY</span><span class="w"> </span>#<span class="w"> </span><span class="nv">F</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G</span><span class="o">))</span>
<span class="linenos"> 926</span><span class="w">   </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>eq_to_impl<span class="o">)</span><span class="w"> </span>h<span class="o">)))</span>
<span class="linenos"> 927</span><span class="w">     </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>w<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">TY</span><span class="w"> </span>#<span class="w"> </span><span class="nv">F</span><span class="w"> </span>#<span class="w"> </span><span class="nv">G</span><span class="o">))))).</span>
<span class="linenos"> 928</span>
<span class="linenos"> 929</span>ppptac<span class="w"> </span>not_i<span class="w"> </span>not_i<span class="o">.</span>
<span class="linenos"> 930</span>deftac<span class="w"> </span>not_i<span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="o">))</span><span class="w"> </span>(applyth<span class="w"> </span>not_i<span class="o">).</span>
<span class="linenos"> 931</span>
<span class="linenos"> 932</span>ppptac<span class="w"> </span>inv<span class="w"> </span>inv<span class="o">.</span>
<span class="linenos"> 933</span>deftac<span class="w"> </span>inv<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 934</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 935</span><span class="w"> </span>(then!
<span class="linenos"> 936</span><span class="w">  </span><span class="o">(</span>repeat!
<span class="linenos"> 937</span><span class="w">   </span><span class="o">(</span>orelse!<span class="w"> </span>conj<span class="w"> </span><span class="o">(</span>orelse!<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>orelse!<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>orelse!<span class="w"> </span>not_i<span class="w"> </span>s<span class="o">)))))</span>
<span class="linenos"> 938</span><span class="w">  </span><span class="o">(</span>bind*<span class="w"> </span><span class="o">(</span>repeat!<span class="w"> </span>left<span class="o">))).</span>
<span class="linenos"> 939</span>
<span class="linenos"> 940</span>ppptac<span class="w"> </span>(sync<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span>(sync<span class="w"> </span><span class="nv">N</span><span class="o">).</span>
<span class="linenos"> 941</span>deftac<span class="w"> </span>(sync<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span>tt<span class="o">)</span><span class="w"> </span>(th<span class="w"> </span>tt_intro<span class="o">).</span>
<span class="linenos"> 942</span>deftac<span class="w"> </span>(sync<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span>(then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>ff_elim<span class="o">)</span><span class="w"> </span>h<span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 943</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">Gamma</span><span class="w"> </span>ff<span class="o">.</span>
<span class="linenos"> 944</span>deftac<span class="w"> </span>(sync<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="o">(</span>or<span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="o">))</span>
<span class="linenos"> 945</span><span class="w"> </span>(orelse<span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>orr<span class="o">)</span><span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="nv">N</span><span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>orl<span class="o">)</span><span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="nv">N</span><span class="o">))).</span>
<span class="linenos"> 946</span>deftac<span class="w"> </span>(sync<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="o">(</span>exists<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="o">))</span><span class="w"> </span>(then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>exists_i<span class="o">)</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>b<span class="o">)</span><span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="nv">N2</span><span class="o">)))</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 947</span><span class="w"> </span><span class="nv">N2</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">-</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 948</span>
<span class="linenos"> 949</span>ppptac<span class="w"> </span>(itaut<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span>(itaut<span class="w"> </span><span class="nv">N</span><span class="o">).</span>
<span class="linenos"> 950</span>deftac<span class="w"> </span>(itaut<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span>fail<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">=&lt;</span><span class="w"> </span><span class="mi">0</span><span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 951</span>deftac<span class="w"> </span>(itaut<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="nv">SEQ</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 952</span><span class="w"> </span><span class="c">%print (itaut N) SEQ,</span>
<span class="linenos"> 953</span><span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">-</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span>
<span class="linenos"> 954</span><span class="w"> </span><span class="nv">N2</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">-</span><span class="w"> </span><span class="mi">2</span><span class="kd">,</span>
<span class="linenos"> 955</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 956</span><span class="w"> </span>(then!<span class="w"> </span>inv
<span class="linenos"> 957</span><span class="w">  </span><span class="o">(</span>bind*
<span class="linenos"> 958</span><span class="w">   </span><span class="o">(</span>orelse<span class="w"> </span>h
<span class="linenos"> 959</span><span class="w">   </span><span class="o">(</span>orelse<span class="w"> </span><span class="o">(</span>sync<span class="w"> </span><span class="nv">N</span><span class="o">)</span>
<span class="linenos"> 960</span><span class="w">   </span><span class="o">(</span>orelse<span class="w"> </span><span class="c">/* Hypothesis not moved to front */</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>lforall<span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="nv">N2</span><span class="o">))</span>
<span class="linenos"> 961</span><span class="w">   </span><span class="o">(</span>then<span class="w"> </span>lapply<span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="nv">N1</span><span class="o">))))))).</span>
<span class="linenos"> 962</span>
<span class="linenos"> 963</span>ppptac<span class="w"> </span>(itauteq<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span>(itauteq<span class="w"> </span><span class="nv">N</span><span class="o">).</span>
<span class="linenos"> 964</span>deftac<span class="w"> </span>(itauteq<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span>(then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>eq_reflexive<span class="o">)</span><span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="nv">N</span><span class="o">)).</span>
<span class="linenos"> 965</span>
<span class="linenos"> 966</span><span class="c">/********** inductive predicates package ********/</span>
<span class="linenos"> 967</span>
<span class="linenos"> 968</span>ppptac<span class="w"> </span>monotone<span class="w"> </span>monotone<span class="o">.</span>
<span class="linenos"> 969</span>deftac<span class="w"> </span>monotone<span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="nv">X</span><span class="w"> </span>#<span class="w"> </span><span class="nv">X</span><span class="o">))</span><span class="w"> </span>(<span class="kd">!</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span>h<span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 970</span>deftac<span class="w"> </span>monotone<span class="w"> </span>(seq<span class="w"> </span><span class="kd">[</span>forall<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>impl<span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">G</span><span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="kd">]</span><span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>#<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span><span class="nv">G</span><span class="w"> </span>#<span class="w"> </span><span class="nv">T</span><span class="o">)))</span><span class="w"> </span>(<span class="kd">!</span><span class="w"> </span>apply<span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 971</span>deftac<span class="w"> </span>monotone<span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>and<span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="o">))</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 972</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span>(applyth<span class="w"> </span>and_monotone<span class="o">)</span><span class="w"> </span>monotone<span class="o">.</span>
<span class="linenos"> 973</span>deftac<span class="w"> </span>monotone<span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>or<span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="o">))</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 974</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span>(applyth<span class="w"> </span>or_monotone<span class="o">)</span><span class="w"> </span>monotone<span class="o">.</span>
<span class="linenos"> 975</span>deftac<span class="w"> </span>monotone<span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="o">))</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 976</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span>(applyth<span class="w"> </span>impl_monotone<span class="o">)</span><span class="w"> </span>monotone<span class="o">.</span>
<span class="linenos"> 977</span>deftac<span class="w"> </span>monotone<span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="o">))</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 978</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>then<span class="w"> </span>(applyth<span class="w"> </span>not_monotone<span class="o">)</span><span class="w"> </span>monotone<span class="o">.</span>
<span class="linenos"> 979</span>deftac<span class="w"> </span>monotone<span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>forall<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="o">))</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 980</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 981</span><span class="w">  </span>then<span class="w"> </span>(conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span>beta_expand<span class="o">)))</span>
<span class="linenos"> 982</span><span class="w">   </span>(then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span>beta_expand<span class="o">)))</span>
<span class="linenos"> 983</span><span class="w">     </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>forall_monotone<span class="o">)</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span>
<span class="linenos"> 984</span><span class="w">       </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>b<span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>b<span class="o">))</span><span class="w"> </span>monotone<span class="o">))))).</span>
<span class="linenos"> 985</span>deftac<span class="w"> </span>monotone<span class="w"> </span>(seq<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="o">(</span>impl<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>exists<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="nv">_</span><span class="o">))</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 986</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 987</span><span class="w">  </span>then<span class="w"> </span>(conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span>beta_expand<span class="o">)))</span>
<span class="linenos"> 988</span><span class="w">   </span>(then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span>beta_expand<span class="o">)))</span>
<span class="linenos"> 989</span><span class="w">     </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>exists_monotone<span class="o">)</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span>
<span class="linenos"> 990</span><span class="w">       </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>b<span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>b<span class="o">))</span><span class="w"> </span>monotone<span class="o">))))).</span>
<span class="linenos"> 991</span>
<span class="linenos"> 992</span><span class="c">/* expands &quot;monotone # (lam _ f \ lam _ x \ X f x)&quot; into</span>
<span class="linenos"> 993</span><span class="w">   </span><span class="s2">&quot;! x \ p # x ==&gt; q # x |- X p y ==&gt; X q y&quot;</span>
<span class="linenos"> 994</span><span class="w">   </span>and<span class="w"> </span>then<span class="w"> </span>calls<span class="w"> </span>the<span class="w"> </span>monotone<span class="w"> </span>tactic<span class="w"> </span><span class="kd">*/</span>
<span class="linenos"> 995</span>ppptac<span class="w"> </span>auto_monotone<span class="w"> </span>auto_monotone<span class="o">.</span>
<span class="linenos"> 996</span>deftac<span class="w"> </span>auto_monotone<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 997</span><span class="w"> </span><span class="nv">TAC</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos"> 998</span><span class="w">  </span>then<span class="w"> </span>(conv<span class="w"> </span>dd<span class="o">)</span>
<span class="linenos"> 999</span><span class="w">   </span>(then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span>q<span class="w"> </span><span class="err">\</span>
<span class="linenos">1000</span><span class="w">     </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>dd<span class="o">))</span>
<span class="linenos">1001</span><span class="w">      </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>in<span class="kd">]</span><span class="o">))))</span>
<span class="linenos">1002</span><span class="w">        </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>in<span class="kd">]</span><span class="o">))))</span>
<span class="linenos">1003</span><span class="w">          </span><span class="o">(</span>then<span class="w"> </span>i
<span class="linenos">1004</span><span class="w">            </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>dd<span class="o">)</span>
<span class="linenos">1005</span><span class="w">              </span><span class="o">(</span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span>
<span class="linenos">1006</span><span class="w">                </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>dd<span class="o">))</span>
<span class="linenos">1007</span><span class="w">                  </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span>dd<span class="o">))</span>
<span class="linenos">1008</span><span class="w">                    </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>rator_tac<span class="w"> </span>b<span class="o">)))</span>
<span class="linenos">1009</span><span class="w">                      </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>b<span class="o">))</span>
<span class="linenos">1010</span><span class="w">                        </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span><span class="o">(</span>rator_tac<span class="w"> </span>b<span class="o">)))</span>
<span class="linenos">1011</span><span class="w">                          </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span>b<span class="o">))</span>
<span class="linenos">1012</span><span class="w">                            </span>monotone<span class="o">)))))))))))))))).</span>
<span class="linenos">1013</span>
<span class="linenos">1014</span><span class="c">/********** the library ********/</span>
<span class="linenos">1015</span>
<span class="linenos">1016</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>the_library<span class="w"> </span><span class="nv">L</span><span class="kd">,</span><span class="w"> </span>append<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">[</span>stop<span class="kd">]</span><span class="w"> </span><span class="nv">Lstop</span><span class="kd">,</span><span class="w"> </span>check<span class="w"> </span><span class="nv">Lstop</span><span class="o">.</span>
<span class="linenos">1017</span>
<span class="linenos">1018</span>go<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>the_library<span class="w"> </span><span class="nv">L</span><span class="kd">,</span><span class="w"> </span>check<span class="w"> </span><span class="nv">L</span><span class="o">.</span>
<span class="linenos">1019</span>
<span class="linenos">1020</span>the_library<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">1021</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos">1022</span><span class="w">  </span><span class="kd">[</span><span class="w"> </span><span class="c">/******** Primivite operators hard-coded in the kernel ******/</span>
<span class="linenos">1023</span><span class="w">  </span><span class="c">% decl eq (pi A \ A --&gt; A --&gt; prop)</span>
<span class="linenos">1024</span>
<span class="linenos">1025</span><span class="w">  </span><span class="c">/********** Axiomatization of choice over types ********/</span>
<span class="linenos">1026</span><span class="w">    </span>decl<span class="w"> </span>choose<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="nv">A</span><span class="o">)</span>
<span class="linenos">1027</span>
<span class="linenos">1028</span><span class="w">  </span><span class="c">/*********** Connectives and quantifiers ********/</span>
<span class="linenos">1029</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>tt<span class="w"> </span>(prop<span class="kd">,</span><span class="o">((</span>lam<span class="w"> </span>prop<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span>lam<span class="w"> </span>prop<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>x<span class="o">)))</span>
<span class="linenos">1030</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>forall<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="o">((</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1031</span><span class="w">     </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span>f<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">A</span><span class="w"> </span>g<span class="w"> </span><span class="err">\</span><span class="w"> </span>tt<span class="o">)))</span>
<span class="linenos">1032</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>ff<span class="w"> </span>(prop<span class="kd">,</span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>x<span class="o">))</span>
<span class="linenos">1033</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>and<span class="w"> </span>(<span class="o">(</span>prop<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1034</span><span class="w">     </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>y<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span>prop<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span>#<span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>tt<span class="w"> </span>#<span class="w"> </span>tt<span class="o">)))</span>
<span class="linenos">1035</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>impl<span class="w"> </span>(<span class="o">(</span>prop<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="kd">,</span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span>a<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>b<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>a<span class="o">))</span>
<span class="linenos">1036</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>exists<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="o">((</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1037</span><span class="w">     </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>c<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>a<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>c<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>c<span class="o">))</span>
<span class="linenos">1038</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>not<span class="w"> </span>(<span class="o">(</span>prop<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="kd">,</span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>ff<span class="o">))</span>
<span class="linenos">1039</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>or<span class="w"> </span>(<span class="o">(</span>prop<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1040</span><span class="w">     </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>y<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>c<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>c<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>y<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>c<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>c<span class="o">))</span>
<span class="linenos">1041</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>tt_intro<span class="w"> </span>(tt<span class="kd">,[</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>dd<span class="o">)</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>k<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x12<span class="w"> </span><span class="err">\</span><span class="w"> </span>r<span class="o">))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1042</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>ff_elim<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span>ff<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>p<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1043</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span><span class="nv">x3\</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>dd<span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span>forall_e<span class="o">))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1044</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>sym<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>q<span class="w"> </span><span class="err">\</span><span class="w"> </span>p<span class="w"> </span><span class="kd">=</span><span class="w"> </span>q<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>q<span class="w"> </span><span class="kd">=</span><span class="w"> </span>p<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1045</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos">1046</span><span class="w">     </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x12<span class="w"> </span><span class="err">\</span>
<span class="linenos">1047</span><span class="w">       </span>then<span class="w"> </span>forall_i
<span class="linenos">1048</span><span class="w">        </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span>
<span class="linenos">1049</span><span class="w">          </span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>sym<span class="w"> </span>h<span class="o">)))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1050</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>not_e<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span>not<span class="w"> </span>#<span class="w"> </span>p<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>p<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>ff<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1051</span><span class="w">     </span><span class="kd">[</span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x3<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>dd<span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span>h<span class="o">))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1052</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>conj<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>q<span class="w"> </span><span class="err">\</span><span class="w"> </span>p<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>q<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>p<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>q<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1053</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos">1054</span><span class="w">     </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x12<span class="w"> </span><span class="err">\</span>
<span class="linenos">1055</span><span class="w">      </span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>conj<span class="w"> </span>h<span class="o">))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1056</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>andl<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>q<span class="w"> </span><span class="err">\</span><span class="w"> </span>p<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>q<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>p<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1057</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos">1058</span><span class="w">     </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x12<span class="w"> </span><span class="err">\</span>
<span class="linenos">1059</span><span class="w">      </span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>andl<span class="w"> </span>x13<span class="o">)</span><span class="w"> </span>h<span class="o">)))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1060</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>andr<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>q<span class="w"> </span><span class="err">\</span><span class="w"> </span>p<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>q<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>q<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1061</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos">1062</span><span class="w">     </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x12<span class="w"> </span><span class="err">\</span>
<span class="linenos">1063</span><span class="w">      </span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>andr<span class="w"> </span>x12<span class="o">)</span><span class="w"> </span>h<span class="o">)))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1064</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>and_e<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>q<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>c<span class="w"> </span><span class="err">\</span><span class="w"> </span>p<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>q<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>p<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>q<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>c<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>c<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1065</span><span class="w">     </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos">1066</span><span class="w">       </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x12<span class="w"> </span><span class="err">\</span>
<span class="linenos">1067</span><span class="w">         </span>then<span class="w"> </span>forall_i
<span class="linenos">1068</span><span class="w">          </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span>
<span class="linenos">1069</span><span class="w">            </span>then<span class="w"> </span>forall_i
<span class="linenos">1070</span><span class="w">             </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>thenl<span class="w"> </span>apply<span class="w"> </span><span class="kd">[</span>andl<span class="kd">,</span><span class="w"> </span>andr<span class="kd">]</span><span class="o">)))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1071</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>not_i<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>p<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>ff<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>not<span class="w"> </span>#<span class="w"> </span>p<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1072</span><span class="w">     </span><span class="kd">[</span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x2<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>dd<span class="o">)</span><span class="w"> </span>h<span class="o">))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1073</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>orl<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>q<span class="w"> </span><span class="err">\</span><span class="w"> </span>p<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>p<span class="w"> </span><span class="kd">||</span><span class="w"> </span>q<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1074</span><span class="w">      </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos">1075</span><span class="w">        </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x12<span class="w"> </span><span class="err">\</span>
<span class="linenos">1076</span><span class="w">          </span>then<span class="w"> </span>forall_i
<span class="linenos">1077</span><span class="w">           </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span>
<span class="linenos">1078</span><span class="w">             </span>then<span class="w"> </span>i
<span class="linenos">1079</span><span class="w">              </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>dd<span class="o">)</span>
<span class="linenos">1080</span><span class="w">                </span><span class="o">(</span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>apply<span class="w"> </span>h<span class="o">)))))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1081</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>orr<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>q<span class="w"> </span><span class="err">\</span><span class="w"> </span>q<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>p<span class="w"> </span><span class="kd">||</span><span class="w"> </span>q<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1082</span><span class="w">      </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos">1083</span><span class="w">        </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x12<span class="w"> </span><span class="err">\</span>
<span class="linenos">1084</span><span class="w">          </span>then<span class="w"> </span>forall_i
<span class="linenos">1085</span><span class="w">           </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span>
<span class="linenos">1086</span><span class="w">             </span>then<span class="w"> </span>i
<span class="linenos">1087</span><span class="w">              </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>dd<span class="o">)</span>
<span class="linenos">1088</span><span class="w">                </span><span class="o">(</span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>apply<span class="w"> </span>h<span class="o">)))))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1089</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>or_e<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>q<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>c<span class="w"> </span><span class="err">\</span><span class="w"> </span>p<span class="w"> </span><span class="kd">||</span><span class="w"> </span>q<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>p<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>c<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>q<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>c<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>c<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1090</span><span class="w">     </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos">1091</span><span class="w">       </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x12<span class="w"> </span><span class="err">\</span>
<span class="linenos">1092</span><span class="w">         </span>then<span class="w"> </span>forall_i
<span class="linenos">1093</span><span class="w">          </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span>
<span class="linenos">1094</span><span class="w">            </span>then<span class="w"> </span>forall_i
<span class="linenos">1095</span><span class="w">             </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>dd<span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span>forall_e<span class="o">))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1096</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>exists_e<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">T </span>\
<span class="linenos">1097</span><span class="w">     </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>exists<span class="w"> </span>##<span class="w"> </span><span class="nv">T</span><span class="w"> </span>#<span class="w"> </span>f<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>c<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>c<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>c<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1098</span><span class="w">     </span><span class="kd">[</span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="o">(</span><span class="nv">T</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>x12<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>dd<span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span>h<span class="o">))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1099</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>exists_i<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">T </span>\<span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>w<span class="w"> </span><span class="err">\</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>w<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>exists<span class="w"> </span>##<span class="w"> </span><span class="nv">T</span><span class="w"> </span>#<span class="w"> </span>f<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1100</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos">1101</span><span class="w">     </span><span class="o">(</span>bind<span class="w"> </span><span class="o">(</span><span class="nv">T</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>x12<span class="w"> </span><span class="err">\</span>
<span class="linenos">1102</span><span class="w">       </span>then<span class="w"> </span>forall_i
<span class="linenos">1103</span><span class="w">        </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">T</span><span class="w"> </span>x13<span class="w"> </span><span class="err">\</span>
<span class="linenos">1104</span><span class="w">          </span>then<span class="w"> </span>i
<span class="linenos">1105</span><span class="w">           </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>dd<span class="o">)</span>
<span class="linenos">1106</span><span class="w">             </span><span class="o">(</span>then<span class="w"> </span>forall_i
<span class="linenos">1107</span><span class="w">               </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span>x13<span class="o">)</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>apply<span class="w"> </span>h<span class="o">)))))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1108</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>eq_to_impl
<span class="linenos">1109</span><span class="w">     </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>x13<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>x13<span class="w"> </span><span class="kd">=</span><span class="w"> </span>x14<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">((</span>x13<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x14<span class="o">)</span><span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span><span class="o">(</span>x14<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x13<span class="o">)))</span><span class="kd">,</span>
<span class="linenos">1110</span><span class="w">     </span><span class="kd">[</span>thenl<span class="w"> </span>inv<span class="w"> </span><span class="kd">[</span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span><span class="w"> </span>bind<span class="w"> </span>prop<span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>sym<span class="w"> </span>h<span class="o">))</span><span class="w"> </span>h<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1111</span><span class="w">       </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span><span class="w"> </span>bind<span class="w"> </span>prop<span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>h<span class="o">)</span><span class="w"> </span>h<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1112</span><span class="w">       </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span><span class="w"> </span>bind<span class="w"> </span>prop<span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span>itaut<span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">1113</span><span class="w">       </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span><span class="w"> </span>bind<span class="w"> </span>prop<span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span>itaut<span class="w"> </span><span class="mi">2</span><span class="o">)</span><span class="kd">]]</span><span class="o">)</span>
<span class="linenos">1114</span>
<span class="linenos">1115</span><span class="w"> </span><span class="c">/*********** Axiomatization of disjoint union ********/</span>
<span class="linenos">1116</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>decl<span class="w"> </span>inj1_disj_union<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>disj_union<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span>
<span class="linenos">1117</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>decl<span class="w"> </span>inj2_disj_union<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>disj_union<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span>
<span class="linenos">1118</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>decl<span class="w"> </span>case_disj_union<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">C </span>\<span class="w"> </span>disj_union<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span>
<span class="linenos">1119</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>axiom<span class="w"> </span>case_disj_union_inj1<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">C </span>\<span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>e1<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>e2<span class="w">  </span><span class="err">\</span>
<span class="linenos">1120</span><span class="w">    </span>case_disj_union<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>##<span class="w"> </span><span class="nv">C</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>inj1_disj_union<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>b<span class="o">)</span><span class="w"> </span>#<span class="w"> </span>e1<span class="w"> </span>#<span class="w"> </span>e2<span class="w"> </span><span class="kd">=</span><span class="w"> </span>e1<span class="w"> </span>#<span class="w"> </span>b<span class="o">))</span>
<span class="linenos">1121</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>axiom<span class="w"> </span>case_disj_union_inj2<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">C </span>\<span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>e1<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>e2<span class="w">  </span><span class="err">\</span>
<span class="linenos">1122</span><span class="w">    </span>case_disj_union<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>##<span class="w"> </span><span class="nv">C</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>inj2_disj_union<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>b<span class="o">)</span><span class="w"> </span>#<span class="w"> </span>e1<span class="w"> </span>#<span class="w"> </span>e2<span class="w"> </span><span class="kd">=</span><span class="w"> </span>e2<span class="w"> </span>#<span class="w"> </span>b<span class="o">))</span>
<span class="linenos">1123</span>
<span class="linenos">1124</span><span class="w"> </span><span class="c">/*********** Axiomatization of the universe ********/</span>
<span class="linenos">1125</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>decl<span class="w"> </span>injection_univ<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span>
<span class="linenos">1126</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>decl<span class="w"> </span>ejection_univ<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span>
<span class="linenos">1127</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>decl<span class="w"> </span>inject_limit_univ<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span>
<span class="linenos">1128</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>decl<span class="w"> </span>eject_limit_univ<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">))</span>
<span class="linenos">1129</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>decl<span class="w"> </span>pair_univ<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span>
<span class="linenos">1130</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>decl<span class="w"> </span>proj1_univ<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span>
<span class="linenos">1131</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>decl<span class="w"> </span>proj2_univ<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span>
<span class="linenos">1132</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>decl<span class="w"> </span>inj1_univ<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span>
<span class="linenos">1133</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>decl<span class="w"> </span>inj2_univ<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span>
<span class="linenos">1134</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>decl<span class="w"> </span>case_univ<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">C </span>\<span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span>
<span class="linenos">1135</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>axiom<span class="w"> </span>ejection_injection_univ<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\
<span class="linenos">1136</span><span class="w">    </span><span class="kd">!</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span>ejection_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>injection_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>p<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>p<span class="o">)</span>
<span class="linenos">1137</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>axiom<span class="w"> </span>eject_inject_limit_univ<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\
<span class="linenos">1138</span><span class="w">    </span><span class="kd">!</span><span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span>eject_limit_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>inject_limit_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>p<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>p<span class="o">)</span>
<span class="linenos">1139</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>axiom<span class="w"> </span>proj1_pair_univ<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="kd">!</span><span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>p1<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>p2<span class="w"> </span><span class="err">\</span>
<span class="linenos">1140</span><span class="w">    </span>proj1_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>pair_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>p1<span class="w"> </span>#<span class="w"> </span>p2<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>p1<span class="o">)</span>
<span class="linenos">1141</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>axiom<span class="w"> </span>proj2_pair_univ<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="kd">!</span><span class="w"> </span>p1<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>p2<span class="w"> </span><span class="err">\</span>
<span class="linenos">1142</span><span class="w">    </span>proj2_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>pair_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>p1<span class="w"> </span>#<span class="w"> </span>p2<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>p2<span class="o">)</span>
<span class="linenos">1143</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>axiom<span class="w"> </span>case_univ_inj1<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">C </span>\<span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>e1<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>e2<span class="w">  </span><span class="err">\</span>
<span class="linenos">1144</span><span class="w">    </span>case_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>##<span class="w"> </span><span class="nv">C</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>inj1_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>b<span class="o">)</span><span class="w"> </span>#<span class="w"> </span>e1<span class="w"> </span>#<span class="w"> </span>e2<span class="w"> </span><span class="kd">=</span><span class="w"> </span>e1<span class="w"> </span>#<span class="w"> </span>b<span class="o">))</span>
<span class="linenos">1145</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>axiom<span class="w"> </span>case_univ_inj2<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">C </span>\<span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span>e1<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>e2<span class="w"> </span><span class="err">\</span>
<span class="linenos">1146</span><span class="w">    </span>case_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>##<span class="w"> </span><span class="nv">C</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>inj2_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>b<span class="o">)</span><span class="w"> </span>#<span class="w"> </span>e1<span class="w"> </span>#<span class="w"> </span>e2<span class="w"> </span><span class="kd">=</span><span class="w"> </span>e2<span class="w"> </span>#<span class="w"> </span>b<span class="o">))</span>
<span class="linenos">1147</span>
<span class="linenos">1148</span><span class="w"> </span><span class="c">/******************* Equality *****************/</span>
<span class="linenos">1149</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>eq_reflexive<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="o">((</span><span class="kd">!</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span>a<span class="w"> </span><span class="kd">=</span><span class="w"> </span>a<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1150</span><span class="w">   </span><span class="kd">[</span><span class="w"> </span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>r<span class="o">)</span><span class="w"> </span><span class="kd">]</span><span class="o">))</span>
<span class="linenos">1151</span>
<span class="linenos">1152</span><span class="w"> </span><span class="c">/******************* Logic *****************/</span>
<span class="linenos">1153</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>or_commutative<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span>a<span class="w"> </span><span class="kd">||</span><span class="w"> </span>b<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>b<span class="w"> </span><span class="kd">||</span><span class="w"> </span>a<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1154</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">1</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1155</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>or_ff<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span>a<span class="w"> </span><span class="kd">||</span><span class="w"> </span>ff<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>a<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1156</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">1</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1157</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>or_tt<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span>a<span class="w"> </span><span class="kd">||</span><span class="w"> </span>tt<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>tt<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1158</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">1</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1159</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>or_idempotent<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span>a<span class="w"> </span><span class="kd">||</span><span class="w"> </span>a<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>a<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1160</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">1</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1161</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>or_associative<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>c<span class="w"> </span><span class="err">\</span><span class="w"> </span>a<span class="w"> </span><span class="kd">||</span><span class="w"> </span><span class="o">(</span>b<span class="w"> </span><span class="kd">||</span><span class="w"> </span>c<span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span><span class="o">(</span>a<span class="w"> </span><span class="kd">||</span><span class="w"> </span>b<span class="o">)</span><span class="w"> </span><span class="kd">||</span><span class="w"> </span>c<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1162</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">1</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1163</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>and_commutative<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span>a<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>b<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>b<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>a<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1164</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">1</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1165</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>and_tt<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span>a<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>tt<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>a<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1166</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">1</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1167</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>and_ff<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span>a<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>ff<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>ff<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1168</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">1</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1169</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>and_idempotent<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span>a<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>a<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>a<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1170</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">1</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1171</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>and_associative<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>c<span class="w"> </span><span class="err">\</span><span class="w"> </span>a<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span><span class="o">(</span>b<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>c<span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span><span class="o">(</span>a<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>b<span class="o">)</span><span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>c<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1172</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">1</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1173</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>and_or<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>c<span class="w"> </span><span class="err">\</span><span class="w"> </span>a<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span><span class="o">(</span>b<span class="w"> </span><span class="kd">||</span><span class="w"> </span>c<span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span><span class="o">(</span>a<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>b<span class="o">)</span><span class="w"> </span><span class="kd">||</span><span class="w"> </span><span class="o">(</span>a<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>c<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1174</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">1</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1175</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>or_and<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>c<span class="w"> </span><span class="err">\</span><span class="w"> </span>a<span class="w"> </span><span class="kd">||</span><span class="w"> </span><span class="o">(</span>b<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>c<span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span><span class="o">(</span>a<span class="w"> </span><span class="kd">||</span><span class="w"> </span>b<span class="o">)</span><span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span><span class="o">(</span>a<span class="w"> </span><span class="kd">||</span><span class="w"> </span>c<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1176</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">1</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1177</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>ads_or_and<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>a<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>b<span class="o">)</span><span class="w"> </span><span class="kd">||</span><span class="w"> </span>b<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>b<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1178</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">1</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1179</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>ads_and_or<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>a<span class="w"> </span><span class="kd">||</span><span class="w"> </span>b<span class="o">)</span><span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>b<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>b<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1180</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">1</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1181</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>not_or<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span>not<span class="w"> </span>#<span class="w"> </span>a<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>not<span class="w"> </span>#<span class="w"> </span>b<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>not<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>a<span class="w"> </span><span class="kd">||</span><span class="w"> </span>b<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1182</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">2</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1183</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>not_and<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span>not<span class="w"> </span>#<span class="w"> </span>a<span class="w"> </span><span class="kd">||</span><span class="w"> </span>not<span class="w"> </span>#<span class="w"> </span>b<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>not<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>a<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>b<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1184</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">2</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1185</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>not_not_not<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span>not<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span>p<span class="o">))</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>not<span class="w"> </span>#<span class="w"> </span>p<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1186</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">3</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1187</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>impl_not_not<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>a<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>b<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span>b<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>not<span class="w"> </span>#<span class="w"> </span>a<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1188</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">3</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1189</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>eq_to_impl_f<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>q<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>p<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>q<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>p<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>q<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1190</span><span class="w">    </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">2</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1191</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>eq_to_impl_b<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>q<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>p<span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>q<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>q<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>p<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1192</span><span class="w">    </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">2</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1193</span>
<span class="linenos">1194</span><span class="c">/*************** Properties inj/disj/univ ***********/</span>
<span class="linenos">1195</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>pair_univ_inj_l<span class="w"> </span>
<span class="linenos">1196</span><span class="w">   </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x20<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x21<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x22<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x23<span class="w"> </span><span class="err">\</span><span class="w"> </span>pair_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x20<span class="w"> </span>#<span class="w"> </span>x22<span class="w"> </span><span class="kd">=</span><span class="w"> </span>pair_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x21<span class="w"> </span>#<span class="w"> </span>x23<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x20<span class="w"> </span><span class="kd">=</span><span class="w"> </span>x21<span class="o">)</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">1197</span><span class="w">   </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>repeat<span class="w"> </span>forall_i<span class="o">)</span>
<span class="linenos">1198</span><span class="w">     </span><span class="o">(</span>bind<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x22<span class="w"> </span><span class="err">\</span>
<span class="linenos">1199</span><span class="w">       </span>bind<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x23<span class="w"> </span><span class="err">\</span>
<span class="linenos">1200</span><span class="w">        </span>bind<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x24<span class="w"> </span><span class="err">\</span>
<span class="linenos">1201</span><span class="w">         </span>bind<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x25<span class="w"> </span><span class="err">\</span>
<span class="linenos">1202</span><span class="w">          </span>then<span class="w"> </span>i
<span class="linenos">1203</span><span class="w">           </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>proj1_pair_univ<span class="o">)</span>
<span class="linenos">1204</span><span class="w">             </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span>x22<span class="o">)</span>
<span class="linenos">1205</span><span class="w">               </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>sym<span class="w"> </span>apply<span class="o">)))</span>
<span class="linenos">1206</span><span class="w">                 </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span><span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>proj1_pair_univ<span class="o">))))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1207</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>pair_univ_inj_r<span class="w"> </span>
<span class="linenos">1208</span><span class="w">   </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x20<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x21<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x22<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x23<span class="w"> </span><span class="err">\</span><span class="w"> </span>pair_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x20<span class="w"> </span>#<span class="w"> </span>x22<span class="w"> </span><span class="kd">=</span><span class="w"> </span>pair_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x21<span class="w"> </span>#<span class="w"> </span>x23<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x22<span class="w"> </span><span class="kd">=</span><span class="w"> </span>x23<span class="o">)</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">1209</span><span class="w">   </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>repeat<span class="w"> </span>forall_i<span class="o">)</span>
<span class="linenos">1210</span><span class="w">     </span><span class="o">(</span>bind<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x22<span class="w"> </span><span class="err">\</span>
<span class="linenos">1211</span><span class="w">       </span>bind<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x23<span class="w"> </span><span class="err">\</span>
<span class="linenos">1212</span><span class="w">        </span>bind<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x24<span class="w"> </span><span class="err">\</span>
<span class="linenos">1213</span><span class="w">         </span>bind<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x25<span class="w"> </span><span class="err">\</span>
<span class="linenos">1214</span><span class="w">          </span>then<span class="w"> </span>i
<span class="linenos">1215</span><span class="w">           </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>proj2_pair_univ<span class="o">)</span>
<span class="linenos">1216</span><span class="w">             </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span>x22<span class="o">)</span>
<span class="linenos">1217</span><span class="w">               </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>sym<span class="w"> </span>apply<span class="o">)))</span>
<span class="linenos">1218</span><span class="w">                 </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span><span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>proj2_pair_univ<span class="o">))))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1219</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>injection_univ_inj
<span class="linenos">1220</span><span class="w">   </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span>x20<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x21<span class="w"> </span><span class="err">\</span><span class="w"> </span>injection_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x20<span class="w"> </span><span class="kd">=</span><span class="w"> </span>injection_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x21<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x20<span class="w"> </span><span class="kd">=</span><span class="w"> </span>x21<span class="o">)</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">1221</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos">1222</span><span class="w">     </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span>x20<span class="w"> </span><span class="err">\</span>
<span class="linenos">1223</span><span class="w">       </span>then<span class="w"> </span>forall_i
<span class="linenos">1224</span><span class="w">        </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span>x21<span class="w"> </span><span class="err">\</span>
<span class="linenos">1225</span><span class="w">          </span>then<span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>ejection_injection_univ<span class="o">)</span><span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span>x21<span class="o">))</span>
<span class="linenos">1226</span><span class="w">           </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>ejection_injection_univ<span class="o">)</span><span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span>x20<span class="o">))</span>
<span class="linenos">1227</span><span class="w">             </span><span class="o">(</span>then<span class="w"> </span>i
<span class="linenos">1228</span><span class="w">               </span><span class="o">(</span>thenl
<span class="linenos">1229</span><span class="w">                 </span><span class="o">(</span>cut
<span class="linenos">1230</span><span class="w">                   </span><span class="o">(</span>ejection_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>injection_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x20<span class="o">)</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos">1231</span><span class="w">                     </span>ejection_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>injection_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x21<span class="o">)))</span>
<span class="linenos">1232</span><span class="w">                 </span><span class="kd">[</span>thenl
<span class="linenos">1233</span><span class="w">                   </span><span class="o">(</span>cut
<span class="linenos">1234</span><span class="w">                     </span><span class="o">((</span>ejection_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>injection_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x20<span class="o">)</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos">1235</span><span class="w">                        </span>ejection_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>injection_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x21<span class="o">))</span><span class="w"> </span><span class="kd">=</span>
<span class="linenos">1236</span><span class="w">                       </span><span class="o">(</span>x20<span class="w"> </span><span class="kd">=</span><span class="w"> </span>x21<span class="o">)))</span>
<span class="linenos">1237</span><span class="w">                   </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>sym<span class="w"> </span>h<span class="o">)))</span><span class="w"> </span>h<span class="kd">,</span>
<span class="linenos">1238</span><span class="w">                   </span>thenl<span class="w"> </span>c<span class="w"> </span><span class="kd">[</span>thenl<span class="w"> </span>c<span class="w"> </span><span class="kd">[</span>r<span class="kd">,</span><span class="w"> </span>h<span class="kd">],</span><span class="w"> </span>h<span class="kd">]],</span><span class="w"> </span>thenl<span class="w"> </span>c<span class="w"> </span><span class="kd">[</span>r<span class="kd">,</span><span class="w"> </span>h<span class="kd">]]</span><span class="o">)))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1239</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>inj1_univ_inj
<span class="linenos">1240</span><span class="w">   </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x20<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x21<span class="w"> </span><span class="err">\</span><span class="w"> </span>inj1_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x20<span class="w"> </span><span class="kd">=</span><span class="w"> </span>inj1_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x21<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x20<span class="w"> </span><span class="kd">=</span><span class="w"> </span>x21<span class="o">)</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">1241</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>inv
<span class="linenos">1242</span><span class="w">     </span><span class="o">(</span>bind<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x20<span class="w"> </span><span class="err">\</span><span class="w"> </span>bind<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x21<span class="w"> </span><span class="err">\</span>
<span class="linenos">1243</span><span class="w">        </span>thenl<span class="w"> </span><span class="o">(</span>t<span class="w"> </span><span class="o">(</span>case_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>##<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>inj1_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x20<span class="o">)</span><span class="w"> </span>&#39;
<span class="linenos">1244</span><span class="w">             </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x22<span class="w"> </span><span class="err">\</span><span class="w"> </span>x22<span class="o">)</span><span class="w"> </span>&#39;
<span class="linenos">1245</span><span class="w">             </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x22<span class="w"> </span><span class="err">\</span><span class="w"> </span>x22<span class="o">)))</span>
<span class="linenos">1246</span><span class="w">         </span><span class="kd">[</span>then<span class="w"> </span>sym
<span class="linenos">1247</span><span class="w">           </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>case_univ_inj1<span class="o">)))</span>
<span class="linenos">1248</span><span class="w">             </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>b<span class="o">))</span><span class="w"> </span>r<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1249</span><span class="w">         </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span>
<span class="linenos">1250</span><span class="w">          </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>case_univ_inj1<span class="o">)))</span>
<span class="linenos">1251</span><span class="w">            </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>b<span class="o">))</span><span class="w"> </span>r<span class="o">))</span><span class="kd">]</span><span class="o">)</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1252</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>inj2_univ_inj
<span class="linenos">1253</span><span class="w">   </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x22<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x23<span class="w"> </span><span class="err">\</span><span class="w"> </span>inj2_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x22<span class="w"> </span><span class="kd">=</span><span class="w"> </span>inj2_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x23<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x22<span class="w"> </span><span class="kd">=</span><span class="w"> </span>x23<span class="o">)</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">1254</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>inv
<span class="linenos">1255</span><span class="w">     </span><span class="o">(</span>bind<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x20<span class="w"> </span><span class="err">\</span><span class="w"> </span>bind<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x21<span class="w"> </span><span class="err">\</span>
<span class="linenos">1256</span><span class="w">        </span>thenl<span class="w"> </span><span class="o">(</span>t<span class="w"> </span><span class="o">(</span>case_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>##<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>inj2_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x20<span class="o">)</span><span class="w"> </span>&#39;
<span class="linenos">1257</span><span class="w">             </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x22<span class="w"> </span><span class="err">\</span><span class="w"> </span>x22<span class="o">)</span><span class="w"> </span>&#39;
<span class="linenos">1258</span><span class="w">             </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x22<span class="w"> </span><span class="err">\</span><span class="w"> </span>x22<span class="o">)))</span>
<span class="linenos">1259</span><span class="w">         </span><span class="kd">[</span>then<span class="w"> </span>sym
<span class="linenos">1260</span><span class="w">           </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>case_univ_inj2<span class="o">)))</span>
<span class="linenos">1261</span><span class="w">             </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>b<span class="o">))</span><span class="w"> </span>r<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1262</span><span class="w">         </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span>
<span class="linenos">1263</span><span class="w">          </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>case_univ_inj2<span class="o">)))</span>
<span class="linenos">1264</span><span class="w">            </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>b<span class="o">))</span><span class="w"> </span>r<span class="o">))</span><span class="kd">]</span><span class="o">)</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1265</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>not_eq_inj1_inj2_univ<span class="w"> </span>
<span class="linenos">1266</span><span class="w">   </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x22<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x23<span class="w"> </span><span class="err">\</span><span class="w"> </span>inj1_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x22<span class="w"> </span><span class="kd">=</span><span class="w"> </span>inj2_univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x23<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>ff<span class="o">)</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">1267</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>inv
<span class="linenos">1268</span><span class="w">     </span><span class="o">(</span>bind<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x22<span class="w"> </span><span class="err">\</span>
<span class="linenos">1269</span><span class="w">       </span>bind<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x23<span class="w"> </span><span class="err">\</span>
<span class="linenos">1270</span><span class="w">        </span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>case_univ_inj1<span class="o">)</span>
<span class="linenos">1271</span><span class="w">         </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span>x22<span class="o">)</span>
<span class="linenos">1272</span><span class="w">           </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x24<span class="w"> </span><span class="err">\</span><span class="w"> </span>ff<span class="o">))</span>
<span class="linenos">1273</span><span class="w">             </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x24<span class="w"> </span><span class="err">\</span><span class="w"> </span>tt<span class="o">))</span>
<span class="linenos">1274</span><span class="w">               </span><span class="o">(</span>thenl<span class="w"> </span><span class="o">(</span>m<span class="w"> </span><span class="o">((</span>lam<span class="w"> </span><span class="o">(</span>univ<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>x24<span class="w"> </span><span class="err">\</span><span class="w"> </span>ff<span class="o">)</span><span class="w"> </span>#<span class="w"> </span>x22<span class="o">))</span><span class="w"> </span><span class="kd">[</span>b<span class="kd">,</span>
<span class="linenos">1275</span><span class="w">                 </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>sym<span class="w"> </span>h<span class="o">))</span>
<span class="linenos">1276</span><span class="w">                  </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>wl<span class="w"> </span><span class="kd">[]</span><span class="o">)</span>
<span class="linenos">1277</span><span class="w">                    </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span>
<span class="linenos">1278</span><span class="w">                      </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>wl<span class="w"> </span><span class="kd">[]</span><span class="o">)</span>
<span class="linenos">1279</span><span class="w">                        </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>case_univ_inj2<span class="o">))</span>
<span class="linenos">1280</span><span class="w">                          </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>b<span class="o">)</span><span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="mi">1</span><span class="o">))))))</span><span class="kd">]</span><span class="o">)))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1281</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>inj1_disj_union_inj<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\
<span class="linenos">1282</span><span class="w">    </span><span class="o">((</span><span class="kd">!</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>y<span class="w"> </span><span class="err">\</span>
<span class="linenos">1283</span><span class="w">     </span>inj1_disj_union<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span>inj1_disj_union<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>y<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">1284</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>inv
<span class="linenos">1285</span><span class="w">      </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span>x23<span class="w"> </span><span class="err">\</span>
<span class="linenos">1286</span><span class="w">        </span>bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span>x24<span class="w"> </span><span class="err">\</span>
<span class="linenos">1287</span><span class="w">         </span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>case_disj_union_inj1<span class="o">)</span>
<span class="linenos">1288</span><span class="w">          </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span>x23<span class="o">)</span>
<span class="linenos">1289</span><span class="w">            </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">A</span><span class="w"> </span>x25<span class="w"> </span><span class="err">\</span><span class="w"> </span>x25<span class="o">))</span>
<span class="linenos">1290</span><span class="w">              </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">B</span><span class="w"> </span>x25<span class="w"> </span><span class="err">\</span><span class="w"> </span>choose<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="o">))</span>
<span class="linenos">1291</span><span class="w">                </span><span class="o">(</span>thenl<span class="w"> </span><span class="o">(</span>t<span class="w"> </span><span class="o">((</span>lam<span class="w"> </span><span class="nv">A</span><span class="w"> </span>x25<span class="w"> </span><span class="err">\</span><span class="w"> </span>x25<span class="o">)</span><span class="w"> </span>#<span class="w"> </span>x23<span class="o">))</span>
<span class="linenos">1292</span><span class="w">                  </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span>b<span class="o">))</span><span class="w"> </span>r<span class="kd">,</span>
<span class="linenos">1293</span><span class="w">                  </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>sym<span class="w"> </span>h<span class="o">)))</span>
<span class="linenos">1294</span><span class="w">                   </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>wl<span class="w"> </span><span class="kd">[]</span><span class="o">)</span>
<span class="linenos">1295</span><span class="w">                     </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span>
<span class="linenos">1296</span><span class="w">                       </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>wl<span class="w"> </span><span class="kd">[]</span><span class="o">)</span>
<span class="linenos">1297</span><span class="w">                         </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>case_disj_union_inj1<span class="o">)))</span>
<span class="linenos">1298</span><span class="w">                           </span>b<span class="o">))))</span><span class="kd">]</span><span class="o">)))))</span><span class="kd">]</span><span class="o">))</span>
<span class="linenos">1299</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>inj2_disj_union_inj<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\
<span class="linenos">1300</span><span class="w">    </span><span class="o">((</span><span class="kd">!</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>y<span class="w"> </span><span class="err">\</span>
<span class="linenos">1301</span><span class="w">     </span>inj2_disj_union<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span>inj2_disj_union<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>y<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">1302</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>inv
<span class="linenos">1303</span><span class="w">      </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">B</span><span class="w"> </span>x23<span class="w"> </span><span class="err">\</span>
<span class="linenos">1304</span><span class="w">        </span>bind<span class="w"> </span><span class="nv">B</span><span class="w"> </span>x24<span class="w"> </span><span class="err">\</span>
<span class="linenos">1305</span><span class="w">         </span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>case_disj_union_inj2<span class="o">)</span>
<span class="linenos">1306</span><span class="w">          </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span>x23<span class="o">)</span>
<span class="linenos">1307</span><span class="w">            </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">A</span><span class="w"> </span>x25<span class="w"> </span><span class="err">\</span><span class="w"> </span>choose<span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="o">))</span>
<span class="linenos">1308</span><span class="w">              </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">B</span><span class="w"> </span>x25<span class="w"> </span><span class="err">\</span><span class="w"> </span>x25<span class="o">))</span>
<span class="linenos">1309</span><span class="w">                </span><span class="o">(</span>thenl<span class="w"> </span><span class="o">(</span>t<span class="w"> </span><span class="o">((</span>lam<span class="w"> </span><span class="nv">B</span><span class="w"> </span>x25<span class="w"> </span><span class="err">\</span><span class="w"> </span>x25<span class="o">)</span><span class="w"> </span>#<span class="w"> </span>x23<span class="o">))</span>
<span class="linenos">1310</span><span class="w">                  </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span>b<span class="o">))</span><span class="w"> </span>r<span class="kd">,</span>
<span class="linenos">1311</span><span class="w">                  </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>sym<span class="w"> </span>h<span class="o">)))</span>
<span class="linenos">1312</span><span class="w">                   </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>wl<span class="w"> </span><span class="kd">[]</span><span class="o">)</span>
<span class="linenos">1313</span><span class="w">                     </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span>
<span class="linenos">1314</span><span class="w">                       </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>wl<span class="w"> </span><span class="kd">[]</span><span class="o">)</span>
<span class="linenos">1315</span><span class="w">                         </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>case_disj_union_inj2<span class="o">)))</span>
<span class="linenos">1316</span><span class="w">                           </span>b<span class="o">))))</span><span class="kd">]</span><span class="o">)))))</span><span class="kd">]</span><span class="o">))</span>
<span class="linenos">1317</span>
<span class="linenos">1318</span><span class="w"> </span><span class="c">/********** Monotonicity of logical connectives *********/</span>
<span class="linenos">1319</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>and_monotone<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a1<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b1<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>a2<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b2<span class="w"> </span><span class="err">\</span>
<span class="linenos">1320</span><span class="w">    </span><span class="o">(</span>a1<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>b1<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>a2<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>b2<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>a1<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>a2<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>b1<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>b2<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1321</span><span class="w">    </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">2</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1322</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>or_monotone<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a1<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b1<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>a2<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b2<span class="w"> </span><span class="err">\</span>
<span class="linenos">1323</span><span class="w">    </span><span class="o">(</span>a1<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>b1<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>a2<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>b2<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>a1<span class="w"> </span><span class="kd">||</span><span class="w"> </span>a2<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>b1<span class="w"> </span><span class="kd">||</span><span class="w"> </span>b2<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1324</span><span class="w">    </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">2</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1325</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>impl_monotone<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>a1<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b1<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>a2<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>b2<span class="w"> </span><span class="err">\</span>
<span class="linenos">1326</span><span class="w">    </span><span class="o">(</span>b1<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>a1<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>a2<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>b2<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>a1<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>a2<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>b1<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>b2<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1327</span><span class="w">    </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">3</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1328</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>not_monotone<span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>q<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>p<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>q<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span>q<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span>p<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1329</span><span class="w">    </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">3</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1330</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>forall_monotone<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>q<span class="w"> </span><span class="err">\</span>
<span class="linenos">1331</span><span class="w">    </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>p<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>q<span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>p<span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>q<span class="w"> </span>#<span class="w"> </span>x<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1332</span><span class="w">    </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">6</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1333</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>exists_monotone<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>q<span class="w"> </span><span class="err">\</span>
<span class="linenos">1334</span><span class="w">    </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>p<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>q<span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>?<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>p<span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>?<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>q<span class="w"> </span>#<span class="w"> </span>x<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1335</span><span class="w">    </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">6</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1336</span>
<span class="linenos">1337</span><span class="w"> </span><span class="c">/********** Knaster-Tarski theorem *********/</span>
<span class="linenos">1338</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>in<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1339</span><span class="w">     </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">A</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>lam<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>j<span class="w"> </span><span class="err">\</span><span class="w"> </span>j<span class="w"> </span>#<span class="w"> </span>x<span class="o">))</span>
<span class="linenos">1340</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>subseteq<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="o">((</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1341</span><span class="w">     </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>lam<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>y<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>z<span class="w"> </span><span class="err">\</span><span class="w"> </span>z<span class="w"> </span>#in<span class="w"> </span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>z<span class="w"> </span>#in<span class="w"> </span>y<span class="o">))</span>
<span class="linenos">1342</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>in_subseteq<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span>
<span class="linenos">1343</span><span class="w">     </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>s<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>t<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>s<span class="w"> </span><span class="kd">&lt;&lt;=</span><span class="w"> </span>t<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x<span class="w"> </span>#in<span class="w"> </span>s<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x<span class="w"> </span>#in<span class="w"> </span>t<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1344</span><span class="w">     </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos">1345</span><span class="w">       </span><span class="o">(</span>bind<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>x9<span class="w"> </span><span class="err">\</span>
<span class="linenos">1346</span><span class="w">         </span>then<span class="w"> </span>forall_i
<span class="linenos">1347</span><span class="w">          </span><span class="o">(</span>bind<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>x10<span class="w"> </span><span class="err">\</span>
<span class="linenos">1348</span><span class="w">            </span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span>x11<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>dd<span class="o">))</span><span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="mi">4</span><span class="o">))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1349</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>monotone<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="o">(((</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">))</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1350</span><span class="w">      </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span><span class="nv">_</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>y<span class="w"> </span><span class="err">\</span><span class="w"> </span>x<span class="w"> </span><span class="kd">&lt;&lt;=</span><span class="w"> </span>y<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span><span class="kd">&lt;&lt;=</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>y<span class="o">))</span>
<span class="linenos">1351</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>is_fixpoint<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="o">(((</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">))</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">((</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1352</span><span class="w">     </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span><span class="nv">_</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span>lam<span class="w"> </span><span class="o">(</span><span class="nv">_</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>f<span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">&lt;&lt;=</span><span class="w"> </span>x<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>x<span class="w"> </span><span class="kd">&lt;&lt;=</span><span class="w"> </span><span class="o">(</span>f<span class="w"> </span>#<span class="w"> </span>x<span class="o">)))</span>
<span class="linenos">1353</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>fixpoint<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="o">(((</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">))</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1354</span><span class="w">     </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span><span class="nv">_</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">A</span><span class="w"> </span>a<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>e<span class="w"> </span><span class="err">\</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>e<span class="w"> </span><span class="kd">&lt;&lt;=</span><span class="w"> </span>e<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>a<span class="w"> </span>#in<span class="w"> </span>e<span class="o">))</span>
<span class="linenos">1355</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>fixpoint_subseteq_any_prefixpoint<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\
<span class="linenos">1356</span><span class="w">     </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span><span class="nv">x\</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span><span class="kd">&lt;&lt;=</span><span class="w"> </span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>fixpoint<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>f<span class="w"> </span><span class="kd">&lt;&lt;=</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1357</span><span class="w">     </span><span class="kd">[</span>then<span class="w"> </span>inv
<span class="linenos">1358</span><span class="w">       </span><span class="o">(</span>bind<span class="w"> </span><span class="o">((</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">))</span><span class="w"> </span>x9<span class="w"> </span><span class="err">\</span>
<span class="linenos">1359</span><span class="w">         </span><span class="o">(</span>bind<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>x10<span class="w"> </span><span class="err">\</span>
<span class="linenos">1360</span><span class="w">           </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>dd<span class="o">))</span>
<span class="linenos">1361</span><span class="w">            </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>dd<span class="o">)</span>
<span class="linenos">1362</span><span class="w">              </span><span class="o">(</span>then<span class="w"> </span>forall_i
<span class="linenos">1363</span><span class="w">                </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span>x11<span class="w"> </span><span class="err">\</span>
<span class="linenos">1364</span><span class="w">                  </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>dd<span class="o">))</span>
<span class="linenos">1365</span><span class="w">                   </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>b<span class="o">))</span><span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="mi">4</span><span class="o">)))))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1366</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>fixpoint_subseteq_any_fixpoint<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\
<span class="linenos">1367</span><span class="w">     </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span><span class="nv">x\</span><span class="w"> </span>is_fixpoint<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>fixpoint<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>f<span class="w"> </span><span class="kd">&lt;&lt;=</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1368</span><span class="w">     </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos">1369</span><span class="w">       </span><span class="o">(</span>bind<span class="w"> </span><span class="o">((</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">))</span><span class="w"> </span>x9<span class="w"> </span><span class="err">\</span>
<span class="linenos">1370</span><span class="w">         </span>then<span class="w"> </span>forall_i
<span class="linenos">1371</span><span class="w">          </span><span class="o">(</span>bind<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>x10<span class="w"> </span><span class="err">\</span>
<span class="linenos">1372</span><span class="w">            </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>dd<span class="o">))</span>
<span class="linenos">1373</span><span class="w">             </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>fixpoint_subseteq_any_prefixpoint<span class="o">)</span><span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="mi">8</span><span class="o">))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1374</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>prefixpoint_to_prefixpoint<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\
<span class="linenos">1375</span><span class="w">     </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>monotone<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>f<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span><span class="kd">&lt;&lt;=</span><span class="w"> </span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>f<span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">&lt;&lt;=</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1376</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos">1377</span><span class="w">      </span><span class="o">(</span>bind<span class="w"> </span><span class="o">((</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">))</span><span class="w"> </span>x9<span class="w"> </span><span class="err">\</span>
<span class="linenos">1378</span><span class="w">        </span>then<span class="w"> </span>forall_i
<span class="linenos">1379</span><span class="w">         </span><span class="o">(</span>bind<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>x10<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>dd<span class="o">))</span><span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="mi">6</span><span class="o">)))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1380</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>fixpoint_is_prefixpoint<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\
<span class="linenos">1381</span><span class="w">     </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span>monotone<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>f<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>fixpoint<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>f<span class="o">)</span><span class="kd">&lt;&lt;=</span><span class="w"> </span>fixpoint<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>f<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1382</span><span class="w">     </span><span class="kd">[</span>then<span class="w"> </span>inv
<span class="linenos">1383</span><span class="w">       </span><span class="o">(</span>bind<span class="w"> </span><span class="o">((</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">))</span><span class="w"> </span>x9<span class="w"> </span><span class="err">\</span>
<span class="linenos">1384</span><span class="w">         </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>dd<span class="o">)</span>
<span class="linenos">1385</span><span class="w">          </span><span class="o">(</span>then<span class="w"> </span>inv
<span class="linenos">1386</span><span class="w">            </span><span class="o">(</span>bind<span class="w"> </span><span class="nv">A</span><span class="w"> </span>x10<span class="w"> </span><span class="err">\</span>
<span class="linenos">1387</span><span class="w">              </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>fixpoint<span class="kd">]</span><span class="o">)))</span>
<span class="linenos">1388</span><span class="w">               </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>dd<span class="o">)</span>
<span class="linenos">1389</span><span class="w">                 </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>b<span class="o">)</span>
<span class="linenos">1390</span><span class="w">                   </span><span class="o">(</span>then<span class="w"> </span>inv
<span class="linenos">1391</span><span class="w">                     </span><span class="o">(</span>bind<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>x11<span class="w"> </span><span class="err">\</span>
<span class="linenos">1392</span><span class="w">                       </span>thenl<span class="w"> </span><span class="o">(</span>cut<span class="w"> </span><span class="o">(</span>fixpoint<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>x9<span class="w"> </span><span class="kd">&lt;&lt;=</span><span class="w"> </span>x11<span class="o">))</span>
<span class="linenos">1393</span><span class="w">                        </span><span class="kd">[</span>thenl
<span class="linenos">1394</span><span class="w">                          </span><span class="o">(</span>cut<span class="w"> </span><span class="o">(</span>x9<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>fixpoint<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>x9<span class="o">)</span><span class="w"> </span><span class="kd">&lt;&lt;=</span><span class="w"> </span>x9<span class="w"> </span>#<span class="w"> </span>x11<span class="o">))</span>
<span class="linenos">1395</span><span class="w">                          </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>in_subseteq<span class="o">)</span>
<span class="linenos">1396</span><span class="w">                            </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall_last<span class="w"> </span><span class="o">(</span>x9<span class="w"> </span>#<span class="w"> </span>x11<span class="o">))</span>
<span class="linenos">1397</span><span class="w">                              </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall_last<span class="w"> </span>x11<span class="o">)</span>
<span class="linenos">1398</span><span class="w">                                </span><span class="o">(</span>thenl<span class="w"> </span>apply_last<span class="w"> </span><span class="kd">[</span>h<span class="kd">,</span>
<span class="linenos">1399</span><span class="w">                                  </span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>in_subseteq<span class="o">)</span><span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="mi">10</span><span class="o">)</span><span class="kd">]</span><span class="o">)))</span><span class="kd">,</span>
<span class="linenos">1400</span><span class="w">                          </span>thenl
<span class="linenos">1401</span><span class="w">                           </span><span class="o">(</span>m<span class="w"> </span><span class="o">(</span>monotone<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>x9<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x9<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>fixpoint<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>x9<span class="o">)</span><span class="w"> </span><span class="kd">&lt;&lt;=</span><span class="w"> </span>x9<span class="w"> </span>#<span class="w"> </span>x11<span class="o">))</span>
<span class="linenos">1402</span><span class="w">                           </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">10</span><span class="kd">,</span><span class="w"> </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>dd<span class="o">))</span><span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="mi">10</span><span class="o">)</span><span class="kd">]],</span>
<span class="linenos">1403</span><span class="w">                        </span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>fixpoint_subseteq_any_prefixpoint<span class="o">)</span><span class="w"> </span>h<span class="kd">]</span><span class="o">)))))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1404</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>fixpoint_is_fixpoint<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\
<span class="linenos">1405</span><span class="w">    </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span>monotone<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>f<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>is_fixpoint<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>fixpoint<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>f<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1406</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>inv
<span class="linenos">1407</span><span class="w">      </span><span class="o">(</span>bind<span class="w"> </span><span class="o">((</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">))</span><span class="w"> </span>x9<span class="w"> </span><span class="err">\</span>
<span class="linenos">1408</span><span class="w">        </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>is_fixpoint<span class="kd">]</span><span class="o">)))</span>
<span class="linenos">1409</span><span class="w">         </span><span class="o">(</span>thenl<span class="w"> </span>inv<span class="w"> </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>fixpoint_is_prefixpoint<span class="o">)</span><span class="w"> </span>h<span class="kd">,</span>
<span class="linenos">1410</span><span class="w">           </span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>fixpoint_subseteq_any_prefixpoint<span class="o">)</span>
<span class="linenos">1411</span><span class="w">            </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>g<span class="w"> </span><span class="o">(</span>monotone<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>x9<span class="o">))</span>
<span class="linenos">1412</span><span class="w">              </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span>dd<span class="o">))</span>
<span class="linenos">1413</span><span class="w">                </span><span class="o">(</span>then<span class="w"> </span>inv
<span class="linenos">1414</span><span class="w">                  </span><span class="o">(</span>then<span class="w"> </span>apply<span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>fixpoint_is_prefixpoint<span class="o">)</span><span class="w"> </span>h<span class="o">)))))</span><span class="kd">]</span><span class="o">))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1415</span>
<span class="linenos">1416</span><span class="w"> </span><span class="c">/*********** Axiomatization of well-founded recursion ********/</span>
<span class="linenos">1417</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>decl<span class="w"> </span>rec<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\<span class="w"> </span><span class="o">((</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">))</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">))</span>
<span class="linenos">1418</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>inductive_def<span class="w"> </span>acc<span class="w"> </span>accF<span class="w"> </span>accF_monotone<span class="w"> </span>acc_i0<span class="w"> </span>acc_e0<span class="w"> </span>acc_e
<span class="linenos">1419</span><span class="w">    </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span>param<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>lt<span class="w"> </span><span class="err">\</span><span class="w"> </span>acc<span class="w"> </span><span class="err">\</span>
<span class="linenos">1420</span><span class="w">     </span><span class="kd">[</span><span class="w"> </span><span class="o">(</span>acc_i<span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>y<span class="w"> </span><span class="err">\</span><span class="w"> </span>lt<span class="w"> </span>#<span class="w"> </span>y<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>acc<span class="w"> </span>#<span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>acc<span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1421</span>
<span class="linenos">1422</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>well_founded<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="o">((</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="kd">,</span>
<span class="linenos">1423</span><span class="w">    </span>lam<span class="w"> </span><span class="o">(</span><span class="nv">_</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>lt<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>acc<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>lt<span class="w"> </span>#<span class="w"> </span>x<span class="o">))</span>
<span class="linenos">1424</span>
<span class="linenos">1425</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>axiom<span class="w"> </span>rec_is_fixpoint<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">A </span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">B </span>\
<span class="linenos">1426</span><span class="w">   </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>lt<span class="w"> </span><span class="err">\</span><span class="w"> </span>well_founded<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>#<span class="w"> </span>lt<span class="w"> </span><span class="kd">==&gt;</span>
<span class="linenos">1427</span><span class="w">    </span><span class="kd">!</span><span class="w"> </span><span class="o">((</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">))</span><span class="w"> </span>h<span class="w"> </span><span class="err">\</span>
<span class="linenos">1428</span><span class="w">     </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>f<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>g<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>i<span class="w"> </span><span class="err">\</span>
<span class="linenos">1429</span><span class="w">       </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span>lt<span class="w"> </span>#<span class="w"> </span>p<span class="w"> </span>#<span class="w"> </span>i<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>p<span class="w"> </span><span class="kd">=</span><span class="w"> </span>g<span class="w"> </span>#<span class="w"> </span>p<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>h<span class="w"> </span>#<span class="w"> </span>f<span class="w"> </span>#<span class="w"> </span>i<span class="w"> </span><span class="kd">=</span><span class="w"> </span>h<span class="w"> </span>#<span class="w"> </span>g<span class="w"> </span>#<span class="w"> </span>i<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span>
<span class="linenos">1430</span><span class="w">     </span>rec<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>h<span class="w"> </span><span class="kd">=</span><span class="w"> </span>h<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>rec<span class="w"> </span>##<span class="w"> </span><span class="nv">A</span><span class="w"> </span>##<span class="w"> </span><span class="nv">B</span><span class="w"> </span>#<span class="w"> </span>h<span class="o">)))</span>
<span class="linenos">1431</span><span class="w"> </span><span class="c">/******************* TESTS *****************/</span>
<span class="linenos">1432</span><span class="w"> </span><span class="c">/* The first three tests are commented out because they require extra-hacks</span>
<span class="linenos">1433</span><span class="w">    </span>in<span class="w"> </span>the<span class="w"> </span>kernel<span class="w"> </span>to<span class="w"> </span>avoid<span class="w"> </span>quantifying<span class="w"> </span>over<span class="w"> </span>p<span class="kd">,</span><span class="w"> </span>q<span class="w"> </span>and<span class="w"> </span>g<span class="o">.</span>
<span class="linenos">1434</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>test_apply<span class="w"> </span>(p<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span>p<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>p<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>q<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>q<span class="kd">,</span>
<span class="linenos">1435</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>apply<span class="w"> </span>h<span class="o">))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1436</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>test_apply2<span class="w"> </span>(p<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>y<span class="w"> </span><span class="err">\</span><span class="w"> </span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>q<span class="kd">,</span>
<span class="linenos">1437</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>apply<span class="w"> </span>h<span class="o">))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1438</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>test_itaut_1<span class="w"> </span>(<span class="o">((</span>?<span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>g<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>y<span class="w"> </span><span class="err">\</span><span class="w"> </span>g<span class="w"> </span>y<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1439</span><span class="w">   </span><span class="kd">[</span>itaut<span class="w"> </span><span class="mi">4</span><span class="kd">]</span><span class="o">)</span><span class="kd">*/</span>
<span class="linenos">1440</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>test_monotone1<span class="w"> </span>(monotone<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>not<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>p<span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>tt<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>p<span class="w"> </span>#<span class="w"> </span>tt<span class="w"> </span><span class="kd">||</span><span class="w"> </span>p<span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1441</span><span class="w">   </span><span class="kd">[</span><span class="w"> </span>auto_monotone<span class="w"> </span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1442</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>test_monotone2<span class="w"> </span>(monotone<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>?<span class="w"> </span>z<span class="w"> </span><span class="err">\</span><span class="w"> </span>not<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>p<span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>tt<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>p<span class="w"> </span>#<span class="w"> </span>tt<span class="w"> </span><span class="kd">||</span><span class="w"> </span>z<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1443</span><span class="w">   </span><span class="kd">[</span><span class="w"> </span>auto_monotone<span class="w"> </span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1444</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>test_monotone3<span class="w"> </span>(monotone<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>p<span class="w"> </span><span class="err">\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>z<span class="w"> </span><span class="err">\</span><span class="w"> </span>?<span class="w"> </span>y<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>p<span class="w"> </span>#<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>z<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span>p<span class="w"> </span>#<span class="w"> </span>y<span class="w"> </span><span class="kd">||</span><span class="w"> </span>y<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1445</span><span class="w">   </span><span class="kd">[</span><span class="w"> </span>auto_monotone<span class="w"> </span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1446</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>inductive_def<span class="w"> </span>pnn<span class="w"> </span>pnnF<span class="w"> </span>pnnF_monotone<span class="w"> </span>pnn_i<span class="w"> </span>pnn_e0<span class="w"> </span>pnn_e<span class="w"> </span>(pnn<span class="w"> </span><span class="err">\</span>
<span class="linenos">1447</span><span class="w">     </span><span class="kd">[</span><span class="w"> </span><span class="o">(</span>pnn_tt<span class="kd">,</span><span class="w"> </span>pnn<span class="w"> </span>#<span class="w"> </span>tt<span class="o">)</span>
<span class="linenos">1448</span><span class="w">     </span><span class="kd">,</span><span class="w"> </span><span class="o">(</span>pnn_not<span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>pnn<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>pnn<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span>x<span class="o">))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1449</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>pnn_e
<span class="linenos">1450</span><span class="w">    </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>x13<span class="w"> </span><span class="err">\</span>
<span class="linenos">1451</span><span class="w">       </span>x13<span class="w"> </span>#<span class="w"> </span>tt<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span>x13<span class="w"> </span>#<span class="w"> </span>x14<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x13<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span>x14<span class="o">))</span><span class="w"> </span><span class="kd">==&gt;</span>
<span class="linenos">1452</span><span class="w">        </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span>pnn<span class="w"> </span>#<span class="w"> </span>x14<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x13<span class="w"> </span>#<span class="w"> </span>x14<span class="o">))</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">1453</span><span class="w">   </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos">1454</span><span class="w">     </span><span class="o">(</span>bind<span class="w"> </span><span class="o">(</span>prop<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>x13<span class="w"> </span><span class="err">\</span>
<span class="linenos">1455</span><span class="w">       </span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>pnn_e0<span class="o">)</span>
<span class="linenos">1456</span><span class="w">        </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span>x13<span class="o">)</span>
<span class="linenos">1457</span><span class="w">          </span><span class="o">(</span>then<span class="w"> </span>i
<span class="linenos">1458</span><span class="w">            </span><span class="o">(</span>thenl<span class="w"> </span>lapply
<span class="linenos">1459</span><span class="w">              </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>pnnF<span class="kd">]</span><span class="o">)))</span>
<span class="linenos">1460</span><span class="w">                </span><span class="o">(</span>then<span class="w"> </span>forall_i
<span class="linenos">1461</span><span class="w">                  </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x14<span class="w"> </span><span class="err">\</span>
<span class="linenos">1462</span><span class="w">                    </span>then<span class="w"> </span>i
<span class="linenos">1463</span><span class="w">                     </span><span class="c">% from now on the proof is ad-hoc + fragile</span>
<span class="linenos">1464</span><span class="w">                     </span><span class="o">(</span>thenl<span class="w"> </span>left<span class="w"> </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span><span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">1465</span><span class="w">                       </span>then<span class="w"> </span>left
<span class="linenos">1466</span><span class="w">                        </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x15<span class="w"> </span><span class="err">\</span>
<span class="linenos">1467</span><span class="w">                          </span>then<span class="w"> </span>left<span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span><span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="mi">8</span><span class="o">)))</span><span class="kd">]</span><span class="o">)))</span><span class="kd">,</span>
<span class="linenos">1468</span><span class="w">              </span>h<span class="kd">]</span><span class="o">))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1469</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>pnn_has_two_values
<span class="linenos">1470</span><span class="w">    </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>x13<span class="w"> </span><span class="err">\</span><span class="w"> </span>pnn<span class="w"> </span>#<span class="w"> </span>x13<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x13<span class="w"> </span><span class="kd">=</span><span class="w"> </span>tt<span class="w"> </span><span class="kd">||</span><span class="w"> </span>x13<span class="w"> </span><span class="kd">=</span><span class="w"> </span>ff<span class="o">)</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">1471</span><span class="w">    </span><span class="c">% applying an elimination principle is hard: it should be automatized</span>
<span class="linenos">1472</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>pnn_e<span class="o">)</span>
<span class="linenos">1473</span><span class="w">      </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span>prop<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span><span class="w"> </span>or<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span>prop<span class="w"> </span>#<span class="w"> </span>x13<span class="w"> </span>#<span class="w"> </span>tt<span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span>prop<span class="w"> </span>#<span class="w"> </span>x13<span class="w"> </span>#<span class="w"> </span>ff<span class="o">)))</span>
<span class="linenos">1474</span><span class="w">        </span><span class="o">(</span>thenl<span class="w"> </span>lapply
<span class="linenos">1475</span><span class="w">          </span><span class="kd">[</span>thenl<span class="w"> </span>conj<span class="w"> </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>b<span class="o">)</span><span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">1476</span><span class="w">            </span>then<span class="w"> </span><span class="o">(</span>repeat<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>b<span class="o">)))</span>
<span class="linenos">1477</span><span class="w">             </span><span class="o">(</span>then<span class="w"> </span>forall_i<span class="w"> </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span><span class="w"> </span>then<span class="w"> </span>i<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>left<span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="mi">8</span><span class="o">))))</span><span class="kd">],</span>
<span class="linenos">1478</span><span class="w">          </span>then<span class="w"> </span>inv
<span class="linenos">1479</span><span class="w">           </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span>
<span class="linenos">1480</span><span class="w">             </span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span>x13<span class="o">)</span>
<span class="linenos">1481</span><span class="w">              </span><span class="o">(</span>thenl<span class="w"> </span>lapply<span class="w"> </span><span class="kd">[</span>h<span class="kd">,</span>
<span class="linenos">1482</span><span class="w">                </span>then
<span class="linenos">1483</span><span class="w">                 </span><span class="o">(</span>g
<span class="linenos">1484</span><span class="w">                   </span><span class="o">((</span>lam<span class="w"> </span>prop<span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span>or<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span>prop<span class="w"> </span>#<span class="w"> </span>x14<span class="w"> </span>#<span class="w"> </span>tt<span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span>prop<span class="w"> </span>#<span class="w"> </span>x14<span class="w"> </span>#<span class="w"> </span>ff<span class="o">))</span><span class="w"> </span>&#39;
<span class="linenos">1485</span><span class="w">                     </span>x13<span class="o">))</span>
<span class="linenos">1486</span><span class="w">                 </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>repeat<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>b<span class="o">)))</span>
<span class="linenos">1487</span><span class="w">                   </span><span class="o">(</span>then
<span class="linenos">1488</span><span class="w">                     </span><span class="o">(</span>w
<span class="linenos">1489</span><span class="w">                       </span><span class="o">((</span>lam<span class="w"> </span>prop<span class="w"> </span>x14<span class="w"> </span><span class="err">\</span><span class="w"> </span>or<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span>prop<span class="w"> </span>#<span class="w"> </span>x14<span class="w"> </span>#<span class="w"> </span>tt<span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span>prop<span class="w"> </span>#<span class="w"> </span>x14<span class="w"> </span>#<span class="w"> </span>ff<span class="o">))</span>
<span class="linenos">1490</span><span class="w">                         </span>#<span class="w"> </span>x13<span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>w<span class="w"> </span><span class="o">(</span>pnn<span class="w"> </span>#<span class="w"> </span>x13<span class="o">))</span><span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="mi">2</span><span class="o">))))</span><span class="kd">]</span><span class="o">))</span><span class="kd">]</span><span class="o">))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1491</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>inductive_def<span class="w"> </span>in_two<span class="w"> </span>in_twoF<span class="w"> </span>in_twoF_monotone<span class="w"> </span>in_two_i<span class="w"> </span>in_two_e0<span class="w"> </span>in_two_e<span class="w"> </span>(in_two<span class="w"> </span><span class="err">\</span>
<span class="linenos">1492</span><span class="w">     </span><span class="kd">[</span><span class="w"> </span><span class="o">(</span>in_two_tt<span class="kd">,</span><span class="w"> </span>in_two<span class="w"> </span>#<span class="w"> </span>tt<span class="o">)</span>
<span class="linenos">1493</span><span class="w">     </span><span class="kd">,</span><span class="w"> </span><span class="o">(</span>in_two_ff<span class="kd">,</span><span class="w"> </span>in_two<span class="w"> </span>#<span class="w"> </span>ff<span class="o">)</span><span class="w"> </span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1494</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>new_basic_type<span class="w"> </span>bool2<span class="w"> </span>myrep2<span class="w"> </span>myabs2<span class="w"> </span>myrepabs2<span class="w"> </span>myabsrep2<span class="w"> </span>myproprep2
<span class="linenos">1495</span><span class="w">    </span>(pnn<span class="kd">,</span>
<span class="linenos">1496</span><span class="w">    </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>pnn_tt<span class="o">)</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>exists_i<span class="o">)</span><span class="w"> </span>h<span class="o">)</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1497</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>mytt<span class="w"> </span>(bool2<span class="kd">,</span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span>tt<span class="o">))</span>
<span class="linenos">1498</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>def<span class="w"> </span>mynot<span class="w"> </span>(<span class="o">(</span>bool2<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>bool2<span class="o">)</span><span class="kd">,</span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x<span class="o">))))</span>
<span class="linenos">1499</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>mytt_transfer
<span class="linenos">1500</span><span class="w">   </span>(myrep2<span class="w"> </span>#<span class="w"> </span>mytt<span class="w"> </span><span class="kd">=</span><span class="w"> </span>tt<span class="w"> </span><span class="kd">,</span>
<span class="linenos">1501</span><span class="w">     </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>mytt<span class="kd">]</span><span class="o">)))</span>
<span class="linenos">1502</span><span class="w">       </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>myrepabs2<span class="o">)</span><span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>pnn_tt<span class="o">))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1503</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>mynot_transfer
<span class="linenos">1504</span><span class="w">   </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>x18<span class="w"> </span><span class="err">\</span><span class="w"> </span>myrep2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>mynot<span class="w"> </span>#<span class="w"> </span>x18<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>not<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x18<span class="o">))</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">1505</span><span class="w">     </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>mynot<span class="kd">]</span><span class="o">)))</span>
<span class="linenos">1506</span><span class="w">       </span><span class="o">(</span>then<span class="w"> </span>forall_i
<span class="linenos">1507</span><span class="w">         </span><span class="o">(</span>bind<span class="w"> </span>bool2<span class="w"> </span>x18<span class="w"> </span><span class="err">\</span>
<span class="linenos">1508</span><span class="w">           </span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>myrepabs2<span class="o">)</span>
<span class="linenos">1509</span><span class="w">            </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>pnn_not<span class="o">)</span><span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>myproprep2<span class="o">))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1510</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>mybool2_e
<span class="linenos">1511</span><span class="w"> </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>x18<span class="w"> </span><span class="err">\</span>
<span class="linenos">1512</span><span class="w">    </span>x18<span class="w"> </span>#<span class="w"> </span>mytt<span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>x19<span class="w"> </span><span class="err">\</span><span class="w"> </span>x18<span class="w"> </span>#<span class="w"> </span>x19<span class="w"> </span><span class="kd">==&gt;</span><span class="w"> </span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>mynot<span class="w"> </span>#<span class="w"> </span>x19<span class="o">))</span><span class="w"> </span><span class="kd">==&gt;</span>
<span class="linenos">1513</span><span class="w">     </span><span class="o">(</span><span class="kd">!</span><span class="w"> </span>x19<span class="w"> </span><span class="err">\</span><span class="w"> </span>x18<span class="w"> </span>#<span class="w"> </span>x19<span class="o">))</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">1514</span><span class="w">   </span><span class="kd">[</span>thenl
<span class="linenos">1515</span><span class="w">     </span><span class="o">(</span>cut
<span class="linenos">1516</span><span class="w">       </span><span class="o">(</span>forall<span class="w"> </span>##<span class="w"> </span><span class="o">(</span>bool2<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>&#39;
<span class="linenos">1517</span><span class="w">         </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span>bool2<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>x18<span class="w"> </span><span class="err">\</span>
<span class="linenos">1518</span><span class="w">           </span>impl<span class="w"> </span>&#39;
<span class="linenos">1519</span><span class="w">            </span><span class="o">(</span>and<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>mytt<span class="o">)))</span><span class="w"> </span>&#39;
<span class="linenos">1520</span><span class="w">              </span><span class="o">(</span>forall<span class="w"> </span>##<span class="w"> </span>bool2<span class="w"> </span>&#39;
<span class="linenos">1521</span><span class="w">                </span><span class="o">(</span>lam<span class="w"> </span>bool2<span class="w"> </span>x19<span class="w"> </span><span class="err">\</span>
<span class="linenos">1522</span><span class="w">                  </span>impl<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x19<span class="o">)))</span><span class="w"> </span>&#39;
<span class="linenos">1523</span><span class="w">                   </span><span class="o">(</span>x18<span class="w"> </span>&#39;
<span class="linenos">1524</span><span class="w">                     </span><span class="o">(</span>myabs2<span class="w"> </span>&#39;
<span class="linenos">1525</span><span class="w">                       </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>mynot<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x19<span class="o">)))))))))</span>
<span class="linenos">1526</span><span class="w">            </span>&#39;
<span class="linenos">1527</span><span class="w">            </span><span class="o">(</span>forall<span class="w"> </span>##<span class="w"> </span>bool2<span class="w"> </span>&#39;
<span class="linenos">1528</span><span class="w">              </span><span class="o">(</span>lam<span class="w"> </span>bool2<span class="w"> </span>x19<span class="w"> </span><span class="err">\</span><span class="w"> </span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x19<span class="o">)))))))</span>
<span class="linenos">1529</span><span class="w">     </span><span class="kd">[</span>then
<span class="linenos">1530</span><span class="w">       </span><span class="o">(</span>g
<span class="linenos">1531</span><span class="w">         </span><span class="o">(</span>forall<span class="w"> </span>##<span class="w"> </span><span class="o">(</span>bool2<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>&#39;
<span class="linenos">1532</span><span class="w">           </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span>bool2<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>x18<span class="w"> </span><span class="err">\</span>
<span class="linenos">1533</span><span class="w">             </span>impl<span class="w"> </span>&#39;
<span class="linenos">1534</span><span class="w">              </span><span class="o">(</span>and<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>mytt<span class="o">)))</span><span class="w"> </span>&#39;
<span class="linenos">1535</span><span class="w">                </span><span class="o">(</span>forall<span class="w"> </span>##<span class="w"> </span>bool2<span class="w"> </span>&#39;
<span class="linenos">1536</span><span class="w">                  </span><span class="o">(</span>lam<span class="w"> </span>bool2<span class="w"> </span>x19<span class="w"> </span><span class="err">\</span>
<span class="linenos">1537</span><span class="w">                    </span>impl<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x19<span class="o">)))</span><span class="w"> </span>&#39;
<span class="linenos">1538</span><span class="w">                     </span><span class="o">(</span>x18<span class="w"> </span>&#39;
<span class="linenos">1539</span><span class="w">                       </span><span class="o">(</span>myabs2<span class="w"> </span>&#39;
<span class="linenos">1540</span><span class="w">                         </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>mynot<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x19<span class="o">)))))))))</span>
<span class="linenos">1541</span><span class="w">              </span>&#39;
<span class="linenos">1542</span><span class="w">              </span><span class="o">(</span>forall<span class="w"> </span>##<span class="w"> </span>bool2<span class="w"> </span>&#39;
<span class="linenos">1543</span><span class="w">                </span><span class="o">(</span>lam<span class="w"> </span>bool2<span class="w"> </span>x19<span class="w"> </span><span class="err">\</span><span class="w"> </span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x19<span class="o">)))))))</span>
<span class="linenos">1544</span><span class="w">       </span><span class="o">(</span>then
<span class="linenos">1545</span><span class="w">         </span><span class="o">(</span>w
<span class="linenos">1546</span><span class="w">           </span><span class="o">(</span>forall<span class="w"> </span>##<span class="w"> </span><span class="o">(</span>bool2<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>&#39;
<span class="linenos">1547</span><span class="w">             </span><span class="o">(</span>lam<span class="w"> </span><span class="o">(</span>bool2<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>x18<span class="w"> </span><span class="err">\</span>
<span class="linenos">1548</span><span class="w">               </span>impl<span class="w"> </span>&#39;
<span class="linenos">1549</span><span class="w">                </span><span class="o">(</span>and<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>mytt<span class="o">)))</span><span class="w"> </span>&#39;
<span class="linenos">1550</span><span class="w">                  </span><span class="o">(</span>forall<span class="w"> </span>##<span class="w"> </span>bool2<span class="w"> </span>&#39;
<span class="linenos">1551</span><span class="w">                    </span><span class="o">(</span>lam<span class="w"> </span>bool2<span class="w"> </span>x19<span class="w"> </span><span class="err">\</span>
<span class="linenos">1552</span><span class="w">                      </span>impl<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x19<span class="o">)))</span><span class="w"> </span>&#39;
<span class="linenos">1553</span><span class="w">                       </span><span class="o">(</span>x18<span class="w"> </span>&#39;
<span class="linenos">1554</span><span class="w">                         </span><span class="o">(</span>myabs2<span class="w"> </span>&#39;
<span class="linenos">1555</span><span class="w">                           </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>mynot<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x19<span class="o">)))))))))</span>
<span class="linenos">1556</span><span class="w">                </span>&#39;
<span class="linenos">1557</span><span class="w">                </span><span class="o">(</span>forall<span class="w"> </span>##<span class="w"> </span>bool2<span class="w"> </span>&#39;
<span class="linenos">1558</span><span class="w">                  </span><span class="o">(</span>lam<span class="w"> </span>bool2<span class="w"> </span>x19<span class="w"> </span><span class="err">\</span><span class="w"> </span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x19<span class="o">)))))))</span>
<span class="linenos">1559</span><span class="w">         </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>repeat<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>myabsrep2<span class="o">))))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span>h<span class="o">)))</span><span class="kd">,</span>
<span class="linenos">1560</span><span class="w">     </span>then<span class="w"> </span>forall_i
<span class="linenos">1561</span><span class="w">      </span><span class="o">(</span>bind<span class="w"> </span><span class="o">(</span>bool2<span class="w"> </span><span class="kd">--&gt;</span><span class="w"> </span>prop<span class="o">)</span><span class="w"> </span>x18<span class="w"> </span><span class="err">\</span>
<span class="linenos">1562</span><span class="w">        </span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>pnn_e<span class="o">)</span>
<span class="linenos">1563</span><span class="w">         </span><span class="o">(</span>then
<span class="linenos">1564</span><span class="w">           </span><span class="o">(</span>lforall
<span class="linenos">1565</span><span class="w">             </span><span class="o">(</span>lam<span class="w"> </span>prop<span class="w"> </span>x19<span class="w"> </span><span class="err">\</span>
<span class="linenos">1566</span><span class="w">               </span>exists<span class="w"> </span>##<span class="w"> </span>bool2<span class="w"> </span>&#39;
<span class="linenos">1567</span><span class="w">                </span><span class="o">(</span>lam<span class="w"> </span>bool2<span class="w"> </span>x20<span class="w"> </span><span class="err">\</span>
<span class="linenos">1568</span><span class="w">                  </span>and<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>x19<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x20<span class="o">))</span><span class="w"> </span>&#39;
<span class="linenos">1569</span><span class="w">                   </span><span class="o">(</span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span>x19<span class="o">)))))</span>
<span class="linenos">1570</span><span class="w">           </span><span class="o">(</span>then<span class="w"> </span>inv
<span class="linenos">1571</span><span class="w">             </span><span class="o">(</span>bind<span class="w"> </span>bool2<span class="w"> </span>x19<span class="w"> </span><span class="err">\</span>
<span class="linenos">1572</span><span class="w">               </span>thenl
<span class="linenos">1573</span><span class="w">                </span><span class="o">(</span>cut
<span class="linenos">1574</span><span class="w">                  </span><span class="o">((</span>lam<span class="w"> </span>prop<span class="w"> </span>x20<span class="w"> </span><span class="err">\</span>
<span class="linenos">1575</span><span class="w">                     </span>exists<span class="w"> </span>##<span class="w"> </span>bool2<span class="w"> </span>&#39;
<span class="linenos">1576</span><span class="w">                      </span><span class="o">(</span>lam<span class="w"> </span>bool2<span class="w"> </span>x21<span class="w"> </span><span class="err">\</span>
<span class="linenos">1577</span><span class="w">                        </span>and<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>x20<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x21<span class="o">))</span><span class="w"> </span>&#39;
<span class="linenos">1578</span><span class="w">                         </span><span class="o">(</span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span>x20<span class="o">))))</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x19<span class="o">)))</span>
<span class="linenos">1579</span><span class="w">                </span><span class="kd">[</span>then
<span class="linenos">1580</span><span class="w">                  </span><span class="o">(</span>g
<span class="linenos">1581</span><span class="w">                    </span><span class="o">((</span>lam<span class="w"> </span>prop<span class="w"> </span>x20<span class="w"> </span><span class="err">\</span>
<span class="linenos">1582</span><span class="w">                       </span>exists<span class="w"> </span>##<span class="w"> </span>bool2<span class="w"> </span>&#39;
<span class="linenos">1583</span><span class="w">                        </span><span class="o">(</span>lam<span class="w"> </span>bool2<span class="w"> </span>x21<span class="w"> </span><span class="err">\</span>
<span class="linenos">1584</span><span class="w">                          </span>and<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>x20<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x21<span class="o">))</span><span class="w"> </span>&#39;
<span class="linenos">1585</span><span class="w">                           </span><span class="o">(</span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span>x20<span class="o">))))</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x19<span class="o">)))</span>
<span class="linenos">1586</span><span class="w">                  </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>b<span class="o">))</span><span class="w"> </span>inv<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1587</span><span class="w">                </span>thenl<span class="w"> </span>apply
<span class="linenos">1588</span><span class="w">                 </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>repeat<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>b<span class="o">)))</span>
<span class="linenos">1589</span><span class="w">                   </span><span class="o">(</span>thenl<span class="w"> </span>inv
<span class="linenos">1590</span><span class="w">                     </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>exists_i<span class="o">)</span>
<span class="linenos">1591</span><span class="w">                       </span><span class="o">(</span>then
<span class="linenos">1592</span><span class="w">                         </span><span class="o">(</span>lforall_last
<span class="linenos">1593</span><span class="w">                           </span><span class="o">(</span>lam<span class="w"> </span>bool2<span class="w"> </span>x20<span class="w"> </span><span class="err">\</span>
<span class="linenos">1594</span><span class="w">                             </span>and<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>tt<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x20<span class="o">))</span><span class="w"> </span>&#39;
<span class="linenos">1595</span><span class="w">                              </span><span class="o">(</span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span>tt<span class="o">))))</span>
<span class="linenos">1596</span><span class="w">                         </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall_last<span class="w"> </span>mytt<span class="o">)</span>
<span class="linenos">1597</span><span class="w">                           </span><span class="o">(</span>then<span class="w"> </span>apply_last<span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>b<span class="o">)</span>
<span class="linenos">1598</span><span class="w">                            </span><span class="o">(</span>thenl<span class="w"> </span>inv
<span class="linenos">1599</span><span class="w">                             </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>mytt_transfer<span class="o">)</span>
<span class="linenos">1600</span><span class="w">                               </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span><span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>tt_intro<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1601</span><span class="w">                             </span><span class="o">(</span>applyth<span class="w"> </span>tt_intro<span class="o">)</span><span class="kd">,</span>
<span class="linenos">1602</span><span class="w">                             </span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>mytt_transfer<span class="o">)</span>
<span class="linenos">1603</span><span class="w">                              </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>g<span class="w"> </span><span class="o">(</span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>mytt<span class="o">))))</span>
<span class="linenos">1604</span><span class="w">                                </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span>h<span class="o">)))</span><span class="kd">]</span><span class="o">)))))</span><span class="kd">,</span>
<span class="linenos">1605</span><span class="w">                     </span><span class="o">(</span>bind<span class="w"> </span>prop<span class="w"> </span>x20<span class="w"> </span><span class="err">\</span>
<span class="linenos">1606</span><span class="w">                       </span>bind<span class="w"> </span>bool2<span class="w"> </span>x21<span class="w"> </span><span class="err">\</span>
<span class="linenos">1607</span><span class="w">                        </span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>exists_i<span class="o">)</span>
<span class="linenos">1608</span><span class="w">                         </span><span class="o">(</span>then
<span class="linenos">1609</span><span class="w">                           </span><span class="o">(</span>lforall_last
<span class="linenos">1610</span><span class="w">                             </span><span class="o">(</span>lam<span class="w"> </span>bool2<span class="w"> </span>x22<span class="w"> </span><span class="err">\</span>
<span class="linenos">1611</span><span class="w">                               </span>and<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span>x20<span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x22<span class="o">))</span><span class="w"> </span>&#39;
<span class="linenos">1612</span><span class="w">                                </span><span class="o">(</span>x18<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span>x20<span class="o">)))))</span>
<span class="linenos">1613</span><span class="w">                           </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall_last<span class="w"> </span><span class="o">(</span>mynot<span class="w"> </span>#<span class="w"> </span>x21<span class="o">))</span>
<span class="linenos">1614</span><span class="w">                             </span><span class="o">(</span>then<span class="w"> </span>apply_last<span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span>b<span class="o">)</span>
<span class="linenos">1615</span><span class="w">    </span><span class="o">(</span>thenl<span class="w"> </span>inv
<span class="linenos">1616</span><span class="w">     </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>mynot_transfer<span class="o">))</span>
<span class="linenos">1617</span><span class="w">       </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>not<span class="kd">]</span><span class="o">)))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>inv<span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="mi">3</span><span class="o">)))</span><span class="kd">,</span>
<span class="linenos">1618</span><span class="w">     </span>then<span class="w"> </span><span class="o">(</span>g<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>mynot<span class="w"> </span>#<span class="w"> </span>x21<span class="o">)))</span>
<span class="linenos">1619</span><span class="w">      </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>mynot_transfer<span class="o">)))</span>
<span class="linenos">1620</span><span class="w">        </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>not<span class="kd">]</span><span class="o">)))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>inv<span class="w"> </span><span class="o">(</span>itaut<span class="w"> </span><span class="mi">3</span><span class="o">))))</span><span class="kd">,</span>
<span class="linenos">1621</span><span class="w">     </span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span>x20<span class="o">))</span>
<span class="linenos">1622</span><span class="w">      </span><span class="o">(</span>thenl<span class="w"> </span>lapply<span class="w"> </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>myabsrep2<span class="o">)))</span><span class="w"> </span>h<span class="kd">,</span>
<span class="linenos">1623</span><span class="w">        </span>then
<span class="linenos">1624</span><span class="w">         </span><span class="o">(</span>g
<span class="linenos">1625</span><span class="w">           </span><span class="o">(</span>x18<span class="w"> </span>&#39;
<span class="linenos">1626</span><span class="w">             </span><span class="o">(</span>myabs2<span class="w"> </span>&#39;
<span class="linenos">1627</span><span class="w">               </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>mynot<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span>x20<span class="o">))))))))</span>
<span class="linenos">1628</span><span class="w">         </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>myabsrep2<span class="o">)))</span>
<span class="linenos">1629</span><span class="w">           </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>myabsrep2<span class="o">)))</span>
<span class="linenos">1630</span><span class="w">             </span><span class="o">(</span>thenl<span class="w"> </span><span class="o">(</span>cut<span class="w"> </span><span class="o">(</span>x20<span class="w"> </span><span class="kd">=</span><span class="w"> </span>myrep2<span class="w"> </span>#<span class="w"> </span>x21<span class="o">))</span>
<span class="linenos">1631</span><span class="w">               </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span>
<span class="linenos">1632</span><span class="w">                 </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span>
<span class="linenos">1633</span><span class="w">                   </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>myabsrep2<span class="o">)))</span>
<span class="linenos">1634</span><span class="w">                     </span><span class="o">(</span>then<span class="w"> </span>i
<span class="linenos">1635</span><span class="w">                       </span><span class="o">(</span>then
<span class="linenos">1636</span><span class="w">                         </span><span class="o">(</span>conv
<span class="linenos">1637</span><span class="w">                           </span><span class="o">(</span>rand_tac
<span class="linenos">1638</span><span class="w">                             </span><span class="o">(</span>rand_tac<span class="w"> </span><span class="o">(</span>then<span class="w"> </span>sym<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>mynot_transfer<span class="o">)))))</span>
<span class="linenos">1639</span><span class="w">                         </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>myabsrep2<span class="o">)))</span><span class="w"> </span>h<span class="o">)))))</span><span class="kd">,</span>
<span class="linenos">1640</span><span class="w">               </span>itaut<span class="w"> </span><span class="mi">2</span><span class="kd">]</span><span class="o">)))</span><span class="kd">]</span><span class="o">)</span><span class="kd">]</span><span class="o">))))))</span><span class="kd">]</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">1641</span><span class="w">                 </span>applyth<span class="w"> </span>myproprep2<span class="kd">]]</span><span class="o">))))</span><span class="kd">]]</span><span class="o">)</span>
<span class="linenos">1642</span>
<span class="linenos">1643</span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>step0
<span class="linenos">1644</span><span class="w">    </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>x13<span class="w"> </span><span class="err">\</span><span class="w"> </span>mynot<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>mynot<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>mynot<span class="w"> </span>#<span class="w"> </span>x13<span class="o">))</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>mynot<span class="w"> </span>#<span class="w"> </span>x13<span class="o">)</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">1645</span><span class="w">     </span><span class="kd">[</span>then<span class="w"> </span>inv
<span class="linenos">1646</span><span class="w">      </span><span class="o">(</span>bind<span class="w"> </span>bool2<span class="w"> </span>x13<span class="w"> </span><span class="err">\</span>
<span class="linenos">1647</span><span class="w">        </span>then<span class="w"> </span><span class="o">(</span>repeat<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>mynot<span class="kd">]</span><span class="o">))))</span>
<span class="linenos">1648</span><span class="w">         </span><span class="o">(</span>thenl<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>myrepabs2<span class="o">)))))</span>
<span class="linenos">1649</span><span class="w">          </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>pnn_not<span class="o">)</span>
<span class="linenos">1650</span><span class="w">            </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x13<span class="o">)))))</span>
<span class="linenos">1651</span><span class="w">              </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>myproprep2<span class="o">)</span>
<span class="linenos">1652</span><span class="w">                </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span><span class="o">(</span>myabs2<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>not<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x13<span class="o">))))</span>
<span class="linenos">1653</span><span class="w">                  </span><span class="o">(</span>then<span class="w"> </span>apply<span class="w"> </span>h<span class="o">))))</span><span class="kd">,</span>
<span class="linenos">1654</span><span class="w">          </span>thenl
<span class="linenos">1655</span><span class="w">           </span><span class="o">(</span>conv
<span class="linenos">1656</span><span class="w">             </span><span class="o">(</span>land_tac
<span class="linenos">1657</span><span class="w">               </span><span class="o">(</span>rand_tac<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>myrepabs2<span class="o">))))))</span>
<span class="linenos">1658</span><span class="w">           </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>pnn_not<span class="o">)</span>
<span class="linenos">1659</span><span class="w">             </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span><span class="o">(</span>myrep2<span class="w"> </span>#<span class="w"> </span>x13<span class="o">))</span>
<span class="linenos">1660</span><span class="w">               </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>myproprep2<span class="o">)</span>
<span class="linenos">1661</span><span class="w">                 </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span>x13<span class="o">)</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>apply<span class="w"> </span>h<span class="o">))))</span><span class="kd">,</span>
<span class="linenos">1662</span><span class="w">           </span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>land_tac<span class="w"> </span><span class="o">(</span>rand_tac<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>not_not_not<span class="o">))))</span><span class="w"> </span>r<span class="kd">]]</span><span class="o">))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1663</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>mynot_mynot_mytt
<span class="linenos">1664</span><span class="w">    </span>(mynot<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>mynot<span class="w"> </span>#<span class="w"> </span>mytt<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>mytt<span class="w"> </span><span class="kd">,</span>
<span class="linenos">1665</span><span class="w">     </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>mynot<span class="kd">]</span><span class="o">)))</span>
<span class="linenos">1666</span><span class="w">      </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>mynot_transfer<span class="o">)</span>
<span class="linenos">1667</span><span class="w">        </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>lforall<span class="w"> </span>mytt<span class="o">)</span>
<span class="linenos">1668</span><span class="w">          </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span>
<span class="linenos">1669</span><span class="w">            </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>mytt_transfer<span class="o">)</span>
<span class="linenos">1670</span><span class="w">              </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span>
<span class="linenos">1671</span><span class="w">                </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span><span class="o">(</span>dd<span class="w"> </span><span class="kd">[</span>mytt<span class="kd">]</span><span class="o">)))</span><span class="w"> </span><span class="o">(</span>thenl<span class="w"> </span>c<span class="w"> </span><span class="kd">[</span>r<span class="kd">,</span><span class="w"> </span>itaut<span class="w"> </span><span class="mi">3</span><span class="kd">]</span><span class="o">)))))))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1672</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span>theorem<span class="w"> </span>step1
<span class="linenos">1673</span><span class="w">    </span>(<span class="o">(</span><span class="kd">!</span><span class="w"> </span>x18<span class="w"> </span><span class="err">\</span><span class="w"> </span>x18<span class="w"> </span><span class="kd">=</span><span class="w"> </span>mytt<span class="w"> </span><span class="kd">||</span><span class="w"> </span>x18<span class="w"> </span><span class="kd">=</span><span class="w"> </span>mynot<span class="w"> </span>#<span class="w"> </span>mytt<span class="o">)</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">1674</span><span class="w">     </span><span class="kd">[</span>then<span class="w"> </span>forall_i
<span class="linenos">1675</span><span class="w">      </span><span class="o">(</span>bind<span class="w"> </span>bool2<span class="w"> </span>x18<span class="w"> </span><span class="err">\</span>
<span class="linenos">1676</span><span class="w">       </span>then<span class="w"> </span><span class="o">(</span>cutth<span class="w"> </span>mybool2_e<span class="o">)</span>
<span class="linenos">1677</span><span class="w">        </span><span class="o">(</span>thenl
<span class="linenos">1678</span><span class="w">          </span><span class="o">(</span>cut
<span class="linenos">1679</span><span class="w">            </span><span class="o">((</span>lam<span class="w"> </span>bool2<span class="w"> </span>x19<span class="w"> </span><span class="err">\</span>
<span class="linenos">1680</span><span class="w">               </span>or<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>x19<span class="w"> </span>#<span class="w"> </span>mytt<span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>x19<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>mynot<span class="w"> </span>#<span class="w"> </span>mytt<span class="o">)))</span><span class="w"> </span>#<span class="w"> </span>x18<span class="o">))</span>
<span class="linenos">1681</span><span class="w">          </span><span class="kd">[</span>then
<span class="linenos">1682</span><span class="w">            </span><span class="o">(</span>g
<span class="linenos">1683</span><span class="w">              </span><span class="o">((</span>lam<span class="w"> </span>bool2<span class="w"> </span>x19<span class="w"> </span><span class="err">\</span>
<span class="linenos">1684</span><span class="w">                 </span>or<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>x19<span class="w"> </span>#<span class="w"> </span>mytt<span class="o">)</span><span class="w"> </span>#<span class="w"> </span><span class="o">(</span>eq<span class="w"> </span>##<span class="w"> </span><span class="nv">_</span><span class="w"> </span>#<span class="w"> </span>x19<span class="w"> </span>#<span class="w"> </span><span class="o">(</span>mynot<span class="w"> </span>#<span class="w"> </span>mytt<span class="o">)))</span><span class="w"> </span>&#39;
<span class="linenos">1685</span><span class="w">                </span>x18<span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>b<span class="o">))</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span>i<span class="w"> </span>h<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1686</span><span class="w">          </span>then<span class="w"> </span>apply
<span class="linenos">1687</span><span class="w">           </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>repeat<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>b<span class="o">)))</span>
<span class="linenos">1688</span><span class="w">             </span><span class="o">(</span>thenl<span class="w"> </span>conj<span class="w"> </span><span class="kd">[</span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>orl<span class="o">)</span><span class="w"> </span>r<span class="kd">,</span>
<span class="linenos">1689</span><span class="w">               </span>thenl<span class="w"> </span>inv
<span class="linenos">1690</span><span class="w">                </span><span class="kd">[</span><span class="o">(</span>bind<span class="w"> </span>bool2<span class="w"> </span>x19<span class="w"> </span><span class="err">\</span>
<span class="linenos">1691</span><span class="w">                   </span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>orr<span class="o">)</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span><span class="w"> </span>r<span class="o">))</span><span class="kd">,</span>
<span class="linenos">1692</span><span class="w">                </span><span class="o">(</span>bind<span class="w"> </span>bool2<span class="w"> </span>x19<span class="w"> </span><span class="err">\</span>
<span class="linenos">1693</span><span class="w">                  </span>then<span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>orl<span class="o">)</span><span class="w"> </span><span class="o">(</span>then<span class="w"> </span><span class="o">(</span>conv<span class="w"> </span><span class="o">(</span>depth_tac<span class="w"> </span>h<span class="o">))</span><span class="w"> </span><span class="o">(</span>applyth<span class="w"> </span>mynot_mynot_mytt<span class="o">)))</span><span class="kd">]]</span><span class="o">))</span><span class="kd">]</span><span class="o">))</span><span class="kd">]</span><span class="o">)</span>
<span class="linenos">1694</span>
<span class="linenos">1695</span><span class="w"> </span><span class="c">/******* Cartesian product of types ******/</span>
<span class="linenos">1696</span><span class="w"> </span><span class="c">/* TODO: this is an inductive type as well: generalize</span>
<span class="linenos">1697</span><span class="w">    </span>inductive_type<span class="w"> </span>to<span class="w"> </span><span class="kd">type</span><span class="w"> </span><span class="nf">abstractions</span><span class="w"> </span><span class="kt">*/</span>
<span class="linenos">1698</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">def</span><span class="w"> </span><span class="kt">is_pair</span><span class="w"> </span><span class="kt">(pi</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">pi</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1699</span><span class="w">  </span><span class="kt">(univ</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">(disj_union</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">B)</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span><span class="err">,</span>
<span class="linenos">1700</span><span class="w">  </span><span class="kt">lam</span><span class="w"> </span><span class="kt">(</span><span class="err">_</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">B)</span><span class="w"> </span><span class="kt">p</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">?</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">?</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">b</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1701</span><span class="w">   </span><span class="kt">p</span><span class="w"> </span><span class="kt">=</span>
<span class="linenos">1702</span><span class="w">    </span><span class="kt">pair_univ</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">(</span><span class="err">_</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">B)</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">&#39;</span>
<span class="linenos">1703</span><span class="w">     </span><span class="kt">(injection_univ</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">(</span><span class="err">_</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">B)</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(inj1_disj_union</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">a))</span><span class="w"> </span><span class="kt">&#39;</span>
<span class="linenos">1704</span><span class="w">     </span><span class="kt">(injection_univ</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">(</span><span class="err">_</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">B)</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(inj2_disj_union</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">b)))</span>
<span class="linenos">1705</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">new_basic_type</span><span class="w"> </span><span class="kt">prod</span><span class="w"> </span><span class="kt">prod_rep</span><span class="w"> </span><span class="kt">prod_abs</span><span class="w"> </span><span class="kt">prod_repabs</span><span class="w"> </span><span class="kt">prod_absrep</span><span class="w"> </span><span class="kt">prod_proprep</span>
<span class="linenos">1706</span><span class="w">    </span><span class="kt">(pi</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">pi</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">is_pair</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">B</span><span class="err">,</span><span class="w"> </span><span class="err">[</span><span class="kt">daemon</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1707</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">def</span><span class="w"> </span><span class="kt">pair</span><span class="w"> </span><span class="kt">(pi</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">pi</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1708</span><span class="w">    </span><span class="kt">(A</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prod</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">B</span><span class="err">,</span>
<span class="linenos">1709</span><span class="w">    </span><span class="kt">lam</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">lam</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">b</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1710</span><span class="w">     </span><span class="kt">prod_abs</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">&#39;</span>
<span class="linenos">1711</span><span class="w">      </span><span class="kt">(pair_univ</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">(</span><span class="err">_</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">B)</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">&#39;</span>
<span class="linenos">1712</span><span class="w">       </span><span class="kt">(injection_univ</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">(</span><span class="err">_</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">B)</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(inj1_disj_union</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">a))</span><span class="w"> </span><span class="kt">&#39;</span>
<span class="linenos">1713</span><span class="w">       </span><span class="kt">(injection_univ</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">(</span><span class="err">_</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">B)</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(inj2_disj_union</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">b)))</span>
<span class="linenos">1714</span><span class="w">    </span><span class="kt">))</span>
<span class="linenos">1715</span><span class="w"> </span><span class="kt">/*</span><span class="w"> </span><span class="kt">TODO</span><span class="err">:</span><span class="w"> </span><span class="kt">define</span><span class="w"> </span><span class="kt">fst</span><span class="w"> </span><span class="kt">and</span><span class="w"> </span><span class="kt">snd</span><span class="w"> </span><span class="kt">and</span><span class="w"> </span><span class="kt">prove</span><span class="w"> </span><span class="kt">the</span><span class="w"> </span><span class="kt">usual</span><span class="w"> </span><span class="kt">lemmas</span>
<span class="linenos">1716</span><span class="w">    </span><span class="kt">fst</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">b)</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="kt">*/</span>
<span class="linenos">1717</span>
<span class="linenos">1718</span><span class="w">  </span><span class="kt">/*************</span><span class="w"> </span><span class="kt">Natural</span><span class="w"> </span><span class="kt">numbers</span><span class="w"> </span><span class="kt">***************/</span>
<span class="linenos">1719</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">inductive_def</span><span class="w"> </span><span class="kt">is_nat</span><span class="w"> </span><span class="kt">is_natF</span><span class="w"> </span><span class="kt">is_nat_monotone</span><span class="w"> </span><span class="kt">is_nat_i</span><span class="w"> </span><span class="kt">is_nat_e0</span><span class="w"> </span><span class="kt">is_nat_e</span>
<span class="linenos">1720</span><span class="w">   </span><span class="kt">(is_nat</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1721</span><span class="w">     </span><span class="err">[</span><span class="w"> </span><span class="kt">(is_nat_z</span><span class="err">,</span><span class="w"> </span><span class="kt">is_nat</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(inj1_univ</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(injection_univ</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">ff)))</span>
<span class="linenos">1722</span><span class="w">     </span><span class="err">,</span><span class="w"> </span><span class="kt">(is_nat_s</span><span class="err">,</span><span class="w"> </span><span class="kt">!</span><span class="w"> </span><span class="kt">x</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">is_nat</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x</span><span class="w"> </span><span class="kt">==&gt;</span><span class="w"> </span><span class="kt">is_nat</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(inj2_univ</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x))</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1723</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">new_basic_type</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">nat_rep</span><span class="w"> </span><span class="kt">nat_abs</span><span class="w"> </span><span class="kt">nat_repabs</span><span class="w"> </span><span class="kt">nat_absrep</span><span class="w"> </span><span class="kt">nat_proprep</span>
<span class="linenos">1724</span><span class="w">    </span><span class="kt">(is_nat</span><span class="err">,</span>
<span class="linenos">1725</span><span class="w">    </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(cutth</span><span class="w"> </span><span class="kt">is_nat_z)</span><span class="w"> </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">exists_i)</span><span class="w"> </span><span class="kt">h)</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1726</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">def</span><span class="w"> </span><span class="kt">z</span><span class="w"> </span><span class="kt">(nat</span><span class="err">,</span><span class="w"> </span><span class="kt">nat_abs</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(inj1_univ</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(injection_univ</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">ff)))</span>
<span class="linenos">1727</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">def</span><span class="w"> </span><span class="kt">s</span><span class="w"> </span><span class="kt">(nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">nat</span><span class="err">,</span>
<span class="linenos">1728</span><span class="w">    </span><span class="kt">(lam</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">x</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">nat_abs</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(inj2_univ</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(nat_rep</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x))))</span>
<span class="linenos">1729</span><span class="w"> </span><span class="kt">/*</span><span class="w"> </span><span class="kt">TODO</span><span class="err">:</span><span class="w"> </span><span class="kt">consequence</span><span class="w"> </span><span class="kt">of</span><span class="w"> </span><span class="kt">is_nat_e</span><span class="w"> </span><span class="kt">by</span><span class="w"> </span><span class="kt">transfer</span><span class="w"> </span><span class="kt">principles</span><span class="w"> </span><span class="kt">*/</span>
<span class="linenos">1730</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">theorem</span><span class="w"> </span><span class="kt">nat_e</span><span class="w"> </span><span class="kt">((!</span><span class="w"> </span><span class="kt">p</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">p</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">z</span><span class="w"> </span><span class="kt">==&gt;</span><span class="w"> </span><span class="kt">(!</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">p</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="kt">==&gt;</span><span class="w"> </span><span class="kt">p</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(s</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">n))</span><span class="w"> </span><span class="kt">==&gt;</span><span class="w"> </span><span class="kt">!</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">p</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">n)</span><span class="err">,</span><span class="w"> </span><span class="err">[</span><span class="w"> </span><span class="kt">daemon</span><span class="w"> </span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1731</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">theorem</span><span class="w"> </span><span class="kt">nat_abs_inj</span>
<span class="linenos">1732</span><span class="w">   </span><span class="kt">((!</span><span class="w"> </span><span class="kt">x18</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1733</span><span class="w">      </span><span class="kt">!</span><span class="w"> </span><span class="kt">x19</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1734</span><span class="w">       </span><span class="kt">is_nat</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x18</span><span class="w"> </span><span class="kt">==&gt;</span>
<span class="linenos">1735</span><span class="w">        </span><span class="kt">is_nat</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x19</span><span class="w"> </span><span class="kt">==&gt;</span><span class="w"> </span><span class="kt">nat_abs</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x18</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">nat_abs</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x19</span><span class="w"> </span><span class="kt">==&gt;</span><span class="w"> </span><span class="kt">x18</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">x19)</span><span class="w"> </span><span class="err">,</span>
<span class="linenos">1736</span><span class="w">     </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1737</span><span class="w">       </span><span class="kt">(bind</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">x18</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1738</span><span class="w">         </span><span class="kt">bind</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">x19</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1739</span><span class="w">          </span><span class="kt">thenl</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(then</span><span class="w"> </span><span class="kt">sym</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_repabs))))</span><span class="w"> </span><span class="err">[</span><span class="kt">h</span><span class="err">,</span>
<span class="linenos">1740</span><span class="w">           </span><span class="kt">thenl</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(rand_tac</span><span class="w"> </span><span class="kt">(then</span><span class="w"> </span><span class="kt">sym</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_repabs))))</span><span class="w"> </span><span class="err">[</span><span class="kt">h</span><span class="err">,</span>
<span class="linenos">1741</span><span class="w">            </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">h))</span><span class="w"> </span><span class="kt">r</span><span class="err">]]</span><span class="kt">)</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1742</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">theorem</span><span class="w"> </span><span class="kt">nat_rep_inj</span>
<span class="linenos">1743</span><span class="w">   </span><span class="kt">((!</span><span class="w"> </span><span class="kt">x18</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">!</span><span class="w"> </span><span class="kt">x19</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">nat_rep</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x18</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">nat_rep</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x19</span><span class="w"> </span><span class="kt">==&gt;</span><span class="w"> </span><span class="kt">x18</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">x19)</span><span class="w"> </span><span class="err">,</span>
<span class="linenos">1744</span><span class="w">     </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1745</span><span class="w">       </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x18</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1746</span><span class="w">         </span><span class="kt">bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x19</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1747</span><span class="w">          </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(then</span><span class="w"> </span><span class="kt">sym</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_absrep))))</span>
<span class="linenos">1748</span><span class="w">           </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(rand_tac</span><span class="w"> </span><span class="kt">(then</span><span class="w"> </span><span class="kt">sym</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_absrep))))</span>
<span class="linenos">1749</span><span class="w">             </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">h))</span><span class="w"> </span><span class="kt">r)))</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1750</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">theorem</span><span class="w"> </span><span class="kt">s_inj</span><span class="w"> </span><span class="kt">((!</span><span class="w"> </span><span class="kt">x18</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">!</span><span class="w"> </span><span class="kt">x19</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">s</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x18</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">s</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x19</span><span class="w"> </span><span class="kt">==&gt;</span><span class="w"> </span><span class="kt">x18</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">x19)</span><span class="w"> </span><span class="err">,</span>
<span class="linenos">1751</span><span class="w">     </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(dd</span><span class="w"> </span><span class="err">[</span><span class="kt">s</span><span class="err">]</span><span class="kt">))))</span>
<span class="linenos">1752</span><span class="w">       </span><span class="kt">(then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1753</span><span class="w">         </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x18</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1754</span><span class="w">           </span><span class="kt">bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x19</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1755</span><span class="w">            </span><span class="kt">then</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_rep_inj)</span>
<span class="linenos">1756</span><span class="w">             </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">inj2_univ_inj)</span>
<span class="linenos">1757</span><span class="w">               </span><span class="kt">(thenl</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_abs_inj)</span>
<span class="linenos">1758</span><span class="w">                 </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">is_nat_s)</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_proprep)</span><span class="err">,</span>
<span class="linenos">1759</span><span class="w">                 </span><span class="kt">then</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">is_nat_s)</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_proprep)</span><span class="err">,</span><span class="w"> </span><span class="kt">h</span><span class="err">]</span><span class="kt">))))</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1760</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">theorem</span><span class="w"> </span><span class="kt">not_equal_z_s</span><span class="w"> </span><span class="kt">((!</span><span class="w"> </span><span class="kt">x20</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">not</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(z</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">s</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x20))</span><span class="w"> </span><span class="err">,</span>
<span class="linenos">1761</span><span class="w">     </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(dd</span><span class="w"> </span><span class="err">[</span><span class="kt">z</span><span class="err">]</span><span class="kt">))))</span>
<span class="linenos">1762</span><span class="w">       </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(dd</span><span class="w"> </span><span class="err">[</span><span class="kt">s</span><span class="err">]</span><span class="kt">))))</span>
<span class="linenos">1763</span><span class="w">         </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(dd</span><span class="w"> </span><span class="err">[</span><span class="kt">not</span><span class="err">]</span><span class="kt">))))</span>
<span class="linenos">1764</span><span class="w">           </span><span class="kt">(then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1765</span><span class="w">             </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x20</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1766</span><span class="w">               </span><span class="kt">then</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">not_eq_inj1_inj2_univ)</span>
<span class="linenos">1767</span><span class="w">                </span><span class="kt">(thenl</span><span class="w"> </span><span class="kt">(thenl</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_abs_inj)</span><span class="w"> </span><span class="err">[</span><span class="kt">id</span><span class="err">,</span><span class="w"> </span><span class="kt">id</span><span class="err">,</span><span class="w"> </span><span class="kt">h</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1768</span><span class="w">                  </span><span class="err">[</span><span class="kt">applyth</span><span class="w"> </span><span class="kt">is_nat_z</span><span class="err">,</span>
<span class="linenos">1769</span><span class="w">                  </span><span class="kt">then</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">is_nat_s)</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_proprep)</span><span class="err">]</span><span class="kt">)))))</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1770</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">def</span><span class="w"> </span><span class="kt">nat_case</span><span class="w"> </span><span class="kt">(pi</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">(nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">(nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="err">,</span>
<span class="linenos">1771</span><span class="w">    </span><span class="kt">lam</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">lam</span><span class="w"> </span><span class="kt">(</span><span class="err">_</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">lam</span><span class="w"> </span><span class="kt">(</span><span class="err">_</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="kt">f</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1772</span><span class="w">     </span><span class="kt">case_univ</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(nat_rep</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">n)</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(lam</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">x</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">a)</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(lam</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">p</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">f</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(nat_abs</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">p))))</span>
<span class="linenos">1773</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">theorem</span><span class="w"> </span><span class="kt">nat_case_z</span><span class="w"> </span><span class="kt">(pi</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">((!</span><span class="w"> </span><span class="kt">x21</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">!</span><span class="w"> </span><span class="kt">x22</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">nat_case</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">z</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x21</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x22</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">x21)</span><span class="w"> </span><span class="err">,</span>
<span class="linenos">1774</span><span class="w">      </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(dd</span><span class="w"> </span><span class="err">[</span><span class="kt">nat_case</span><span class="err">]</span><span class="kt">)))</span>
<span class="linenos">1775</span><span class="w">        </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(dd</span><span class="w"> </span><span class="err">[</span><span class="kt">z</span><span class="err">]</span><span class="kt">)))</span>
<span class="linenos">1776</span><span class="w">          </span><span class="kt">(then</span><span class="w"> </span><span class="kt">forall_i</span>
<span class="linenos">1777</span><span class="w">            </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">x21</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1778</span><span class="w">              </span><span class="kt">then</span><span class="w"> </span><span class="kt">forall_i</span>
<span class="linenos">1779</span><span class="w">               </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">(nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="kt">x22</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1780</span><span class="w">                 </span><span class="kt">thenl</span>
<span class="linenos">1781</span><span class="w">                  </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(rator_tac</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_repabs)))))</span>
<span class="linenos">1782</span><span class="w">                  </span><span class="err">[</span><span class="kt">applyth</span><span class="w"> </span><span class="kt">is_nat_z</span><span class="err">,</span>
<span class="linenos">1783</span><span class="w">                   </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">case_univ_inj1)))</span>
<span class="linenos">1784</span><span class="w">                    </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">b))</span><span class="w"> </span><span class="kt">r)</span><span class="err">]</span><span class="kt">))))</span><span class="err">]</span><span class="kt">))</span>
<span class="linenos">1785</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">theorem</span><span class="w"> </span><span class="kt">nat_case_s</span>
<span class="linenos">1786</span><span class="w">   </span><span class="kt">(pi</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">(!</span><span class="w"> </span><span class="kt">x21</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">!</span><span class="w"> </span><span class="kt">x22</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">!</span><span class="w"> </span><span class="kt">x23</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1787</span><span class="w">     </span><span class="kt">nat_case</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(s</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x21)</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x22</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x23</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">x23</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x21)</span><span class="err">,</span>
<span class="linenos">1788</span><span class="w">     </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(dd</span><span class="w"> </span><span class="err">[</span><span class="kt">nat_case</span><span class="err">]</span><span class="kt">)))</span>
<span class="linenos">1789</span><span class="w">       </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(dd</span><span class="w"> </span><span class="err">[</span><span class="kt">s</span><span class="err">]</span><span class="kt">)))</span>
<span class="linenos">1790</span><span class="w">         </span><span class="kt">(then</span><span class="w"> </span><span class="kt">forall_i</span>
<span class="linenos">1791</span><span class="w">           </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x21</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1792</span><span class="w">             </span><span class="kt">then</span><span class="w"> </span><span class="kt">forall_i</span>
<span class="linenos">1793</span><span class="w">              </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">x22</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1794</span><span class="w">                </span><span class="kt">then</span><span class="w"> </span><span class="kt">forall_i</span>
<span class="linenos">1795</span><span class="w">                 </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">(nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="kt">x23</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1796</span><span class="w">                   </span><span class="kt">thenl</span>
<span class="linenos">1797</span><span class="w">                    </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(rator_tac</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_repabs)))))</span>
<span class="linenos">1798</span><span class="w">                    </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">is_nat_s)</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_proprep)</span><span class="err">,</span>
<span class="linenos">1799</span><span class="w">                     </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">case_univ_inj2)))</span>
<span class="linenos">1800</span><span class="w">                     </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">b))</span>
<span class="linenos">1801</span><span class="w">                       </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_absrep)))</span><span class="w"> </span><span class="kt">r))</span><span class="err">]</span><span class="kt">)))))</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1802</span>
<span class="linenos">1803</span>
<span class="linenos">1804</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">theorem</span><span class="w"> </span><span class="kt">pred_well_founded</span>
<span class="linenos">1805</span><span class="w">   </span><span class="kt">(well_founded</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(lam</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x21</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">lam</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x22</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">x22</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">s</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">x21)</span><span class="w"> </span><span class="err">,</span>
<span class="linenos">1806</span><span class="w">   </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">dd)</span>
<span class="linenos">1807</span><span class="w">     </span><span class="kt">(then</span><span class="w"> </span><span class="kt">forall_i</span>
<span class="linenos">1808</span><span class="w">       </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x21</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1809</span><span class="w">         </span><span class="kt">thenl</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_e)</span>
<span class="linenos">1810</span><span class="w">          </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">acc_i)</span>
<span class="linenos">1811</span><span class="w">            </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">b)))</span>
<span class="linenos">1812</span><span class="w">              </span><span class="kt">(then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1813</span><span class="w">                </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x22</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1814</span><span class="w">                  </span><span class="kt">then</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">ff_elim)</span><span class="w"> </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(cutth</span><span class="w"> </span><span class="kt">not_equal_z_s)</span><span class="w"> </span><span class="kt">(itaut</span><span class="w"> </span><span class="err">4</span><span class="kt">)))))</span><span class="err">,</span>
<span class="linenos">1815</span><span class="w">          </span><span class="kt">then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1816</span><span class="w">           </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x22</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1817</span><span class="w">             </span><span class="kt">then</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">acc_i)</span>
<span class="linenos">1818</span><span class="w">              </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">b)))</span>
<span class="linenos">1819</span><span class="w">                </span><span class="kt">(then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1820</span><span class="w">                  </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x23</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1821</span><span class="w">                    </span><span class="kt">then</span><span class="w"> </span><span class="kt">(cutth</span><span class="w"> </span><span class="kt">s_inj)</span>
<span class="linenos">1822</span><span class="w">                     </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(lforall</span><span class="w"> </span><span class="kt">x22)</span>
<span class="linenos">1823</span><span class="w">                       </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(lforall</span><span class="w"> </span><span class="kt">x23)</span>
<span class="linenos">1824</span><span class="w">                         </span><span class="kt">(thenl</span><span class="w"> </span><span class="kt">lapply</span><span class="w"> </span><span class="err">[</span><span class="kt">h</span><span class="err">,</span>
<span class="linenos">1825</span><span class="w">                           </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(rand_tac</span><span class="w"> </span><span class="kt">(then</span><span class="w"> </span><span class="kt">sym</span><span class="w"> </span><span class="kt">h)))</span><span class="w"> </span><span class="kt">h</span><span class="err">]</span><span class="kt">)))))))</span><span class="err">]</span><span class="kt">))</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1826</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">def</span><span class="w"> </span><span class="kt">nat_recF</span><span class="w"> </span><span class="kt">(pi</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1827</span><span class="w">    </span><span class="kt">A</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">(nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">(nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">(nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A)</span>
<span class="linenos">1828</span><span class="w">    </span><span class="err">,</span><span class="w"> </span><span class="kt">lam</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">lam</span><span class="w"> </span><span class="kt">(</span><span class="err">_</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="kt">f</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">lam</span><span class="w"> </span><span class="kt">(</span><span class="err">_</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="kt">rec</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">lam</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1829</span><span class="w">       </span><span class="kt">nat_case</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(lam</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">p</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">f</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">p</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(rec</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">p)))</span>
<span class="linenos">1830</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">def</span><span class="w"> </span><span class="kt">nat_rec</span><span class="w"> </span><span class="kt">(pi</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1831</span><span class="w">    </span><span class="kt">A</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">(nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span>
<span class="linenos">1832</span><span class="w">    </span><span class="err">,</span><span class="w"> </span><span class="kt">lam</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">lam</span><span class="w"> </span><span class="kt">(</span><span class="err">_</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="kt">f</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">rec</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(nat_recF</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">f))</span>
<span class="linenos">1833</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">theorem</span><span class="w"> </span><span class="kt">nat_rec_ok0</span><span class="w"> </span><span class="kt">(pi</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1834</span><span class="w">   </span><span class="kt">((!</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">!</span><span class="w"> </span><span class="kt">f</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1835</span><span class="w">     </span><span class="kt">nat_rec</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">f</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">nat_recF</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">f</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(nat_rec</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">f))</span><span class="w"> </span><span class="err">,</span>
<span class="linenos">1836</span><span class="w">   </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1837</span><span class="w">     </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">x22</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1838</span><span class="w">       </span><span class="kt">bind</span><span class="w"> </span><span class="kt">(nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="kt">x23</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1839</span><span class="w">        </span><span class="kt">then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(dd</span><span class="w"> </span><span class="err">[</span><span class="kt">nat_rec</span><span class="err">]</span><span class="kt">))))</span>
<span class="linenos">1840</span><span class="w">         </span><span class="kt">(thenl</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">rec_is_fixpoint)</span><span class="w"> </span><span class="err">[</span><span class="kt">applyth</span><span class="w"> </span><span class="kt">pred_well_founded</span><span class="err">,</span>
<span class="linenos">1841</span><span class="w">           </span><span class="kt">then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">b)))</span>
<span class="linenos">1842</span><span class="w">            </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(dd</span><span class="w"> </span><span class="err">[</span><span class="kt">nat_recF</span><span class="err">]</span><span class="kt">))))</span>
<span class="linenos">1843</span><span class="w">              </span><span class="kt">(then</span><span class="w"> </span><span class="kt">forall_i</span>
<span class="linenos">1844</span><span class="w">                </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">(nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="kt">x24</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1845</span><span class="w">                  </span><span class="kt">then</span><span class="w"> </span><span class="kt">forall_i</span>
<span class="linenos">1846</span><span class="w">                   </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">(nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="kt">x25</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1847</span><span class="w">                     </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(rand_tac</span><span class="w"> </span><span class="kt">beta_expand))</span>
<span class="linenos">1848</span><span class="w">                      </span><span class="kt">(thenl</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_e)</span>
<span class="linenos">1849</span><span class="w">                        </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">b))</span>
<span class="linenos">1850</span><span class="w">                          </span><span class="kt">(then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1851</span><span class="w">                            </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_case_z)))</span>
<span class="linenos">1852</span><span class="w">                              </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(rand_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_case_z)))</span><span class="w"> </span><span class="kt">r)))</span><span class="err">,</span>
<span class="linenos">1853</span><span class="w">                        </span><span class="kt">then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">b)))</span>
<span class="linenos">1854</span><span class="w">                         </span><span class="kt">(then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1855</span><span class="w">                           </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x26</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1856</span><span class="w">                             </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(rand_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_case_s)))</span>
<span class="linenos">1857</span><span class="w">                              </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_case_s)))</span>
<span class="linenos">1858</span><span class="w">                                </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">b)))</span>
<span class="linenos">1859</span><span class="w">                                  </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(lforall</span><span class="w"> </span><span class="kt">x26)</span>
<span class="linenos">1860</span><span class="w">                                    </span><span class="kt">(thenl</span><span class="w"> </span><span class="kt">lapply</span><span class="w"> </span><span class="err">[</span><span class="kt">r</span><span class="err">,</span>
<span class="linenos">1861</span><span class="w">                                      </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(rand_tac</span><span class="w"> </span><span class="kt">h)))</span><span class="w"> </span><span class="kt">r</span><span class="err">]</span><span class="kt">))))))</span><span class="err">]</span><span class="kt">)))))</span><span class="err">]</span><span class="kt">))</span><span class="err">]</span><span class="kt">))</span>
<span class="linenos">1862</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">theorem</span><span class="w"> </span><span class="kt">nat_rec_ok</span><span class="w"> </span><span class="kt">(pi</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1863</span><span class="w">   </span><span class="kt">(!</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">!</span><span class="w"> </span><span class="kt">f</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">!</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1864</span><span class="w">     </span><span class="kt">nat_rec</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">f</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="kt">=</span>
<span class="linenos">1865</span><span class="w">      </span><span class="kt">nat_case</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(lam</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">p</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">f</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">p</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(nat_rec</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">a</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">f</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">p)))</span><span class="err">,</span>
<span class="linenos">1866</span><span class="w">   </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1867</span><span class="w">     </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">x22</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1868</span><span class="w">       </span><span class="kt">bind</span><span class="w"> </span><span class="kt">(nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A)</span><span class="w"> </span><span class="kt">x23</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1869</span><span class="w">        </span><span class="kt">bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x24</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1870</span><span class="w">         </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(rator_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_rec_ok0))))</span>
<span class="linenos">1871</span><span class="w">          </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(dd</span><span class="w"> </span><span class="err">[</span><span class="kt">nat_recF</span><span class="err">]</span><span class="kt">)))</span><span class="w"> </span><span class="kt">r))</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1872</span>
<span class="linenos">1873</span><span class="w"> </span><span class="kt">/*************</span><span class="w"> </span><span class="kt">Arithmetics</span><span class="err">:</span><span class="w"> </span><span class="kt">plus</span><span class="w"> </span><span class="kt">***************/</span>
<span class="linenos">1874</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">def</span><span class="w"> </span><span class="kt">plus</span><span class="w"> </span><span class="kt">(nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="err">-</span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">nat</span><span class="err">,</span>
<span class="linenos">1875</span><span class="w">    </span><span class="kt">lam</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">lam</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">m</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1876</span><span class="w">     </span><span class="kt">nat_rec</span><span class="w"> </span><span class="kt">##</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">m</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(lam</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">p</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">lam</span><span class="w"> </span><span class="err">_</span><span class="w"> </span><span class="kt">sum</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">s</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">sum)&#39;</span><span class="w"> </span><span class="kt">n)</span>
<span class="linenos">1877</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">theorem</span><span class="w"> </span><span class="kt">plus_z</span><span class="w"> </span><span class="kt">((!</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">z</span><span class="w"> </span><span class="kt">+</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">n)</span><span class="err">,</span>
<span class="linenos">1878</span><span class="w">   </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(dd</span><span class="w"> </span><span class="err">[</span><span class="kt">plus</span><span class="err">]</span><span class="kt">)))</span>
<span class="linenos">1879</span><span class="w">     </span><span class="kt">(then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1880</span><span class="w">       </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x21</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1881</span><span class="w">         </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_rec_ok)))</span>
<span class="linenos">1882</span><span class="w">          </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_case_z)))</span><span class="w"> </span><span class="kt">r)))</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1883</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">theorem</span><span class="w"> </span><span class="kt">plus_s</span><span class="w"> </span><span class="kt">((!</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">!</span><span class="w"> </span><span class="kt">m</span><span class="w"> </span><span class="err">\</span><span class="w">  </span><span class="kt">s</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="kt">+</span><span class="w"> </span><span class="kt">m</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">s</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(n</span><span class="w"> </span><span class="kt">+</span><span class="w"> </span><span class="kt">m))</span><span class="err">,</span>
<span class="linenos">1884</span><span class="w">   </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(dd</span><span class="w"> </span><span class="err">[</span><span class="kt">plus</span><span class="err">]</span><span class="kt">))))</span>
<span class="linenos">1885</span><span class="w">     </span><span class="kt">(then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1886</span><span class="w">       </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x21</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1887</span><span class="w">         </span><span class="kt">bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x22</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1888</span><span class="w">          </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_rec_ok)))</span>
<span class="linenos">1889</span><span class="w">           </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_case_s)))</span>
<span class="linenos">1890</span><span class="w">             </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">b)))</span><span class="w"> </span><span class="kt">r))))</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1891</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">theorem</span><span class="w"> </span><span class="kt">plus_n_z</span><span class="w"> </span><span class="kt">((!</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="kt">+</span><span class="w"> </span><span class="kt">z</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">n)</span><span class="err">,</span>
<span class="linenos">1892</span><span class="w">   </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(rand_tac</span><span class="w"> </span><span class="kt">beta_expand))</span>
<span class="linenos">1893</span><span class="w">     </span><span class="kt">(thenl</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_e)</span><span class="w"> </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">b)</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">plus_z)</span><span class="err">,</span>
<span class="linenos">1894</span><span class="w">       </span><span class="kt">then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">b)))</span>
<span class="linenos">1895</span><span class="w">        </span><span class="kt">(then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1896</span><span class="w">          </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x21</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1897</span><span class="w">            </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">plus_s)))</span>
<span class="linenos">1898</span><span class="w">             </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">h))</span><span class="w"> </span><span class="kt">r)))</span><span class="err">]</span><span class="kt">)</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1899</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">theorem</span><span class="w"> </span><span class="kt">plus_n_s</span><span class="w"> </span><span class="kt">((!</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">!</span><span class="w"> </span><span class="kt">m</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="kt">+</span><span class="w"> </span><span class="kt">(s</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">m)</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">s</span><span class="w"> </span><span class="kt">#</span><span class="w"> </span><span class="kt">(n</span><span class="w"> </span><span class="kt">+</span><span class="w"> </span><span class="kt">m))</span><span class="err">,</span>
<span class="linenos">1900</span><span class="w">   </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(rand_tac</span><span class="w"> </span><span class="kt">beta_expand))</span>
<span class="linenos">1901</span><span class="w">     </span><span class="kt">(thenl</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_e)</span>
<span class="linenos">1902</span><span class="w">       </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">b)</span>
<span class="linenos">1903</span><span class="w">         </span><span class="kt">(then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1904</span><span class="w">           </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x21</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">plus_z))))</span><span class="w"> </span><span class="kt">r))</span><span class="err">,</span>
<span class="linenos">1905</span><span class="w">       </span><span class="kt">then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">b)))</span>
<span class="linenos">1906</span><span class="w">        </span><span class="kt">(then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1907</span><span class="w">          </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x21</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1908</span><span class="w">            </span><span class="kt">bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x22</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1909</span><span class="w">             </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">plus_s)))</span>
<span class="linenos">1910</span><span class="w">              </span><span class="kt">(thenl</span><span class="w"> </span><span class="kt">c</span><span class="w"> </span><span class="err">[</span><span class="kt">r</span><span class="err">,</span>
<span class="linenos">1911</span><span class="w">                </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">apply))</span><span class="w"> </span><span class="kt">(then</span><span class="w"> </span><span class="kt">sym</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">plus_s))</span><span class="err">]</span><span class="kt">)))</span><span class="err">]</span><span class="kt">)</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1912</span><span class="w"> </span><span class="err">,</span><span class="w"> </span><span class="kt">theorem</span><span class="w"> </span><span class="kt">plus_comm</span><span class="w"> </span><span class="kt">((!</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">!</span><span class="w"> </span><span class="kt">m</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kt">n</span><span class="w"> </span><span class="kt">+</span><span class="w"> </span><span class="kt">m</span><span class="w"> </span><span class="kt">=</span><span class="w"> </span><span class="kt">m</span><span class="w"> </span><span class="kt">+</span><span class="w"> </span><span class="kt">n)</span><span class="err">,</span>
<span class="linenos">1913</span><span class="w">   </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(rand_tac</span><span class="w"> </span><span class="kt">beta_expand))</span>
<span class="linenos">1914</span><span class="w">     </span><span class="kt">(thenl</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">nat_e)</span>
<span class="linenos">1915</span><span class="w">       </span><span class="err">[</span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">b)</span>
<span class="linenos">1916</span><span class="w">         </span><span class="kt">(then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1917</span><span class="w">           </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x21</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1918</span><span class="w">             </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">plus_z)))</span>
<span class="linenos">1919</span><span class="w">              </span><span class="kt">(then</span><span class="w"> </span><span class="kt">sym</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">plus_n_z))))</span><span class="err">,</span>
<span class="linenos">1920</span><span class="w">       </span><span class="kt">then</span><span class="w"> </span><span class="kt">(repeat</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(depth_tac</span><span class="w"> </span><span class="kt">b)))</span>
<span class="linenos">1921</span><span class="w">        </span><span class="kt">(then</span><span class="w"> </span><span class="kt">inv</span>
<span class="linenos">1922</span><span class="w">          </span><span class="kt">(bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x21</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1923</span><span class="w">            </span><span class="kt">bind</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">x22</span><span class="w"> </span><span class="err">\</span>
<span class="linenos">1924</span><span class="w">             </span><span class="kt">then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">plus_s)))</span>
<span class="linenos">1925</span><span class="w">              </span><span class="kt">(then</span><span class="w"> </span><span class="kt">sym</span>
<span class="linenos">1926</span><span class="w">                </span><span class="kt">(then</span><span class="w"> </span><span class="kt">(conv</span><span class="w"> </span><span class="kt">(land_tac</span><span class="w"> </span><span class="kt">(applyth</span><span class="w"> </span><span class="kt">plus_n_s)))</span>
<span class="linenos">1927</span><span class="w">                  </span><span class="kt">(thenl</span><span class="w"> </span><span class="kt">c</span><span class="w"> </span><span class="err">[</span><span class="kt">r</span><span class="err">,</span><span class="w"> </span><span class="kt">then</span><span class="w"> </span><span class="kt">sym</span><span class="w"> </span><span class="kt">apply</span><span class="err">]</span><span class="kt">)))))</span><span class="err">]</span><span class="kt">)</span><span class="err">]</span><span class="kt">)</span>
<span class="linenos">1928</span>
<span class="linenos">1929</span><span class="w"> </span><span class="err">]</span>.
<span class="linenos">1930</span>
<span class="linenos">1931</span><span class="c">/* Status and dependencies of the tactics:</span>
<span class="linenos">1932</span><span class="kd">+</span>dd<span class="err">:</span>
<span class="linenos">1933</span><span class="kd">+</span>sym<span class="err">:</span>
<span class="linenos">1934</span><span class="kd">+</span>eq_true_intro<span class="err">:</span><span class="w"> </span>(th<span class="w"> </span>tt_intro<span class="o">)</span>
<span class="linenos">1935</span><span class="kd">+</span>forall_i<span class="err">:</span><span class="w"> </span>dd<span class="w"> </span>eq_true_intro
<span class="linenos">1936</span><span class="kd">+</span>conj<span class="err">:</span><span class="w"> </span>dd<span class="w"> </span>eq_true_intro
<span class="linenos">1937</span><span class="kd">+</span>andr<span class="err">:</span><span class="w"> </span>dd<span class="w"> </span>tt_intro
<span class="linenos">1938</span><span class="kd">+</span>andl<span class="err">:</span><span class="w"> </span>dd<span class="w"> </span>tt_intro
<span class="linenos">1939</span><span class="kd">+</span>forall_e<span class="err">:</span><span class="w"> </span>sym<span class="w"> </span>dd
<span class="linenos">1940</span><span class="kd">+</span>mp<span class="err">:</span><span class="w"> </span>andr<span class="w"> </span>sym<span class="w"> </span>dd
<span class="linenos">1941</span><span class="kd">+</span>i<span class="err">:</span><span class="w"> </span>dd<span class="w"> </span>andl<span class="w"> </span>conj
<span class="linenos">1942</span><span class="kd">+</span>cut<span class="err">:</span><span class="w"> </span>andr<span class="w"> </span>sym<span class="w"> </span>dd<span class="w"> </span>i
<span class="linenos">1943</span><span class="kd">+</span>cutth<span class="err">:</span><span class="w"> </span>cut
<span class="linenos">1944</span><span class="kd">+</span>lapply*<span class="err">:</span><span class="w"> </span>mp
<span class="linenos">1945</span><span class="kd">+</span>lforall*<span class="err">:</span><span class="w"> </span>mp<span class="w"> </span>forall_e
<span class="linenos">1946</span><span class="kd">+</span>apply*<span class="err">:</span><span class="w"> </span>lapply<span class="w"> </span>lforall
<span class="linenos">1947</span><span class="kd">+</span>applyth<span class="err">:</span><span class="w"> </span>cutth<span class="w"> </span>apply*
<span class="linenos">1948</span>
<span class="linenos">1949</span><span class="kd">-</span><span class="w"> </span>f<span class="w"> </span>converional<span class="w"> </span>sometimes<span class="w"> </span>fails
<span class="linenos">1950</span><span class="kd">-</span><span class="w"> </span>conv<span class="w"> </span>(depth_tac<span class="o">)</span><span class="w"> </span>diverges<span class="w"> </span>when<span class="w"> </span>applied<span class="w"> </span>to<span class="w"> </span>terms<span class="w"> </span>that<span class="w"> </span>contain
<span class="linenos">1951</span><span class="w">  </span>metavariables
<span class="linenos">1952</span><span class="kd">-</span><span class="w"> </span>repeat<span class="w"> </span><span class="kd">is</span><span class="w"> </span>not<span class="w"> </span>implemented<span class="w"> </span>using<span class="w"> </span>progress<span class="kd">,</span><span class="w"> </span>that<span class="w"> </span><span class="kd">is</span><span class="w"> </span>not<span class="w"> </span>even<span class="w"> </span>there
<span class="linenos">1953</span><span class="kd">*/</span>
<span class="linenos">1954</span>
<span class="linenos">1955</span><span class="c">/*</span>
<span class="linenos">1956</span><span class="kd">-</span><span class="mi">2</span><span class="o">.</span><span class="mi">5</span><span class="err">)</span><span class="w"> </span>in<span class="w"> </span>the<span class="w"> </span>proof<span class="w"> </span>for<span class="w"> </span>myprop<span class="kd">,</span><span class="w"> </span>at<span class="w"> </span>the<span class="w"> </span>end<span class="w"> </span><span class="nv">I</span><span class="w"> </span>provide<span class="w"> </span>the
<span class="linenos">1957</span><span class="w">  </span>witness<span class="w"> </span>(and<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>where<span class="w"> </span><span class="nv">X</span><span class="w"> </span>remains<span class="w"> </span>free<span class="w"> </span>(and<span class="w"> </span>it<span class="w"> </span><span class="kd">is</span><span class="w"> </span>not<span class="w"> </span>even<span class="w"> </span>pi-quantified<span class="o">).</span>
<span class="linenos">1958</span><span class="w">  </span><span class="nv">If</span><span class="w"> </span>prop<span class="w"> </span>was<span class="w"> </span>empty<span class="kd">,</span><span class="w"> </span>then<span class="w"> </span><span class="nv">X</span><span class="w"> </span>could<span class="w"> </span>not<span class="w"> </span>exist<span class="o">.</span><span class="w"> </span><span class="nv">On</span><span class="w"> </span>the<span class="w"> </span>other<span class="w"> </span>hand<span class="kd">,</span><span class="w"> </span>if<span class="w"> </span><span class="nv">X</span><span class="w"> </span>was
<span class="linenos">1959</span><span class="w">  </span>empty<span class="kd">,</span><span class="w"> </span>then<span class="w"> </span>there<span class="w"> </span>would<span class="w"> </span>be<span class="w"> </span>no<span class="w"> </span>need<span class="w"> </span>to<span class="w"> </span>provide<span class="w"> </span>the<span class="w"> </span>proof<span class="w"> </span>at<span class="w"> </span>all<span class="o">.</span>
<span class="linenos">1960</span><span class="w">  </span><span class="nv">In</span><span class="w"> </span>any<span class="w"> </span>case<span class="kd">,</span><span class="w"> </span>the<span class="w"> </span>symptom<span class="w"> </span>for<span class="w"> </span><span class="nv">X</span><span class="w"> </span>remaining<span class="w"> </span>free<span class="w"> </span>at<span class="w"> </span>the<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>a<span class="w"> </span>proof<span class="w"> </span><span class="kd">is</span>
<span class="linenos">1961</span><span class="w">  </span>one<span class="w"> </span>or<span class="w"> </span>more<span class="w"> </span>goals<span class="w"> </span>delayed<span class="w"> </span>on<span class="w"> </span>it<span class="o">.</span><span class="w"> </span><span class="nv">We</span><span class="w"> </span>never<span class="w"> </span>check<span class="w"> </span>for<span class="w"> </span>them<span class="w"> </span>and<span class="w"> </span>we<span class="w"> </span>have
<span class="linenos">1962</span><span class="w">  </span>no<span class="w"> </span>way<span class="w"> </span>atm<span class="w"> </span>to<span class="w"> </span>do<span class="w"> </span>that<span class="o">.</span><span class="w"> </span><span class="nv">See</span><span class="w"> </span>bug<span class="w"> </span><span class="kd">-</span><span class="mi">3</span><span class="err">)</span>
<span class="linenos">1963</span>
<span class="linenos">1964</span><span class="kd">-</span><span class="mi">2</span><span class="err">)</span><span class="w"> </span>the<span class="w"> </span>test<span class="w"> </span>apply_2<span class="w"> </span><span class="kd">is</span><span class="w"> </span>very<span class="w"> </span>slow<span class="err">:</span><span class="w"> </span>why?
<span class="linenos">1965</span><span class="w">    </span>same<span class="w"> </span>for<span class="w"> </span>the<span class="w"> </span>witness<span class="w"> </span>for<span class="w"> </span>myprop
<span class="linenos">1966</span>
<span class="linenos">1967</span><span class="mi">0</span><span class="err">)</span><span class="w"> </span>definitions<span class="w"> </span>must<span class="w"> </span>not<span class="w"> </span>be<span class="w"> </span>recursive<span class="kd">;</span><span class="w"> </span>typing<span class="w"> </span>should<span class="w"> </span>capture<span class="w"> </span>it
<span class="linenos">1968</span><span class="w">   </span>(but<span class="w"> </span>not<span class="w"> </span>if<span class="w"> </span>declare_constraint<span class="w"> </span><span class="kd">is</span><span class="w"> </span>commented<span class="w"> </span>out<span class="o">...)</span>
<span class="linenos">1969</span>
<span class="linenos">1970</span><span class="mi">0</span><span class="o">.</span><span class="mi">25</span><span class="err">)</span><span class="w"> </span>occurr<span class="w"> </span>check<span class="w"> </span>in<span class="w"> </span>bind<span class="w"> </span>case<span class="w"> </span>still<span class="w"> </span>missing<span class="w"> </span><span class="kd">:-</span>(
<span class="linenos">1971</span>
<span class="linenos">1972</span><span class="mi">0</span><span class="o">.</span><span class="mi">50</span><span class="o">)</span><span class="w"> </span>case<span class="w"> </span><span class="nv">AppUvar</span><span class="w"> </span>vs<span class="w"> </span><span class="nv">AppUVar</span><span class="w"> </span>in<span class="w"> </span>unification<span class="w"> </span><span class="kd">is</span><span class="w"> </span>bugged<span class="w"> </span>(e.g<span class="o">.)</span>
<span class="linenos">1973</span><span class="w">      </span><span class="nv">X^2</span><span class="w"> </span>x0<span class="w"> </span>x1<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X^2</span><span class="w"> </span>x0<span class="w"> </span>x1
<span class="linenos">1974</span>
<span class="linenos">1975</span><span class="mi">2</span><span class="err">)</span><span class="w"> </span>we<span class="w"> </span>need<span class="w"> </span>to<span class="w"> </span>fix<span class="w"> </span>the<span class="w"> </span><span class="nv">ELPI</span><span class="w"> </span>problems<span class="w"> </span>about<span class="w"> </span>handling<span class="w"> </span>of<span class="w"> </span>metavariables<span class="o">.</span>
<span class="linenos">1976</span><span class="w"> </span><span class="nv">I</span><span class="w"> </span>have<span class="w"> </span>already<span class="w"> </span>discussed<span class="w"> </span>with<span class="w"> </span><span class="nv">Enrico</span><span class="w"> </span>about<span class="w"> </span>them<span class="w"> </span>and<span class="w"> </span>he<span class="w"> </span>could<span class="w"> </span>have<span class="w"> </span>a
<span class="linenos">1977</span><span class="w"> </span>shot<span class="w"> </span>at<span class="w"> </span>them<span class="o">.</span><span class="w"> </span><span class="nv">Namely</span><span class="err">:</span>
<span class="linenos">1978</span><span class="w"> </span>a<span class="err">)</span><span class="w"> </span>occur<span class="w"> </span>check<span class="w"> </span><span class="kd">+</span><span class="w"> </span>optimization<span class="w"> </span>to<span class="w"> </span>avoid<span class="w"> </span>it<span class="w"> </span>when<span class="w"> </span>possible<span class="w"> </span>(<span class="nv">IN</span><span class="w"> </span><span class="nv">PROGRESS</span><span class="o">)</span>
<span class="linenos">1979</span><span class="w"> </span>b<span class="err">)</span><span class="w"> </span>unimplemented<span class="w"> </span>cases<span class="w"> </span>of<span class="w"> </span>restriction<span class="w"> </span>(<span class="nv">IN</span><span class="w"> </span><span class="nv">PROGRESS</span><span class="o">)</span>
<span class="linenos">1980</span>
<span class="linenos">1981</span><span class="mi">3</span><span class="err">)</span><span class="w"> </span>once<span class="w"> </span>we<span class="w"> </span>let<span class="w"> </span>metavariables<span class="w"> </span>reach<span class="w"> </span>the<span class="w"> </span>goals<span class="kd">,</span><span class="w"> </span>the<span class="w"> </span>current<span class="w"> </span><span class="nv">HOL-light</span><span class="w"> </span>
<span class="linenos">1982</span><span class="w"> </span>tactic<span class="w"> </span>implementation<span class="w"> </span>becomes<span class="w"> </span>too<span class="w"> </span>fragile<span class="o">.</span><span class="w"> </span><span class="nv">We</span><span class="w"> </span>should<span class="w"> </span>let<span class="w"> </span>the<span class="w"> </span>user<span class="w"> </span>
<span class="linenos">1983</span><span class="w"> </span>refer<span class="w"> </span>to<span class="w"> </span>hypotheses<span class="w"> </span>at<span class="w"> </span>least<span class="w"> </span>by<span class="w"> </span>number<span class="w"> </span>if<span class="w"> </span>not<span class="w"> </span>by<span class="w"> </span>name<span class="o">.</span><span class="w"> </span><span class="nv">But</span><span class="w"> </span>we<span class="w"> </span>better
<span class="linenos">1984</span><span class="w"> </span>have<span class="w"> </span>a<span class="w"> </span>bidirectional<span class="w"> </span>successor/predecessor<span class="w"> </span>via<span class="w"> </span>declare_constraint
<span class="linenos">1985</span>
<span class="linenos">1986</span><span class="mi">5</span><span class="err">)</span><span class="w"> </span>we<span class="w"> </span>could<span class="w"> </span>implement<span class="w"> </span>an<span class="w"> </span>automated<span class="w"> </span>theorem<span class="w"> </span>prover<span class="w"> </span>in<span class="w"> </span>lambdaProlog
<span class="linenos">1987</span><span class="w"> </span>that<span class="w"> </span>works<span class="w"> </span>or<span class="w"> </span><span class="kd">is</span><span class="w"> </span>interfaced<span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span><span class="nv">HOL-light</span><span class="w"> </span>code<span class="o">.</span><span class="w"> </span><span class="nv">There</span><span class="w"> </span>are
<span class="linenos">1988</span><span class="w"> </span>complete<span class="w"> </span>provers<span class="w"> </span>like<span class="w"> </span>leanCOP<span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="w"> </span>that<span class="w"> </span>are<span class="w"> </span>only<span class="w"> </span><span class="mi">10</span><span class="w"> </span>lines<span class="w"> </span>of<span class="w"> </span>code<span class="kd">,</span>
<span class="linenos">1989</span><span class="w"> </span>but<span class="w"> </span>use<span class="w"> </span>some<span class="w"> </span><span class="nv">Prolog</span><span class="w"> </span>tricks<span class="o">.</span>
<span class="linenos">1990</span>
<span class="linenos">1991</span><span class="mi">6</span><span class="err">)</span><span class="w"> </span>we<span class="w"> </span>should<span class="w"> </span>do<span class="w"> </span>a<span class="w"> </span>small<span class="w"> </span>formalization<span class="kd">,</span><span class="w"> </span>possibly<span class="w"> </span>developing<span class="w"> </span>a<span class="w"> </span>tactic<span class="kd">,</span>
<span class="linenos">1992</span><span class="w"> </span>to<span class="w"> </span>prove<span class="w"> </span>that<span class="w"> </span>everything<span class="w"> </span><span class="kd">is</span><span class="w"> </span>working<span class="o">.</span><span class="w"> </span><span class="nv">For</span><span class="w"> </span>example<span class="kd">,</span><span class="w"> </span>a<span class="w"> </span>decision<span class="w"> </span>procedure
<span class="linenos">1993</span><span class="w"> </span>for<span class="w"> </span>rings<span class="w"> </span>or<span class="w"> </span>for<span class="w"> </span>linear<span class="w"> </span>inequations<span class="o">.</span>
<span class="linenos">1994</span>
<span class="linenos">1995</span><span class="kd">*/</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/hollight.elpi&quot;, line 28, column 0, characters 756-797:</span>
<span class="go">local keyword is no longer supported</span>
</pre></div>
</div>
<p><strong>../../tests/sources/hollight_legacy.elpi
:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Fatal error: exception Failure(&quot;File /home/runner/work/elpi/elpi/docs/source/../../tests/sources/hollight_legacy.elpi not found in: /home/runner/work/elpi/elpi/_build/default/../lib/, /home/runner/work/elpi/elpi/_build/default/../lib/ocaml, /home/runner/work/elpi/elpi/_build/install/default/lib, /home/runner/work/elpi/elpi/_build/default&quot;)</span>
</pre></div>
</div>
<p><strong>../../tests/sources/hyp_uvar.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>.
<span class="linenos">2</span>
<span class="linenos">3</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">4</span><span class="w">  </span>(f<span class="w"> </span><span class="kd">uvar</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;ok&quot;</span><span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>(f<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>not<span class="o">(</span>f<span class="w"> </span><span class="mi">1</span><span class="o">))</span><span class="kd">,</span><span class="w"> </span>var<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ok</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/hyp_uvar.elpi&quot;, line 5, column 3, characters 27-67:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>

<span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/impl.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c">% q X Y shoud yield X=ok Y=ok</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="err">:</span>untyped<span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(r<span class="w"> </span>a<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>p<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>f<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">.</span>
<span class="linenos">4</span><span class="err">:</span>untyped<span class="w"> </span>f<span class="w"> </span>ok<span class="w"> </span>ko<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>r<span class="w"> </span>a<span class="o">.</span>
<span class="linenos">5</span><span class="err">:</span>untyped<span class="w"> </span>f<span class="w"> </span>ok<span class="w"> </span>ok<span class="o">.</span>
<span class="linenos">6</span><span class="err">:</span>untyped<span class="w"> </span>p<span class="w"> </span>ko<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>r<span class="w"> </span>a<span class="o">.</span>
<span class="linenos">7</span><span class="err">:</span>untyped<span class="w"> </span>p<span class="w"> </span>ok<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>r<span class="w"> </span>a<span class="o">.</span>
<span class="linenos">8</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/impl2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c">% q X yields X=ok</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="err">:</span>untyped<span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(a<span class="kd">,</span><span class="w"> </span><span class="o">(</span>b<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>a<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="o">(</span>a<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>c<span class="o">))</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>(b<span class="kd">,</span>c<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>r<span class="w"> </span>ok<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>r<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">4</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/index2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="c">% to be traced</span>
<span class="linenos">  2</span>
<span class="linenos">  3</span><span class="k k-Mode">:index</span><span class="w">(</span><span class="mi">_ _ _ _ _ _ _ _ 1</span>)
<span class="linenos">  4</span><span class="kd">pred</span><span class="w"> </span><span class="nf">p</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>.
<span class="linenos">  5</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">  6</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">  7</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">  8</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">  9</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 10</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 11</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 12</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 13</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 14</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 15</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 16</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 17</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 18</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 19</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 20</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 21</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 22</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 23</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 24</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 25</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 26</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 27</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 28</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 29</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 30</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 31</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 32</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 33</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 34</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 35</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 36</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 37</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 38</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 39</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 40</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 41</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 42</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 43</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 44</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 45</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 46</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 47</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 48</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 49</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 50</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 51</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 52</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 53</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 54</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 55</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 56</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 57</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 58</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 59</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 60</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 61</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 62</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 63</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 64</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 65</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 66</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 67</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 68</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 69</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 70</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 71</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 72</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 73</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 74</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 75</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 76</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 77</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 78</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 79</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 80</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 81</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 82</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 83</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 84</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 85</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 86</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 87</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 88</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 89</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 90</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 91</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 92</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 93</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 94</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 95</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 96</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 97</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 98</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos"> 99</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">100</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">101</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">102</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">103</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">104</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">105</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">106</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">107</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">108</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">109</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span>
<span class="linenos">110</span>
<span class="linenos">111</span><span class="kd">pred</span><span class="w"> </span><span class="nf">iter</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">prop</span>.
<span class="linenos">112</span>iter<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">P</span><span class="kd">,</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">-</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span>iter<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">P</span><span class="o">.</span>
<span class="linenos">113</span>iter<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos">114</span>
<span class="linenos">115</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">116</span><span class="w">  </span>iter<span class="w"> </span><span class="mi">999999</span><span class="w"> </span>(p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.001</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 1.837</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/io_colon.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>.
<span class="linenos">2</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">i</span>\<span class="w"> </span>f<span class="w"> </span>i<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>true<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>f<span class="w"> </span><span class="mi">1</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/lambda.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">% test Z yields Z=impl(impl A B) (impl A B)</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="c">% Type inference for simply typed lambda terms</span>
<span class="linenos"> 4</span><span class="c">% Syntax: t ::= appl t t | abs F    where F is a function t -&gt; t</span>
<span class="linenos"> 5</span><span class="c">% Syntax: ty ::= impl ty ty</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="err">:</span>untyped<span class="w"> </span>of<span class="w"> </span>(appl<span class="w"> </span><span class="nv">T1</span><span class="w"> </span><span class="nv">T2</span><span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>of<span class="w"> </span><span class="nv">T1</span><span class="w"> </span>(impl<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>of<span class="w"> </span><span class="nv">T2</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos"> 8</span><span class="err">:</span>untyped<span class="w"> </span>of<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(impl<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>of<span class="w"> </span>x<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>of<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="err">:</span>untyped<span class="w"> </span>test<span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>of<span class="w"> </span>(lam<span class="w"> </span><span class="nv">f\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">a\</span><span class="w"> </span>appl<span class="w"> </span>f<span class="w"> </span>a<span class="o">)</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>test<span class="w"> </span><span class="nv">Z</span><span class="kd">,</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>impl<span class="w"> </span>(impl<span class="w"> </span>a<span class="w"> </span>b<span class="o">)</span><span class="w"> </span>(impl<span class="w"> </span>a<span class="w"> </span>b<span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/lambda2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c">% q X yields X=ok</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="err">:</span>untyped<span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>r<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>p<span class="w"> </span>x<span class="o">).</span>
<span class="linenos">4</span><span class="err">:</span>untyped<span class="w"> </span>r<span class="w"> </span>ko<span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>g<span class="w"> </span>x<span class="o">).</span>
<span class="linenos">5</span><span class="err">:</span>untyped<span class="w"> </span>r<span class="w"> </span>ok<span class="w"> </span>(<span class="nv">y\</span><span class="w"> </span>p<span class="w"> </span>y<span class="o">).</span>
<span class="linenos">6</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/lambda3.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">%%%module lambda3.</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="err">:</span>untyped<span class="w"> </span>of<span class="w"> </span>(appl<span class="w"> </span><span class="nv">T1</span><span class="w"> </span><span class="nv">T2</span><span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>of<span class="w"> </span><span class="nv">T1</span><span class="w"> </span>(impl<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>of<span class="w"> </span><span class="nv">T2</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos"> 4</span><span class="err">:</span>untyped<span class="w"> </span>of<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(impl<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>of<span class="w"> </span>x<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>of<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="err">:</span>untyped<span class="w"> </span>append<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XS</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L1</span><span class="o">)</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span>append<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="o">.</span>
<span class="linenos"> 7</span><span class="err">:</span>untyped<span class="w"> </span>append<span class="w"> </span>xnil<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="o">.</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="err">:</span>untyped<span class="w"> </span>termify<span class="w"> </span>xnil<span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span>x<span class="o">).</span>
<span class="linenos">10</span><span class="err">:</span>untyped<span class="w"> </span>termify<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XS</span><span class="o">)</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span>termify<span class="w"> </span><span class="nv">XS</span><span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>c<span class="o">).</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="err">:</span>untyped<span class="w"> </span>test<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>
<span class="linenos">13</span><span class="w">  </span><span class="nv">X1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(xcons<span class="w"> </span>x0<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x1<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x2<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x3<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x4<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x5<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x6<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x7<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x8<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x9<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x10<span class="w"> </span>xnil<span class="o">)))))))))))</span><span class="kd">,</span><span class="w"> </span>
<span class="linenos">14</span><span class="w">  </span>append<span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">15</span><span class="w">  </span>append<span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">16</span><span class="w">  </span>append<span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">17</span><span class="w">  </span>append<span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">18</span><span class="w">  </span>append<span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="nv">X6</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">19</span><span class="w">  </span><span class="c">% append X6 X6 X7 ,</span>
<span class="linenos">20</span><span class="w">  </span><span class="c">% append X7 X7 X8 ,</span>
<span class="linenos">21</span><span class="w">  </span><span class="c">% append X8 X8 X9 ,</span>
<span class="linenos">22</span><span class="w">  </span><span class="c">% append X9 X9 X10 ,</span>
<span class="linenos">23</span><span class="w">  </span><span class="c">% append X10 X10 X11 ,</span>
<span class="linenos">24</span><span class="w">  </span><span class="c">% append X11 X11 X12 ,</span>
<span class="linenos">25</span><span class="w">  </span><span class="c">% append X12 X12 X13 ,</span>
<span class="linenos">26</span><span class="w">  </span><span class="c">% append X13 X13 X14 ,</span>
<span class="linenos">27</span><span class="w">   </span><span class="c">% append X14 X14 X15 ,</span>
<span class="linenos">28</span><span class="w">   </span><span class="c">% append X15 X15 X16 ,</span>
<span class="linenos">29</span><span class="w">   </span><span class="c">% append X16 X16 X17 ,</span>
<span class="linenos">30</span><span class="w">   </span><span class="c">% append X17 X17 X18 ,</span>
<span class="linenos">31</span><span class="w">   </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X6</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">32</span><span class="w">   </span>termify<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span>
<span class="linenos">33</span>
<span class="linenos">34</span><span class="err">:</span>untyped<span class="w"> </span>once<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>of<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="err">:</span>untyped<span class="w"> </span>iter<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">37</span><span class="err">:</span>untyped<span class="w"> </span>iter<span class="w"> </span>(s<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>iter<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="err">:</span>untyped<span class="w"> </span>plus<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">40</span><span class="err">:</span>untyped<span class="w"> </span>plus<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">S</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>plus<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">S</span><span class="o">.</span>
<span class="linenos">41</span>
<span class="linenos">42</span><span class="err">:</span>untyped<span class="w"> </span>mult<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="w"> </span>zero<span class="o">.</span>
<span class="linenos">43</span><span class="err">:</span>untyped<span class="w"> </span>mult<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>mult<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="kd">,</span><span class="w"> </span>plus<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="err">:</span>untyped<span class="w"> </span>exp<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">).</span>
<span class="linenos">46</span><span class="err">:</span>untyped<span class="w"> </span>exp<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>exp<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="kd">,</span><span class="w"> </span>mult<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span>
<span class="linenos">47</span>
<span class="linenos">48</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">49</span><span class="w"> </span><span class="nv">TEN</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>s<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)))))))))</span><span class="kd">,</span>
<span class="linenos">50</span><span class="w"> </span>exp<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)))</span><span class="w"> </span><span class="nv">TEN</span><span class="w"> </span><span class="nv">THOUSAND</span><span class="kd">,</span>
<span class="linenos">51</span><span class="w"> </span>test<span class="w"> </span><span class="nv">L</span><span class="kd">,</span>
<span class="linenos">52</span><span class="w"> </span>iter<span class="w"> </span><span class="nv">THOUSAND</span><span class="w"> </span>(once<span class="w"> </span><span class="nv">L</span><span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.324</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/list_as_conj.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">type</span><span class="w"> </span><span class="nf">a, b, f</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">2</span>f<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">[</span>print<span class="w"> </span>a<span class="kd">,</span><span class="w"> </span>print<span class="w"> </span>b<span class="kd">,</span><span class="w"> </span>a<span class="kd">]</span><span class="o">.</span>
<span class="linenos">3</span>a<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(b<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">[</span>print<span class="w"> </span><span class="s2">&quot;done&quot;</span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>b<span class="o">.</span>
<span class="linenos">4</span>
<span class="linenos">5</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">a</span>
<span class="go">b</span>
<span class="go">done</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/list_comma.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">2</span><span class="w">  </span><span class="nv">L1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="mi">1</span><span class="kd">,</span><span class="mi">2</span><span class="kd">,</span><span class="mi">3</span><span class="kd">,],</span>
<span class="linenos">3</span><span class="w">  </span><span class="nv">L2</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="mi">1</span><span class="kd">,</span><span class="mi">2</span><span class="kd">,</span><span class="mi">3</span><span class="kd">],</span>
<span class="linenos">4</span><span class="w">  </span>std.length<span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>std.length<span class="w"> </span><span class="nv">L2</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/llam.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">spy</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">prop</span>.
<span class="linenos"> 2</span>spy<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w">  </span>counter<span class="w"> </span><span class="s2">&quot;run&quot;</span><span class="w"> </span><span class="nv">N</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="s2">&quot;test &quot;</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>
<span class="linenos"> 3</span><span class="w">  </span>not(not<span class="o">(</span><span class="nv">X</span><span class="o">)).</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kd">type</span><span class="w"> </span><span class="nf">test</span><span class="w"> </span><span class="kt">((A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 6</span>test<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 7</span><span class="w">  </span>spy(<span class="nv">P</span><span class="w"> </span><span class="o">(</span><span class="nv">x\y\</span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">F</span><span class="kd">,</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 8</span><span class="w">  </span>spy(<span class="nv">P</span><span class="w"> </span><span class="o">(</span><span class="nv">x\y\</span>y<span class="w"> </span><span class="kd">=</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">F</span><span class="kd">,</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 9</span><span class="w">  </span>spy(<span class="kd">pi</span><span class="w"> </span><span class="nv">dummy</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">F</span>\<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="o">(</span><span class="nv">x\y\</span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">F</span><span class="kd">,</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">10</span><span class="w">  </span>spy(<span class="kd">pi</span><span class="w"> </span><span class="nv">dummy</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">F</span>\<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="o">(</span><span class="nv">x\y\</span>y<span class="w"> </span><span class="kd">=</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">F</span><span class="kd">,</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">T</span><span class="o">)</span>
<span class="linenos">11</span><span class="w">  </span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;----------------------------------------&quot;</span>
<span class="linenos">12</span><span class="w">  </span><span class="o">.</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="kd">pred</span><span class="w"> </span><span class="nf">clause</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">any</span>.
<span class="linenos">15</span>clause<span class="w"> </span>(<span class="nv">x\y\F</span><span class="w"> </span>y<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">a\b\</span>b<span class="o">.</span>
<span class="linenos">16</span><span class="kd">pred</span><span class="w"> </span><span class="nf">clause1</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">any</span>.
<span class="linenos">17</span>clause1<span class="w"> </span>(<span class="nv">x\y\</span>x<span class="o">).</span>
<span class="linenos">18</span><span class="kd">pred</span><span class="w"> </span><span class="nf">clause2</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">any</span>.
<span class="linenos">19</span>clause2<span class="w"> </span>(<span class="nv">x\y\X</span><span class="w"> </span>x<span class="kd">,</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span>y<span class="w"> </span><span class="o">(</span><span class="nv">X</span><span class="w"> </span>x<span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">a\b\</span>b<span class="o">.</span>
<span class="linenos">20</span><span class="kd">pred</span><span class="w"> </span><span class="nf">clause3</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">any</span>.
<span class="linenos">21</span>
<span class="linenos">22</span><span class="kd">type</span><span class="w"> </span><span class="nf">r</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">B</span>.
<span class="linenos">23</span><span class="kd">pred</span><span class="w"> </span><span class="nf">prune_arg</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">any</span>.
<span class="linenos">24</span><span class="kd">pred</span><span class="w"> </span><span class="nf">prune_arg2</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">any</span>.
<span class="linenos">25</span><span class="kd">pred</span><span class="w"> </span><span class="nf">prune_arg3</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">any</span>.
<span class="linenos">26</span>prune_arg<span class="w"> </span>(r<span class="w"> </span><span class="nv">F</span><span class="o">).</span>
<span class="linenos">27</span>prune_arg2<span class="w"> </span>(r<span class="w"> </span><span class="o">(</span><span class="nv">x\F</span><span class="w"> </span>x<span class="o">)).</span>
<span class="linenos">28</span>prune_arg3<span class="w"> </span>(r<span class="w"> </span><span class="o">(</span><span class="nv">x\y\F</span><span class="w"> </span>y<span class="w"> </span>x<span class="o">)).</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="kd">type</span><span class="w"> </span><span class="nf">whatever, h, f, v</span><span class="w"> </span><span class="kt">A</span>.
<span class="linenos">31</span>
<span class="linenos">32</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">33</span><span class="w">  </span>test<span class="w"> </span>(<span class="nv">eq\F</span><span class="err">\</span><span class="w">        </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span>eq<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>x<span class="o">)</span><span class="w">             </span>(<span class="nv">a\b\</span>b<span class="o">)</span><span class="kd">,</span>
<span class="linenos">34</span><span class="w">  </span>test<span class="w"> </span>(<span class="nv">eq\F</span><span class="err">\</span><span class="w">   </span>not<span class="w"> </span><span class="o">(</span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span>eq<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>y<span class="o">))</span><span class="w">              </span>whatever<span class="kd">,</span>
<span class="linenos">35</span><span class="w">  </span>test<span class="w"> </span>(<span class="nv">eq\F</span><span class="err">\</span><span class="w">        </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span>eq<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span>r<span class="w"> </span><span class="o">(</span><span class="nv">w\</span>h<span class="w"> </span>w<span class="w"> </span>x<span class="o">)))</span><span class="w"> </span>(<span class="nv">a\b\</span>r<span class="w"> </span><span class="o">(</span><span class="nv">x\</span>h<span class="w"> </span>x<span class="w"> </span>b<span class="o">))</span><span class="kd">,</span>
<span class="linenos">36</span><span class="w">  </span>test<span class="w"> </span>(<span class="nv">eq\F</span><span class="err">\</span><span class="w">        </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">R</span>\<span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>x<span class="kd">,</span><span class="w"> </span>eq<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">R</span><span class="o">)</span><span class="w">             </span>(<span class="nv">a\b\</span>b<span class="o">)</span><span class="kd">,</span>
<span class="linenos">37</span><span class="w">  </span>test<span class="w"> </span>(<span class="nv">eq\F</span><span class="err">\</span><span class="w">   </span>not<span class="w"> </span><span class="o">(</span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">R</span>\<span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>x<span class="kd">,</span><span class="w"> </span>eq<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span><span class="nv">R</span><span class="o">)</span><span class="w"> </span>y<span class="o">))</span><span class="w">              </span>whatever<span class="kd">,</span>
<span class="linenos">38</span><span class="w">  </span>test<span class="w"> </span>(<span class="nv">eq\F</span><span class="err">\</span><span class="w">        </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">R</span>\<span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>x<span class="kd">,</span><span class="w"> </span>eq<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span>r<span class="w"> </span><span class="o">(</span><span class="nv">w\</span>h<span class="w"> </span>w<span class="w"> </span><span class="nv">R</span><span class="o">)))</span><span class="w"> </span>(<span class="nv">a\b\</span>r<span class="w"> </span><span class="o">(</span><span class="nv">x\</span>h<span class="w"> </span>x<span class="w"> </span>b<span class="o">))</span><span class="kd">,</span>
<span class="linenos">39</span><span class="w">  </span>spy<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">dummy</span>\<span class="w"> </span>clause<span class="w"> </span><span class="o">(</span><span class="nv">x\y\</span>x<span class="o">))</span><span class="kd">,</span>
<span class="linenos">40</span><span class="w">  </span>spy<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">dummy</span>\<span class="w"> </span>clause1<span class="w"> </span><span class="o">(</span><span class="nv">x\y\F</span><span class="w"> </span>y<span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">a\b\</span>b<span class="o">)</span><span class="kd">,</span>
<span class="linenos">41</span><span class="w">  </span>spy<span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">dummy</span>\<span class="w"> </span>clause2<span class="w"> </span><span class="o">(</span><span class="nv">x\y\</span>x<span class="w"> </span><span class="kd">,</span><span class="w"> </span>x<span class="o">))</span><span class="kd">,</span>
<span class="linenos">42</span><span class="w">  </span>spy<span class="w"> </span>(clause3<span class="w"> </span><span class="o">(</span><span class="nv">x\y\G</span><span class="w"> </span>y<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">dummy</span>\<span class="w"> </span>clause3<span class="w"> </span><span class="o">(</span><span class="nv">x\y\</span>x<span class="o">))</span><span class="kd">,</span><span class="w"> </span>(<span class="nv">G</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">a\b\</span>b<span class="o">)</span><span class="kd">,</span>
<span class="linenos">43</span><span class="w">  </span>test<span class="w"> </span>(<span class="nv">eq\F</span><span class="err">\</span><span class="w">        </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">H</span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span>eq<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="o">(</span>r<span class="w"> </span><span class="o">(</span><span class="nv">H</span><span class="w"> </span>y<span class="w"> </span>x<span class="o">))</span><span class="kd">,</span><span class="w"> </span><span class="nv">H</span><span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span>x<span class="kd">,</span><span class="w"> </span><span class="nv">H</span><span class="w"> </span>x<span class="w"> </span>y<span class="w"> </span><span class="kd">=</span><span class="w"> </span>x<span class="o">)</span><span class="w">   </span>(<span class="nv">a\</span>r<span class="w"> </span>a<span class="o">)</span><span class="kd">,</span>
<span class="linenos">44</span>
<span class="linenos">45</span><span class="w">  </span><span class="c">% this is hard because F&lt;H but is applied to y that H can see, so H is restricted to the</span>
<span class="linenos">46</span><span class="w">  </span><span class="c">% level of F (that alone would prune y) but applied to y, so H 1 = y works</span>
<span class="linenos">47</span><span class="w">  </span>test<span class="w"> </span>(<span class="nv">eq\F</span><span class="err">\</span><span class="w">        </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">H</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">z</span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">w</span>\eq<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="o">(</span>r<span class="w"> </span><span class="o">(</span><span class="nv">H</span><span class="w"> </span>w<span class="o">))</span><span class="kd">,</span>
<span class="linenos">48</span><span class="w">                                                    </span>spy<span class="o">(</span><span class="nv">H</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>y<span class="o">)</span><span class="kd">,</span><span class="w"> </span>not<span class="o">(</span><span class="nv">H</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>x<span class="o">))</span>
<span class="linenos">49</span><span class="w">       </span>(<span class="nv">a\</span>r<span class="w"> </span>whatever<span class="o">)</span><span class="kd">,</span>
<span class="linenos">50</span><span class="w">  </span>test<span class="w"> </span>(<span class="nv">eq\F</span><span class="err">\</span><span class="w">        </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">H</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">w</span>\eq<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span>r<span class="w"> </span><span class="o">(</span><span class="nv">H</span><span class="w"> </span>w<span class="o">))</span><span class="kd">,</span>
<span class="linenos">51</span><span class="w">                                               </span><span class="nv">H</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>f<span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span>
<span class="linenos">52</span><span class="w">       </span>(<span class="nv">a\b\</span>r<span class="w"> </span><span class="o">(</span>f<span class="w"> </span>b<span class="w"> </span>a<span class="o">))</span><span class="kd">,</span>
<span class="linenos">53</span><span class="w"> </span>
<span class="linenos">54</span><span class="w">  </span>test<span class="w"> </span>(<span class="nv">eq\F</span><span class="err">\</span><span class="w">        </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\prune_arg<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="w"> </span>x<span class="o">))</span><span class="w">  </span>(<span class="nv">a\b\</span>r<span class="w"> </span><span class="o">(</span>v<span class="w"> </span>a<span class="w"> </span>b<span class="o">))</span><span class="kd">,</span>
<span class="linenos">55</span><span class="w">  </span>test<span class="w"> </span>(<span class="nv">eq\F</span><span class="err">\</span><span class="w">        </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\prune_arg2<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="w"> </span>x<span class="o">))</span><span class="w"> </span>(<span class="nv">a\b\</span>r<span class="w"> </span><span class="o">(</span><span class="nv">x\</span>v<span class="w"> </span>a<span class="w"> </span>b<span class="o">))</span><span class="kd">,</span>
<span class="linenos">56</span><span class="w">  </span>test<span class="w"> </span>(<span class="nv">eq\F</span><span class="err">\</span><span class="w">        </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\prune_arg3<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>y<span class="w"> </span>x<span class="o">))</span><span class="w"> </span>(<span class="nv">a\b\</span>r<span class="w"> </span><span class="o">(</span><span class="nv">x\y\</span>v<span class="w"> </span>a<span class="w"> </span>b<span class="o">))</span><span class="kd">,</span>
<span class="linenos">57</span><span class="w"> </span>
<span class="linenos">58</span><span class="w">  </span>true<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">0 test  pi c0 \ pi c1 \ X0 c1 c0 = c0 , X0 = (c0 \ c1 \ c1)</span>
<span class="go">0 test  pi c0 \ pi c1 \ c0 = X0 c1 c0 , X0 = (c0 \ c1 \ c1)</span>
<span class="go">0 test  pi c0 \ sigma c1 \ pi c2 \ pi c3 \ c1 c3 c2 = c2 , c1 = (c2 \ c3 \ c3)</span>
<span class="go">0 test  pi c0 \ sigma c1 \ pi c2 \ pi c3 \ c2 = c1 c3 c2 , c1 = (c2 \ c3 \ c3)</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test  not (pi c0 \ pi c1 \ X1 c0 = c1) , X1 = whatever</span>
<span class="go">0 test  not (pi c0 \ pi c1 \ c1 = X1 c0) , X1 = whatever</span>
<span class="go">0 test  pi c0 \ sigma c1 \ not (pi c2 \ pi c3 \ c1 c2 = c3) , c1 = whatever</span>
<span class="go">0 test  pi c0 \ sigma c1 \ not (pi c2 \ pi c3 \ c3 = c1 c2) , c1 = whatever</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ X2 c1 c0 = r c2 \ h c2 c0 , X2 = (c0 \ c1 \ r c2 \ h c2 c1)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ r c2 \ h c2 c0 = X2 c1 c0 , X2 = (c0 \ c1 \ r c2 \ h c2 c1)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ c1 c3 c2 = r c4 \ h c4 c2 , c1 = (c2 \ c3 \ r c4 \ h c4 c3)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ r c4 \ h c4 c2 = c1 c3 c2 , c1 = (c2 \ c3 \ r c4 \ h c4 c3)</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ sigma c2 \ c2 = c0 , X3 c1 c0 = c2 , X3 = (c0 \ c1 \ c1)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ sigma c2 \ c2 = c0 , c2 = X3 c1 c0 , X3 = (c0 \ c1 \ c1)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ sigma c4 \ c4 = c2 , c1 c3 c2 = c4 , c1 = (c2 \ c3 \ c3)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ sigma c4 \ c4 = c2 , c4 = c1 c3 c2 , c1 = (c2 \ c3 \ c3)</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test  not (pi c0 \ pi c1 \ sigma c2 \ c2 = c0 , X4 c2 = c1) , X4 = whatever</span>
<span class="go">0 test  not (pi c0 \ pi c1 \ sigma c2 \ c2 = c0 , c1 = X4 c2) , X4 = whatever</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   not (pi c2 \ pi c3 \ sigma c4 \ c4 = c2 , c1 c4 = c3) , c1 = whatever</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   not (pi c2 \ pi c3 \ sigma c4 \ c4 = c2 , c3 = c1 c4) , c1 = whatever</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ sigma c2 \ c2 = c0 , X5 c1 c0 = r c3 \ h c3 c2 ,</span>
<span class="go">  X5 = (c0 \ c1 \ r c2 \ h c2 c1)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ sigma c2 \ c2 = c0 , r c3 \ h c3 c2 = X5 c1 c0 ,</span>
<span class="go">  X5 = (c0 \ c1 \ r c2 \ h c2 c1)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ sigma c4 \ c4 = c2 , c1 c3 c2 = r c5 \ h c5 c4 ,</span>
<span class="go">    c1 = (c2 \ c3 \ r c4 \ h c4 c3)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ sigma c4 \ c4 = c2 , r c5 \ h c5 c4 = c1 c3 c2 ,</span>
<span class="go">    c1 = (c2 \ c3 \ r c4 \ h c4 c3)</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test  pi c0 \ clause c1 \ c2 \ c1</span>
<span class="go">0 test  pi c0 \ clause1 c1 \ c2 \ X6 c2 c1 , X6 = (c1 \ c2 \ c2)</span>
<span class="go">0 test  pi c0 \ clause2 c1 \ c2 \ c1 , c1</span>
<span class="go">0 test  clause3 c0 \ c1 \ X7 c1 c0 =&gt; pi c0 \ clause3 c1 \ c2 \ c1</span>
<span class="go">0 test</span>
<span class="go"> sigma c0 \</span>
<span class="go">  pi c1 \ pi c2 \ , (X8 c2 = r (c0 c2 c1)) (c0 c1 c1 = c1) (c0 c1 c2 = c1) ,</span>
<span class="go">  X8 = (c0 \ r c0)</span>
<span class="go">0 test</span>
<span class="go"> sigma c0 \</span>
<span class="go">  pi c1 \ pi c2 \ , (r (c0 c2 c1) = X8 c2) (c0 c1 c1 = c1) (c0 c1 c2 = c1) ,</span>
<span class="go">  X8 = (c0 \ r c0)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   sigma c2 \</span>
<span class="go">    pi c3 \ pi c4 \ , (c1 c4 = r (c2 c4 c3)) (c2 c3 c3 = c3) (c2 c3 c4 = c3) ,</span>
<span class="go">    c1 = (c2 \ r c2)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   sigma c2 \</span>
<span class="go">    pi c3 \ pi c4 \ , (r (c2 c4 c3) = c1 c4) (c2 c3 c3 = c3) (c2 c3 c4 = c3) ,</span>
<span class="go">    c1 = (c2 \ r c2)</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  pi c1 \</span>
<span class="go">   sigma c2 \</span>
<span class="go">    pi c3 \ pi c4 \ , (X9 c1 = r (c2 c4)) (spy (c2 1 = c1)) (not (c2 2 = c0)) ,</span>
<span class="go">  X9 = (c0 \ r whatever)</span>
<span class="go">0 test  X10 c1 = c1</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  pi c1 \</span>
<span class="go">   sigma c2 \</span>
<span class="go">    pi c3 \ pi c4 \ , (r (c2 c4) = X9 c1) (spy (c2 1 = c1)) (not (c2 2 = c0)) ,</span>
<span class="go">  X9 = (c0 \ r whatever)</span>
<span class="go">0 test  X11 c1 = c1</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \</span>
<span class="go">    pi c3 \</span>
<span class="go">     sigma c4 \</span>
<span class="go">      pi c5 \ pi c6 \ , (c1 c3 = r (c4 c6)) (spy (c4 1 = c3)) (not (c4 2 = c2))</span>
<span class="go">    , c1 = (c2 \ r whatever)</span>
<span class="go">0 test  X12^1 c2 = c2</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \</span>
<span class="go">    pi c3 \</span>
<span class="go">     sigma c4 \</span>
<span class="go">      pi c5 \ pi c6 \ , (r (c4 c6) = c1 c3) (spy (c4 1 = c3)) (not (c4 2 = c2))</span>
<span class="go">    , c1 = (c2 \ r whatever)</span>
<span class="go">0 test  X13^1 c2 = c2</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ sigma c2 \ pi c3 \ X14 c1 c0 = r (c2 c3) , c2 1 = f c0 c1 ,</span>
<span class="go">  X14 = (c0 \ c1 \ r (f c1 c0))</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ sigma c2 \ pi c3 \ r (c2 c3) = X14 c1 c0 , c2 1 = f c0 c1 ,</span>
<span class="go">  X14 = (c0 \ c1 \ r (f c1 c0))</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ sigma c4 \ pi c5 \ c1 c3 c2 = r (c4 c5) , c4 1 = f c2 c3 ,</span>
<span class="go">    c1 = (c2 \ c3 \ r (f c3 c2))</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ sigma c4 \ pi c5 \ r (c4 c5) = c1 c3 c2 , c4 1 = f c2 c3 ,</span>
<span class="go">    c1 = (c2 \ c3 \ r (f c3 c2))</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test  pi c0 \ pi c1 \ prune_arg (X15 c1 c0) , X15 = (c0 \ c1 \ r (v c0 c1))</span>
<span class="go">0 test  pi c0 \ pi c1 \ prune_arg (X15 c1 c0) , X15 = (c0 \ c1 \ r (v c0 c1))</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ prune_arg (c1 c3 c2) , c1 = (c2 \ c3 \ r (v c2 c3))</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ prune_arg (c1 c3 c2) , c1 = (c2 \ c3 \ r (v c2 c3))</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ prune_arg2 (X16 c1 c0) , X16 = (c0 \ c1 \ r c2 \ v c0 c1)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ prune_arg2 (X16 c1 c0) , X16 = (c0 \ c1 \ r c2 \ v c0 c1)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ prune_arg2 (c1 c3 c2) , c1 = (c2 \ c3 \ r c4 \ v c2 c3)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ prune_arg2 (c1 c3 c2) , c1 = (c2 \ c3 \ r c4 \ v c2 c3)</span>
<span class="go">----------------------------------------</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ prune_arg3 (X17 c1 c0) , X17 = (c0 \ c1 \ r c2 \ c3 \ v c0 c1)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \ pi c1 \ prune_arg3 (X17 c1 c0) , X17 = (c0 \ c1 \ r c2 \ c3 \ v c0 c1)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ prune_arg3 (c1 c3 c2) , c1 = (c2 \ c3 \ r c4 \ c5 \ v c2 c3)</span>
<span class="go">0 test</span>
<span class="go"> pi c0 \</span>
<span class="go">  sigma c1 \</span>
<span class="go">   pi c2 \ pi c3 \ prune_arg3 (c1 c3 c2) , c1 = (c2 \ c3 \ r c4 \ c5 \ v c2 c3)</span>
<span class="go">----------------------------------------</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 26, column 14, characters 637-637:</span>
<span class="go">F is linear: name it _F (discard) or F_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 27, column 17, characters 657-660:</span>
<span class="go">F is linear: name it _F (discard) or F_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/llam.elpi&quot;, line 28, column 19, characters 683-688:</span>
<span class="go">F is linear: name it _F (discard) or F_ (fresh variable)</span>

<span class="go">Compilation time: 0.001</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.002</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/llamchr.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">term</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">B</span>.
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="err">:</span>untyped<span class="w"> </span>term<span class="w"> </span>(app<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>term<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(arr<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>term<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos"> 4</span><span class="err">:</span>untyped<span class="w"> </span>term<span class="w"> </span>(lam<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(arr<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>term<span class="w"> </span>x<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>term<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos"> 5</span><span class="err">:</span>untyped<span class="w"> </span>term<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>(term<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 6</span><span class="err">:</span>untyped<span class="w"> </span>term<span class="w"> </span>true<span class="w"> </span>bool<span class="o">.</span>
<span class="linenos"> 7</span><span class="err">:</span>untyped<span class="w"> </span>term<span class="w"> </span>false<span class="w"> </span>bool<span class="o">.</span>
<span class="linenos"> 8</span><span class="err">:</span>untyped<span class="w"> </span>term<span class="w"> </span>zero<span class="w"> </span>nat<span class="o">.</span>
<span class="linenos"> 9</span><span class="err">:</span>untyped<span class="w"> </span>term<span class="w"> </span>succ<span class="w"> </span>(arr<span class="w"> </span>nat<span class="w"> </span>nat<span class="o">).</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="kd">constraint</span><span class="w"> </span><span class="nf">term </span>{
<span class="linenos">12</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(<span class="nv">GX</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>term<span class="w"> </span><span class="o">(</span><span class="kd">uvar</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">LX</span><span class="o">)</span><span class="w"> </span><span class="nv">TX</span><span class="o">)</span>
<span class="linenos">13</span><span class="w">     </span><span class="kd">\</span><span class="w"> </span>(<span class="nv">GY</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>term<span class="w"> </span><span class="o">(</span><span class="kd">uvar</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">LY</span><span class="o">)</span><span class="w"> </span><span class="nv">TY</span><span class="o">)</span>
<span class="linenos">14</span><span class="w">     </span><span class="kd">|</span><span class="w"> </span>(compatible<span class="w"> </span><span class="nv">GX</span><span class="w"> </span><span class="nv">LX</span><span class="w"> </span><span class="nv">GY</span><span class="w"> </span><span class="nv">LY</span><span class="w"> </span><span class="nv">CTXCONSTR</span><span class="o">)</span>
<span class="linenos">15</span><span class="w">   </span><span class="kd">&lt;=&gt;</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">TX</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="kd">,</span><span class="w"> </span><span class="nv">CTXCONSTR</span><span class="w"> </span><span class="kd">]</span><span class="o">.</span>
<span class="linenos">16</span>}
<span class="linenos">17</span>
<span class="linenos">18</span><span class="c">% resilient to dummy ctx variables</span>
<span class="linenos">19</span><span class="err">:</span>untyped<span class="w"> </span>both_or_none<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">Q</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">P</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">Q</span><span class="o">.</span>
<span class="linenos">20</span><span class="err">:</span>untyped<span class="w"> </span>both_or_none<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">Q</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>not<span class="w"> </span><span class="nv">P</span><span class="kd">,</span><span class="w"> </span>not<span class="w"> </span><span class="nv">Q</span><span class="o">.</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="err">:</span>untyped<span class="w"> </span>compatible<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">23</span><span class="err">:</span>untyped<span class="w"> </span>compatible<span class="w"> </span><span class="nv">GX</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">GY</span><span class="w"> </span><span class="kd">[</span><span class="nv">Y</span><span class="kd">|</span><span class="nv">YS</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="nv">TX</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">K</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">24</span><span class="w"> </span>both_or_none<span class="w"> </span>(<span class="nv">GX</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>term<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">TX</span><span class="o">)</span><span class="w"> </span>(<span class="nv">GY</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>term<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">TY</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">25</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">26</span><span class="w"> </span>compatible<span class="w"> </span><span class="nv">GX</span><span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">GY</span><span class="w"> </span><span class="nv">YS</span><span class="w"> </span><span class="nv">K</span><span class="o">.</span>
<span class="linenos">27</span><span class="err">:</span>untyped<span class="w"> </span>compatible<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[</span>false<span class="kd">]</span><span class="o">.</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="err">:</span>untyped<span class="w"> </span>spy<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;[&quot;</span><span class="w"> </span><span class="nv">P</span><span class="kd">,</span><span class="w"> </span><span class="nv">P</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;]ok&quot;</span><span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">30</span><span class="err">:</span>untyped<span class="w"> </span>spy<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;]fail&quot;</span><span class="kd">,</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="kd">pred</span><span class="w"> </span><span class="nf">watch</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.
<span class="linenos">33</span>watch<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>(print<span class="w"> </span><span class="s2">&quot;watch&quot;</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">],</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">34</span>watch<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;watch&quot;</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>
<span class="linenos">37</span><span class="w">  </span><span class="c">% this is tricky becasuse X sees w, so CHR has to deal with a dirty context</span>
<span class="linenos">38</span><span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">w</span>\<span class="w"> </span>(sigma<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">A&#39;</span><span class="w"> </span><span class="nv">B&#39;</span><span class="w"> </span><span class="nv">T1</span><span class="w"> </span><span class="nv">T2</span><span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">v</span>\
<span class="linenos">39</span><span class="w">    </span>term<span class="w"> </span>b2n<span class="w"> </span><span class="o">(</span>arr<span class="w"> </span>bool<span class="w"> </span>nat<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span>
<span class="linenos">40</span><span class="w">      </span><span class="o">(</span><span class="nv">T1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">y\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="kd">,</span>
<span class="linenos">41</span><span class="w">       </span><span class="nv">T2</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">y\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>y<span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos">42</span><span class="w">       </span>term<span class="w"> </span><span class="nv">T1</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span><span class="nv">B</span><span class="w"> </span>nat<span class="o">))</span><span class="kd">,</span>
<span class="linenos">43</span><span class="w">       </span>term<span class="w"> </span><span class="nv">T2</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span><span class="nv">A&#39;</span><span class="w"> </span><span class="o">(</span>arr<span class="w"> </span><span class="nv">B&#39;</span><span class="w"> </span><span class="nv">C</span><span class="o">))</span><span class="kd">,</span>
<span class="linenos">44</span><span class="w">       </span>print<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A&#39;</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">B&#39;</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="s2">&quot;|&quot;</span><span class="w"> </span><span class="nv">T1</span><span class="w"> </span><span class="s2">&quot;|&quot;</span><span class="w"> </span><span class="nv">T2</span><span class="kd">,</span>
<span class="linenos">45</span><span class="w">       </span>spy<span class="w"> </span><span class="o">(</span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">x\y\</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos">46</span><span class="w">       </span>print<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A&#39;</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">B&#39;</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="s2">&quot;|&quot;</span><span class="w"> </span><span class="nv">T1</span><span class="w"> </span><span class="s2">&quot;|&quot;</span><span class="w"> </span><span class="nv">T2</span><span class="kd">,</span>
<span class="linenos">47</span><span class="w">       </span>spy<span class="w"> </span><span class="o">(</span>term<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">T2</span><span class="w"> </span>false<span class="o">)</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">48</span><span class="w">       </span>print<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A&#39;</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">B&#39;</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="s2">&quot;|&quot;</span><span class="w"> </span><span class="nv">T1</span><span class="w"> </span><span class="s2">&quot;|&quot;</span><span class="w"> </span><span class="nv">T2</span><span class="o">))</span><span class="kd">,</span>
<span class="linenos">49</span><span class="w">  </span>true<span class="o">.</span>
<span class="linenos">50</span>
<span class="linenos">51</span><span class="c">% vim: set ft=lprolog:</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">X0 X1 X1 X0 nat | lam X0 c2 \ lam X1 c3 \ X2 c0 c2 c3 |</span>
<span class="go"> lam X1 c2 \ lam X0 c3 \ X2 c0 c3 c2</span>
<span class="go">[ (c2 \ c3 \ X2 c0 c2 c3) = (c2 \ c3 \ c2)</span>
<span class="go">]ok</span>
<span class="go">nat X1 X1 nat nat | lam nat c2 \ lam X1 c3 \ c2 | lam X1 c2 \ lam nat c3 \ c3</span>
<span class="go">[ term (app (lam X1 c2 \ lam nat c3 \ c3) false) _</span>
<span class="go">]ok</span>
<span class="go">nat bool bool nat nat | lam nat c2 \ lam bool c3 \ c2 |</span>
<span class="go"> lam bool c2 \ lam nat c3 \ c3</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/map.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">build</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">std.map</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">std.map</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int</span>.
<span class="linenos"> 2</span>build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 3</span>build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 4</span><span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span>
<span class="linenos"> 5</span><span class="w">  </span>std.map.add<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XR</span><span class="kd">,</span>
<span class="linenos"> 6</span><span class="w">  </span>build<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">XR</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="kd">pred</span><span class="w"> </span><span class="nf">test</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(int</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.
<span class="linenos"> 9</span>test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">10</span>test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">11</span><span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span>
<span class="linenos">12</span><span class="w">  </span>std.assert!<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not found&quot;</span><span class="kd">,</span>
<span class="linenos">13</span><span class="w">  </span>test<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="kd">pred</span><span class="w"> </span><span class="nf">test2</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(int</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.
<span class="linenos">16</span>test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">17</span>test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">18</span><span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span>
<span class="linenos">19</span><span class="w">  </span>std.assert!<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not found&quot;</span><span class="kd">,</span>
<span class="linenos">20</span><span class="w">  </span>test2<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span>
<span class="linenos">21</span>
<span class="linenos">22</span>macro<span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="mi">4096</span><span class="o">.</span>
<span class="linenos">23</span>
<span class="linenos">24</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">25</span><span class="w">  </span>std.time<span class="w"> </span>(build<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>{std.map.make<span class="w"> </span>cmp_term} <span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time0</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">26</span><span class="w">  </span>std.time<span class="w"> </span>(test<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>std.map.find<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time1</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">27</span><span class="w">  </span>std.map.bindings<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span>
<span class="linenos">28</span><span class="w">  </span>std.assert!<span class="w"> </span>({std.length<span class="w"> </span><span class="nv">B</span>} <span class="kd">=</span><span class="w"> </span><span class="kd">@</span>iters<span class="kd">,</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="kd">|</span><span class="nv">_</span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;bindings broken&quot;</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">29</span><span class="w">  </span>std.time<span class="w"> </span>(test2<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>std.map.remove<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time2</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">30</span><span class="w">  </span>print<span class="w"> </span><span class="nv">Time0</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time1</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time2</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1.285111 + 0.057073 + 0.923032</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 2.491</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/map_list.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">l</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 2</span><span class="kd">type</span><span class="w"> </span><span class="nf">n</span><span class="w"> </span><span class="kt">l</span>.
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">c</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">l</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">l</span>.
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kd">pred</span><span class="w"> </span><span class="nf">add</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">l</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">l</span>.
<span class="linenos"> 6</span>add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span>n<span class="w"> </span>(c<span class="w"> </span><span class="o">(</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="o">)</span><span class="w"> </span>n<span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 7</span>add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span>(c<span class="w"> </span><span class="o">(</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span>(c<span class="w"> </span><span class="o">(</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 8</span>add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span>(c<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span>(c<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="kd">pred</span><span class="w"> </span><span class="nf">bindings</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">l</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>.
<span class="linenos">11</span>bindings<span class="w"> </span>n<span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
<span class="linenos">12</span>bindings<span class="w"> </span>(c<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">L1</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>bindings<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="kd">pred</span><span class="w"> </span><span class="nf">assoc</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">l</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.
<span class="linenos">15</span>assoc<span class="w"> </span><span class="nv">K</span><span class="w"> </span>(c<span class="w"> </span><span class="o">(</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="o">)</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">16</span>assoc<span class="w"> </span><span class="nv">K</span><span class="w"> </span>(c<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>assoc<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="kd">pred</span><span class="w"> </span><span class="nf">remove</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">l</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">l</span>.
<span class="linenos">19</span>remove<span class="w"> </span><span class="nv">K</span><span class="w"> </span>(c<span class="w"> </span><span class="o">(</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">20</span>remove<span class="w"> </span><span class="nv">K</span><span class="w"> </span>(c<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span>(c<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>remove<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="kd">pred</span><span class="w"> </span><span class="nf">build</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">l</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">l</span>.
<span class="linenos">23</span>build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">24</span>build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">25</span><span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span>
<span class="linenos">26</span><span class="w">  </span>add<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XR</span><span class="kd">,</span>
<span class="linenos">27</span><span class="w">  </span>build<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">XR</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="kd">pred</span><span class="w"> </span><span class="nf">test</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(int</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.
<span class="linenos">30</span>test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">31</span>test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">32</span><span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span>
<span class="linenos">33</span><span class="w">  </span>std.assert!<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not found&quot;</span><span class="kd">,</span>
<span class="linenos">34</span><span class="w">  </span>test<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="kd">pred</span><span class="w"> </span><span class="nf">test2</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(int</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.
<span class="linenos">37</span>test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">38</span>test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">39</span><span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span>
<span class="linenos">40</span><span class="w">  </span>std.assert!<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not found&quot;</span><span class="kd">,</span>
<span class="linenos">41</span><span class="w">  </span>test2<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span>
<span class="linenos">42</span>
<span class="linenos">43</span>macro<span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="mi">4096</span><span class="o">.</span>
<span class="linenos">44</span>
<span class="linenos">45</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">46</span><span class="w">  </span>std.time<span class="w"> </span>(build<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>n<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time0</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">47</span><span class="w">  </span>std.time<span class="w"> </span>(test<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>assoc<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time1</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">48</span><span class="w">  </span>bindings<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span>
<span class="linenos">49</span><span class="w">  </span>std.assert!<span class="w"> </span>({std.length<span class="w"> </span><span class="nv">B</span>} <span class="kd">=</span><span class="w"> </span><span class="kd">@</span>iters<span class="kd">,</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="kd">|</span><span class="nv">_</span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;bindings broken&quot;</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">50</span><span class="w">  </span>std.time<span class="w"> </span>(test2<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>remove<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time2</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">51</span><span class="w">  </span>print<span class="w"> </span><span class="nv">Time0</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time1</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time2</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">6.507603 + 3.201724 + 0.399113</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 10.115</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/map_list_opt.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">add</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>.
<span class="linenos"> 2</span>add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 3</span>add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">_</span><span class="kd">|</span><span class="w"> </span><span class="nv">L</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="kd">|</span><span class="w"> </span><span class="nv">L</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 4</span>add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="w"> </span><span class="nv">L</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="w"> </span><span class="nv">L1</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>add<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kd">pred</span><span class="w"> </span><span class="nf">bindings</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>.
<span class="linenos"> 7</span>bindings<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="kd">pred</span><span class="w"> </span><span class="nf">assoc</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.
<span class="linenos">10</span>assoc<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">V</span><span class="kd">|</span><span class="w"> </span><span class="nv">_</span><span class="kd">]</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">11</span>assoc<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">|</span><span class="w"> </span><span class="nv">L</span><span class="kd">]</span><span class="w"> </span><span class="nv">V</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>assoc<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">V</span><span class="o">.</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="kd">pred</span><span class="w"> </span><span class="nf">remove</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>.
<span class="linenos">14</span>remove<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">_</span><span class="kd">|</span><span class="w"> </span><span class="nv">L</span><span class="kd">]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">15</span>remove<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="w"> </span><span class="nv">L</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="w"> </span><span class="nv">L1</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>remove<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="kd">pred</span><span class="w"> </span><span class="nf">build</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">(pair</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">int)</span>.
<span class="linenos">18</span>build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">19</span>build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">20</span><span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span>
<span class="linenos">21</span><span class="w">  </span>add<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XR</span><span class="kd">,</span>
<span class="linenos">22</span><span class="w">  </span>build<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">XR</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="kd">pred</span><span class="w"> </span><span class="nf">test</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(int</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.
<span class="linenos">25</span>test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">26</span>test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">27</span><span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span>
<span class="linenos">28</span><span class="w">  </span>std.assert!<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not found&quot;</span><span class="kd">,</span>
<span class="linenos">29</span><span class="w">  </span>test<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">30</span>
<span class="linenos">31</span><span class="kd">pred</span><span class="w"> </span><span class="nf">test2</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(int</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.
<span class="linenos">32</span>test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">33</span>test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">34</span><span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span>
<span class="linenos">35</span><span class="w">  </span>std.assert!<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not found&quot;</span><span class="kd">,</span>
<span class="linenos">36</span><span class="w">  </span>test2<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span>
<span class="linenos">37</span>
<span class="linenos">38</span>macro<span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="mi">4096</span><span class="o">.</span>
<span class="linenos">39</span>
<span class="linenos">40</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">41</span><span class="w">  </span>std.time<span class="w"> </span>(build<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time0</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">42</span><span class="w">  </span>std.time<span class="w"> </span>(test<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>assoc<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time1</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">43</span><span class="w">  </span>bindings<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span>
<span class="linenos">44</span><span class="w">  </span>std.assert!<span class="w"> </span>({std.length<span class="w"> </span><span class="nv">B</span>} <span class="kd">=</span><span class="w"> </span><span class="kd">@</span>iters<span class="kd">,</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span>pr<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="kd">|</span><span class="nv">_</span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;bindings broken&quot;</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">45</span><span class="w">  </span>std.time<span class="w"> </span>(test2<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>remove<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time2</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">46</span><span class="w">  </span>print<span class="w"> </span><span class="nv">Time0</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time1</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time2</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">5.844409 + 2.820146 + 0.235923</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 8.906</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/name_builtin.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">2</span><span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">f x y</span>\
<span class="linenos">3</span><span class="w">    </span>name<span class="w"> </span><span class="o">(</span>f<span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="w"> </span>f<span class="w"> </span><span class="kd">[</span>x<span class="kd">,</span><span class="w"> </span>y<span class="kd">]</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">4</span><span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>name<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">[]</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">5</span><span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">f x y</span>\
<span class="linenos">6</span><span class="w">    </span>name<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span>f<span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="w"> </span>f<span class="w"> </span><span class="kd">[</span>x<span class="kd">,</span>y<span class="kd">],</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;A=&quot;</span><span class="w"> </span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span>f<span class="w"> </span>x<span class="w"> </span>y<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span>f<span class="w"> </span>x<span class="w"> </span>y<span class="o">))</span><span class="kd">,</span>
<span class="linenos">7</span><span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>name<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>x<span class="w"> </span><span class="kd">[],</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;B=&quot;</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span>x<span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">A= c3 \ c4 \ c5 \ c3 c4 c5</span>
<span class="go">B= c1 \ c1</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/named_clauses00.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">c1</span>.
<span class="linenos">2</span>
<span class="linenos">3</span><span class="k k-Mode">:name</span><span class="w"> </span><span class="s2">&quot;name1&quot;</span>
<span class="linenos">4</span>c1<span class="o">.</span>
<span class="linenos">5</span>
<span class="linenos">6</span><span class="k k-Mode">:name</span><span class="w"> </span><span class="s2">&quot;name1&quot;</span>
<span class="linenos">7</span>c1<span class="o">.</span>
<span class="linenos">8</span>
<span class="linenos">9</span>main<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/named_clauses00.elpi&quot;, line 6, column 0, characters 29-45:</span>
<span class="go">duplicate clause name name1</span>
</pre></div>
</div>
<p><strong>../../tests/sources/named_clauses01.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">c1</span>.
<span class="linenos">2</span>
<span class="linenos">3</span><span class="k k-Mode">:before</span><span class="w"> </span><span class="s2">&quot;c&quot;</span>
<span class="linenos">4</span>c1<span class="w"> </span>
<span class="linenos">5</span>
<span class="linenos">6</span>main<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/named_clauses01.elpi&quot;, line 6, column 0, characters 27-31:</span>
<span class="go">c1 is not a function but it is passed the argument main.</span>
<span class="go">The type of c1 is prop</span>
</pre></div>
</div>
<p><strong>../../tests/sources/named_clauses02.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">c</span>.
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="k k-Mode">:name</span><span class="w"> </span><span class="s2">&quot;c&quot;</span>
<span class="linenos"> 4</span>c<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k k-Mode">:before</span><span class="w"> </span><span class="s2">&quot;c&quot;</span>
<span class="linenos"> 7</span>c<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>true<span class="o">.</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k k-Mode">:before</span><span class="w"> </span><span class="s2">&quot;c&quot;</span>
<span class="linenos">10</span>c<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>fail<span class="kd">,</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos">11</span>
<span class="linenos">12</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>c<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/namespaces00.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">namespace</span><span class="w"> </span>rev<span class="w"> </span>{
<span class="linenos"> 2</span><span class="w">  </span><span class="kd">pred</span><span class="w"> </span><span class="nf">aux</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>.
<span class="linenos"> 3</span><span class="w">  </span>aux<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">ACC</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>aux<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">ACC</span><span class="kd">]</span><span class="w"> </span><span class="nv">R</span><span class="o">.</span>
<span class="linenos"> 4</span><span class="w">  </span>aux<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span>
<span class="linenos"> 5</span>}
<span class="linenos"> 6</span><span class="kd">pred</span><span class="w"> </span><span class="nf">rev</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>.
<span class="linenos"> 7</span>rev<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">RL</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span>rev.aux<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">[]</span><span class="w">  </span><span class="nv">RL</span><span class="o">.</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="kd">pred</span><span class="w"> </span><span class="nf">aux</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>.
<span class="linenos">10</span>
<span class="linenos">11</span><span class="kd">pred</span><span class="w"> </span><span class="nf">main</span>.
<span class="linenos">12</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>rev<span class="w"> </span><span class="kd">[</span><span class="mi">1</span><span class="kd">,</span><span class="mi">2</span><span class="kd">,</span><span class="mi">3</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="mi">3</span><span class="kd">,</span><span class="mi">2</span><span class="kd">,</span><span class="mi">1</span><span class="kd">],</span><span class="w"> </span>not(aux<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>rev.aux<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/namespaces01.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">toto</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>.
<span class="linenos"> 2</span>toto<span class="w"> </span><span class="mi">1</span><span class="o">.</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c">% We test toto is not put inside the namespace</span>
<span class="linenos"> 5</span><span class="kd">namespace</span><span class="w"> </span>foo<span class="w"> </span>{
<span class="linenos"> 6</span><span class="w">  </span><span class="kd">pred</span><span class="w"> </span><span class="nf">bar</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>.
<span class="linenos"> 7</span><span class="w">  </span>bar<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>toto<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>baz<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos"> 8</span><span class="w">  </span><span class="kd">pred</span><span class="w"> </span><span class="nf">baz</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>.
<span class="linenos"> 9</span><span class="w">  </span>baz<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>toto<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">10</span>}
<span class="linenos">11</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>foo.bar<span class="w"> </span><span class="mi">2</span><span class="kd">,</span><span class="w"> </span>foo.baz<span class="w"> </span><span class="mi">1</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/namespaces02.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">namespace</span><span class="w"> </span>x<span class="w"> </span>{
<span class="linenos">2</span><span class="w">  </span><span class="kd">namespace</span><span class="w"> </span>acc<span class="w"> </span>{ <span class="kd">accumulate</span><span class="w"> </span>namespaces00<span class="o">.</span><span class="w"> </span>}
<span class="linenos">3</span><span class="w">  </span><span class="err">:</span>untyped<span class="w"> </span>foo<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>rev.aux<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span><span class="w"> </span><span class="c">% does not exists, since it is inside acc</span>
<span class="linenos">4</span>}
<span class="linenos">5</span>
<span class="linenos">6</span><span class="err">:</span>untyped
<span class="linenos">7</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>x.acc.rev<span class="w"> </span><span class="kd">[</span><span class="mi">1</span><span class="kd">,</span><span class="mi">2</span><span class="kd">,</span><span class="mi">3</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="mi">3</span><span class="kd">,</span><span class="mi">2</span><span class="kd">,</span><span class="mi">1</span><span class="kd">],</span><span class="w"> </span>x.acc.rev.aux<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[],</span><span class="w"> </span>not(x.foo<span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/namespaces03.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">type</span><span class="w"> </span><span class="nf">a.foo4</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 2</span><span class="kd">type</span><span class="w"> </span><span class="nf">a.foo3</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">a.foo2</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 4</span><span class="kd">type</span><span class="w"> </span><span class="nf">a.foo1</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 5</span><span class="kd">type</span><span class="w"> </span><span class="nf">a.b.foo2</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 6</span><span class="kd">type</span><span class="w"> </span><span class="nf">a.b.foo1</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 7</span><span class="kd">type</span><span class="w"> </span><span class="nf">a.b.c.foo</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="kd">namespace</span><span class="w"> </span>a<span class="w"> </span>{
<span class="linenos">10</span>
<span class="linenos">11</span><span class="w">  </span>foo1<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>b.c.foo<span class="o">.</span>
<span class="linenos">12</span><span class="w">  </span>foo2<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>b.foo1<span class="kd">,</span><span class="w"> </span>b.foo2<span class="o">.</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="w">  </span><span class="kd">namespace</span><span class="w"> </span>b<span class="w"> </span>{
<span class="linenos">15</span>
<span class="linenos">16</span><span class="w">     </span>foo1<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>c.foo<span class="o">.</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="w">    </span><span class="kd">namespace</span><span class="w"> </span>c<span class="w"> </span>{
<span class="linenos">19</span><span class="w"> </span>
<span class="linenos">20</span><span class="w">       </span>foo<span class="o">.</span>
<span class="linenos">21</span><span class="w">   </span>
<span class="linenos">22</span><span class="w">    </span>}
<span class="linenos">23</span>
<span class="linenos">24</span><span class="w">     </span>foo2<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>c.foo<span class="o">.</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="w">  </span>}
<span class="linenos">27</span>
<span class="linenos">28</span><span class="w">   </span>foo3<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>b.c.foo<span class="o">.</span>
<span class="linenos">29</span><span class="w">   </span>foo4<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>b.foo1<span class="kd">,</span><span class="w"> </span>b.foo2<span class="o">.</span>
<span class="linenos">30</span>
<span class="linenos">31</span>}
<span class="linenos">32</span>
<span class="linenos">33</span><span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>a.foo1<span class="kd">,</span><span class="w"> </span>a.foo2<span class="kd">,</span><span class="w"> </span>a.foo3<span class="kd">,</span><span class="w"> </span>a.foo4<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/nil_cons.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>nil<span class="kd">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>cons<span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/notation.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>module<span class="w"> </span>test<span class="o">.</span>
<span class="linenos"> 2</span><span class="c">/*</span>
<span class="linenos"> 3</span>infixl<span class="w"> </span>x+<span class="kd">,</span>y+<span class="w"> </span><span class="mi">190</span><span class="o">.</span>
<span class="linenos"> 4</span>infixr<span class="w"> </span>x++<span class="w"> </span><span class="mi">191</span><span class="o">.</span>
<span class="linenos"> 5</span>prefixr<span class="w"> </span>z+<span class="w"> </span><span class="mi">191</span><span class="o">.</span>
<span class="linenos"> 6</span>postfixl<span class="w"> </span>w+<span class="w"> </span><span class="mi">190</span><span class="o">.</span>
<span class="linenos"> 7</span>infixl<span class="w"> </span>x*<span class="w"> </span><span class="mi">200</span><span class="o">.</span>
<span class="linenos"> 8</span><span class="kd">*/</span>
<span class="linenos"> 9</span><span class="nv">X</span><span class="w"> </span><span class="kd">+</span>x<span class="w"> </span><span class="nv">D</span><span class="o">.</span>
<span class="linenos">10</span>
<span class="linenos">11</span>foo<span class="w"> </span>xx<span class="w"> </span>uu<span class="o">.</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="kd">~</span>z<span class="w"> </span>x<span class="w"> </span>?w<span class="o">.</span>
<span class="linenos">14</span>
<span class="linenos">15</span>x<span class="w"> </span><span class="kd">*</span>x<span class="w"> </span>y<span class="w"> </span><span class="kd">+</span>x<span class="w"> </span>z<span class="w"> </span><span class="kd">*</span>x<span class="w"> </span>w<span class="o">.</span>
<span class="linenos">16</span>
<span class="linenos">17</span>a<span class="w"> </span><span class="kd">+</span>x<span class="w"> </span>b<span class="w"> </span><span class="kd">+</span>x<span class="w"> </span>c<span class="w"> </span><span class="kd">+</span>x<span class="w"> </span>d<span class="w"> </span><span class="kd">+</span>x<span class="w"> </span>e<span class="o">.</span>
<span class="linenos">18</span>a<span class="w"> </span><span class="kd">++</span>x<span class="w"> </span>b<span class="w"> </span><span class="kd">++</span>x<span class="w"> </span>c<span class="w"> </span><span class="kd">++</span>x<span class="w"> </span>d<span class="w"> </span><span class="kd">++</span>x<span class="w"> </span>e<span class="o">.</span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="kd">type</span><span class="w"> </span><span class="nf">a, b, d, x, xx, w, y, z, c, cd, e, uu</span><span class="w"> </span><span class="kt">any</span>.
<span class="linenos">21</span><span class="kd">type</span><span class="w"> </span><span class="nf">foo</span><span class="w"> </span><span class="kt">any</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">any</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">22</span><span class="kd">type</span><span class="w"> </span><span class="nf">(~z)</span><span class="w"> </span><span class="kt">any</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">23</span><span class="kd">type</span><span class="w"> </span><span class="nf">(?w)</span><span class="w"> </span><span class="kt">any</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">any</span>.
<span class="linenos">24</span><span class="kd">type</span><span class="w"> </span><span class="nf">(+x)</span><span class="w"> </span><span class="kt">any</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">any</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">any</span>.
<span class="linenos">25</span><span class="kd">type</span><span class="w"> </span><span class="nf">(++x)</span><span class="w"> </span><span class="kt">any</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">any</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">any</span>.
<span class="linenos">26</span><span class="kd">type</span><span class="w"> </span><span class="nf">(+y)</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">C</span>.
<span class="linenos">27</span><span class="kd">type</span><span class="w"> </span><span class="nf">(*x)</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">B</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">C</span>.
<span class="linenos">28</span>
<span class="linenos">29</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span>(a<span class="w"> </span>a<span class="w"> </span><span class="kd">+</span>x<span class="w"> </span><span class="kd">[</span>b<span class="kd">]</span><span class="w"> </span><span class="kd">+</span>y<span class="w"> </span>d<span class="o">)</span><span class="kd">,</span><span class="w"> </span>cd<span class="w"> </span><span class="kd">+</span>x<span class="w"> </span>d<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">a a +x [b] +y d</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/notation.elpi&quot;, line 9, column 6, characters 107-107:</span>
<span class="go">D is linear: name it _D (discard) or D_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/notation.elpi&quot;, line 9, column 0, characters 101-102:</span>
<span class="go">X is linear: name it _X (discard) or X_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/notation_error.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>infix<span class="w"> </span>foo<span class="w"> </span><span class="mi">1</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/notation_error.elpi&quot;, line 1, column 0, characters 0-12:</span>
<span class="go">Mixfix directives are not supported by this parser.</span>

<span class="go">The parser is based on token families.</span>
<span class="go">A family is identified by some starting characters, for example</span>
<span class="go">a token &#39;+--&gt;&#39; belongs to the family of &#39;+&#39;. There is no need</span>
<span class="go">to declare it.</span>

<span class="go">All the tokens of a family are parsed with the same precedence and</span>
<span class="go">associativity, for example &#39;x +--&gt; y *--&gt; z&#39; is parsed as</span>
<span class="go">&#39;x +--&gt; (y *--&gt; z)&#39; since the family of &#39;*&#39; has higher precedence</span>
<span class="go">than the family of &#39;+&#39;.</span>

<span class="go">Here the table of tokens and token families.</span>
<span class="go">Token families are represented by the start symbols followed by &#39;..&#39;.</span>
<span class="go">Tokens of families marked with [*] cannot end with the starting symbol,</span>
<span class="go">eg `foo` is not an infix, while `foo is.</span>
<span class="go">The listing is ordered by increasing precedence.</span>

<span class="go">fixity                     | tokens / token families</span>
<span class="go">-------------------------- + -----------------------------------</span>
<span class="go">Infix   not   associative  | :-  ?-</span>
<span class="go">Infix   right associative  | ;</span>
<span class="go">Infix   right associative  | ==&gt;</span>
<span class="go">Infix   right associative  | ,  &amp;</span>
<span class="go">Infix   right associative  | -&gt;</span>
<span class="go">Infix   right associative  | =&gt;</span>
<span class="go">Infix   not   associative  | =  ==  =&lt;  r&lt;  i&lt;  s&lt;  r=&lt;  i=&lt;  s=&lt;</span>
<span class="go">                             &lt;..  r&gt;  i&gt;  s&gt;  r&gt;=  i&gt;=  s&gt;=  &gt;..</span>
<span class="go">                             is</span>
<span class="go">Infix   right associative  | ::</span>
<span class="go">Infix   not   associative  | &#39;.. [*]</span>
<span class="go">Infix   left  associative  | ^..  r+  i+  s+  +..  -  r-  i-  s-</span>
<span class="go">Infix   left  associative  | r*  i*  s*  *..  /  div  mod</span>
<span class="go">Infix   right associative  | --..</span>
<span class="go">Infix   not   associative  | `.. [*]</span>
<span class="go">Infix   right associative  | ==..</span>
<span class="go">Infix   right associative  | ||..</span>
<span class="go">Infix   right associative  | &amp;&amp;..</span>
<span class="go">Infix   left  associative  | #..</span>
<span class="go">Prefix  not   associative  | r~  i~  ~..</span>
<span class="go">Postfix not   associative  | ?..</span>

<span class="go">If the token is a valid mixfix, and you want the file to stay compatible</span>
<span class="go">with Teyjus, you can ask Elpi to skip the directive. Eg:</span>

<span class="gp">% </span>elpi:skip<span class="w"> </span><span class="m">2</span><span class="w">  </span>//<span class="w"> </span>skips<span class="w"> </span>the<span class="w"> </span>next<span class="w"> </span>two<span class="w"> </span>lines
<span class="go">infixr ==&gt; 120.</span>
<span class="go">infixr || 120.</span>

<span class="go">As a debugging facility one can ask Elpi to print the AST in order to</span>
<span class="go">verify how the text was parsed. Eg:</span>

<span class="go">echo &#39;MyFormula = a || b ==&gt; c &amp;&amp; d&#39; | elpi -parse-term</span>
</pre></div>
</div>
<p><strong>../../tests/sources/notation_legacy.elpi
:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Fatal error: exception Failure(&quot;File /home/runner/work/elpi/elpi/docs/source/../../tests/sources/notation_legacy.elpi not found in: /home/runner/work/elpi/elpi/_build/default/../lib/, /home/runner/work/elpi/elpi/_build/default/../lib/ocaml, /home/runner/work/elpi/elpi/_build/install/default/lib, /home/runner/work/elpi/elpi/_build/default&quot;)</span>
</pre></div>
</div>
<p><strong>../../tests/sources/patternunif.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c">% q Y should yield Y = \\\f 2</span>
<span class="linenos">2</span><span class="err">:</span>untyped<span class="w"> </span>q<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">b</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span>(r<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">a</span>\<span class="w"> </span>s<span class="w"> </span><span class="o">(</span>f<span class="w"> </span>a<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>s<span class="w"> </span><span class="o">(</span><span class="nv">X</span><span class="w"> </span>b<span class="w"> </span>c<span class="w"> </span>a<span class="o">))</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>r<span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">x\y\z\</span>f<span class="w"> </span>z<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/patternunif.elpi&quot;, line 2, column 29, characters 59-98:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>

<span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/patternunif2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c">% r Y yields Y=\0</span>
<span class="linenos">2</span><span class="err">:</span>untyped<span class="w"> </span>q<span class="w"> </span>(<span class="nv">a\</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>a<span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">3</span><span class="err">:</span>untyped<span class="w"> </span>r<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span>q<span class="w"> </span>(<span class="nv">a\</span>a<span class="o">)</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>r<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">x\</span>x<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/pi.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c">% q X yields X=ok</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="err">:</span>untyped<span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>p<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span>r<span class="w"> </span>y<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>z<span class="w"> </span>x<span class="w"> </span>y<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">4</span><span class="err">:</span>untyped<span class="w"> </span>z<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span>ko<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>r<span class="w"> </span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span>p<span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos">5</span><span class="err">:</span>untyped<span class="w"> </span>z<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span>ok<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>p<span class="w"> </span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span>r<span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos">6</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/pi3.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c">% q X yields X=\0, i.e. X=b\b</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="err">:</span>untyped<span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span>z<span class="w"> </span>(<span class="nv">w\</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="err">:</span>untyped<span class="w"> </span>z<span class="w"> </span>(<span class="nv">a\</span><span class="w"> </span>a<span class="o">).</span>
<span class="linenos">6</span><span class="err">:</span>untyped<span class="w"> </span>z<span class="w"> </span>(<span class="nv">a\</span><span class="w"> </span><span class="nv">b\</span><span class="w"> </span>b<span class="o">).</span>
<span class="linenos">7</span><span class="err">:</span>untyped<span class="w"> </span>
<span class="linenos">8</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">b\</span>b<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/pi5.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">% q X, r X, s X all yields X=ok</span>
<span class="linenos"> 2</span><span class="kd">kind</span><span class="w"> </span><span class="nf">i</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">lam, bam</span><span class="w"> </span><span class="kt">(i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 4</span><span class="kd">type</span><span class="w"> </span><span class="nf">of</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 5</span><span class="kd">type</span><span class="w"> </span><span class="nf">stop</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 6</span><span class="kd">type</span><span class="w"> </span><span class="nf">s</span><span class="w"> </span><span class="kt">diagnostic</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 7</span><span class="kd">type</span><span class="w"> </span><span class="nf">r</span><span class="w"> </span><span class="kt">diagnostic</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 8</span><span class="kd">type</span><span class="w"> </span><span class="nf">q</span><span class="w"> </span><span class="kt">diagnostic</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 9</span>
<span class="linenos">10</span>of<span class="w"> </span>stop<span class="o">.</span>
<span class="linenos">11</span>of<span class="w"> </span>(bam<span class="w"> </span><span class="nv">x\</span>x<span class="o">).</span>
<span class="linenos">12</span>of<span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\F</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">w</span>\<span class="w"> </span>of<span class="w"> </span><span class="nv">F</span><span class="o">.</span>
<span class="linenos">13</span>
<span class="linenos">14</span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>of<span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>bam<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>y<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span>
<span class="linenos">15</span>r<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>of<span class="w"> </span>(bam<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>y<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span>
<span class="linenos">16</span>s<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>of<span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>stop<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span>
<span class="linenos">17</span>
<span class="linenos">18</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>r<span class="w"> </span><span class="nv">S</span><span class="kd">,</span><span class="w"> </span>s<span class="w"> </span><span class="nv">T</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="kd">,</span><span class="w"> </span><span class="nv">S</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="kd">,</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/pnf.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">/*</span>
<span class="linenos"> 2</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span><span class="nv">Predicates</span><span class="w"> </span>for<span class="w"> </span>transforming<span class="w"> </span>formulas<span class="w"> </span>into<span class="w"> </span>prenex<span class="w"> </span>normal<span class="w"> </span>form<span class="w"> </span>
<span class="linenos"> 3</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>assuming<span class="w"> </span>classical<span class="w"> </span>logic<span class="w"> </span>equivalences<span class="o">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span>an<span class="w"> </span>example<span class="w"> </span>of<span class="w"> </span>
<span class="linenos"> 4</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>analyzing<span class="w"> </span>formula<span class="w"> </span>structure<span class="kd">,</span><span class="w"> </span>including<span class="w"> </span>recursion<span class="w"> </span>over<span class="w"> </span>bindings
<span class="linenos"> 5</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>and<span class="w"> </span>generating<span class="w"> </span>modified<span class="w"> </span>structure<span class="w"> </span>based<span class="w"> </span>on<span class="w"> </span>this<span class="w"> </span>analysis
<span class="linenos"> 6</span><span class="w"> </span><span class="kd">*/</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c">%module  pnf.</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="c">%type  merge  (form -&gt; form -&gt; o).</span>
<span class="linenos">11</span><span class="kd">kind</span><span class="w"> </span><span class="nf">term,</span><span class="w"> </span><span class="kt">formula</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos">12</span><span class="kd">type</span><span class="w"> </span><span class="nf">perp, tru</span><span class="w"> </span><span class="kt">formula</span>.
<span class="linenos">13</span><span class="kd">type</span><span class="w"> </span><span class="nf">and, or, imp</span><span class="w"> </span><span class="kt">formula</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">formula</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">formula</span>.
<span class="linenos">14</span><span class="kd">type</span><span class="w"> </span><span class="nf">adj, path</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">formula</span>.
<span class="linenos">15</span><span class="kd">type</span><span class="w"> </span><span class="nf">all, some</span><span class="w"> </span><span class="kt">(term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">formula)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">formula</span>.
<span class="linenos">16</span>
<span class="linenos">17</span><span class="kd">pred</span><span class="w"> </span><span class="nf">quant_free</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">formula</span>.
<span class="linenos">18</span>quant_free<span class="w"> </span>perp<span class="o">.</span>
<span class="linenos">19</span>quant_free<span class="w"> </span>tru<span class="o">.</span>
<span class="linenos">20</span>quant_free<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>atom<span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos">21</span>quant_free<span class="w"> </span>(and<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>quant_free<span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span>quant_free<span class="w"> </span><span class="nv">C</span><span class="o">.</span>
<span class="linenos">22</span>quant_free<span class="w"> </span>(or<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>quant_free<span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span>quant_free<span class="w"> </span><span class="nv">C</span><span class="o">.</span>
<span class="linenos">23</span>quant_free<span class="w"> </span>(imp<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>quant_free<span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span>quant_free<span class="w"> </span><span class="nv">C</span><span class="o">.</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="kd">pred</span><span class="w"> </span><span class="nf">atom</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">formula</span>.
<span class="linenos">26</span>atom<span class="w"> </span>(path<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>termp<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>termp<span class="w"> </span><span class="nv">Y</span><span class="o">.</span>
<span class="linenos">27</span>atom<span class="w"> </span>(adj<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>termp<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>termp<span class="w"> </span><span class="nv">Y</span><span class="o">.</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="kd">type</span><span class="w"> </span><span class="nf">a, b, c</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos">30</span><span class="kd">type</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos">31</span>
<span class="linenos">32</span><span class="kd">pred</span><span class="w"> </span><span class="nf">termp</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">term</span>.
<span class="linenos">33</span>termp<span class="w"> </span>a<span class="o">.</span>
<span class="linenos">34</span>termp<span class="w"> </span>b<span class="o">.</span>
<span class="linenos">35</span>termp<span class="w"> </span>c<span class="o">.</span>
<span class="linenos">36</span>termp<span class="w"> </span>(f<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>termp<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="kd">pred</span><span class="w"> </span><span class="nf">prenex</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">formula</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">formula</span>.
<span class="linenos">39</span>(prenex<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(quant_free<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span><span class="w"> </span>
<span class="linenos">40</span>(prenex<span class="w"> </span><span class="o">(</span>and<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="nv">D</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(prenex<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">U</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>(prenex<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">V</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>(merge<span class="w"> </span><span class="o">(</span>and<span class="w"> </span><span class="nv">U</span><span class="w"> </span><span class="nv">V</span><span class="o">)</span><span class="w"> </span><span class="nv">D</span><span class="o">).</span>
<span class="linenos">41</span>(prenex<span class="w"> </span><span class="o">(</span>or<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="nv">D</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(prenex<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">U</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>(prenex<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">V</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>(merge<span class="w"> </span><span class="o">(</span>or<span class="w"> </span><span class="nv">U</span><span class="w"> </span><span class="nv">V</span><span class="o">)</span><span class="w"> </span><span class="nv">D</span><span class="o">).</span>
<span class="linenos">42</span>(prenex<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="nv">D</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(prenex<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">U</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>(prenex<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">V</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>(merge<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span><span class="nv">U</span><span class="w"> </span><span class="nv">V</span><span class="o">)</span><span class="w"> </span><span class="nv">D</span><span class="o">).</span>
<span class="linenos">43</span>(prenex<span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>prenex<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">44</span>(prenex<span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>prenex<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">45</span>
<span class="linenos">46</span>
<span class="linenos">47</span><span class="c">/* This predicate is for moving out quantifiers appearing at the head of the </span>
<span class="linenos">48</span>immediate<span class="w"> </span>subformulas<span class="w"> </span>of<span class="w"> </span>a<span class="w"> </span>formula<span class="w"> </span>with<span class="w"> </span>a<span class="w"> </span>propositional<span class="w"> </span>connective<span class="w"> </span><span class="kd">as</span><span class="w"> </span>its<span class="w"> </span>
<span class="linenos">49</span>top-level<span class="w"> </span>symbol<span class="w"> </span><span class="kd">*/</span>
<span class="linenos">50</span><span class="kd">pred</span><span class="w"> </span><span class="nf">merge</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">formula</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">formula</span>.
<span class="linenos">51</span>(merge<span class="w"> </span><span class="o">(</span>and<span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">C</span><span class="o">))</span><span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">52</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>merge<span class="w"> </span><span class="o">(</span>and<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">C</span><span class="w"> </span>x<span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">53</span>(merge<span class="w"> </span><span class="o">(</span>and<span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>
<span class="linenos">54</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>merge<span class="w"> </span><span class="o">(</span>and<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">55</span>(merge<span class="w"> </span><span class="o">(</span>and<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">C</span><span class="o">))</span><span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>
<span class="linenos">56</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>merge<span class="w"> </span><span class="o">(</span>and<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="o">(</span><span class="nv">C</span><span class="w"> </span>x<span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">57</span>
<span class="linenos">58</span>(merge<span class="w"> </span><span class="o">(</span>and<span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>
<span class="linenos">59</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>merge<span class="w"> </span><span class="o">(</span>and<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">60</span>(merge<span class="w"> </span><span class="o">(</span>and<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">C</span><span class="o">))</span><span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">61</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>merge<span class="w"> </span><span class="o">(</span>and<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="o">(</span><span class="nv">C</span><span class="w"> </span>x<span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">62</span>
<span class="linenos">63</span>(merge<span class="w"> </span><span class="o">(</span>or<span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">64</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>merge<span class="w"> </span><span class="o">(</span>or<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">65</span>(merge<span class="w"> </span><span class="o">(</span>or<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">C</span><span class="o">))</span><span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">66</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>merge<span class="w"> </span><span class="o">(</span>or<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="o">(</span><span class="nv">C</span><span class="w"> </span>x<span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">67</span>(merge<span class="w"> </span><span class="o">(</span>or<span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">C</span><span class="o">))</span><span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">68</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>merge<span class="w"> </span><span class="o">(</span>or<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">C</span><span class="w"> </span>x<span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">69</span>(merge<span class="w"> </span><span class="o">(</span>or<span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">70</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>merge<span class="w"> </span><span class="o">(</span>or<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">71</span>(merge<span class="w"> </span><span class="o">(</span>or<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">C</span><span class="o">))</span><span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">72</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>merge<span class="w"> </span><span class="o">(</span>or<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="o">(</span><span class="nv">C</span><span class="w"> </span>x<span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">73</span>
<span class="linenos">74</span>(merge<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">C</span><span class="o">))</span><span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>
<span class="linenos">75</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>merge<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">C</span><span class="w"> </span>x<span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">76</span>(merge<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>
<span class="linenos">77</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>merge<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">78</span>(merge<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">79</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>merge<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span><span class="o">(</span><span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">C</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">80</span>(merge<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">C</span><span class="o">))</span><span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">81</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>merge<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="o">(</span><span class="nv">C</span><span class="w"> </span>x<span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">82</span>(merge<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">C</span><span class="o">))</span><span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="nv">D</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">83</span><span class="w">       </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="o">((</span>termp<span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>merge<span class="w"> </span><span class="o">(</span>imp<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="o">(</span><span class="nv">C</span><span class="w"> </span>x<span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="nv">D</span><span class="w"> </span>x<span class="o">)))).</span>
<span class="linenos">84</span>
<span class="linenos">85</span>(merge<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(quant_free<span class="w"> </span><span class="nv">B</span><span class="o">).</span>
<span class="linenos">86</span>
<span class="linenos">87</span><span class="kd">type</span><span class="w"> </span><span class="nf">one, two, three, four</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos">88</span><span class="kd">type</span><span class="w"> </span><span class="nf">formula</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">formula</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">89</span>
<span class="linenos">90</span>formula<span class="w"> </span>one<span class="w">  </span>(imp<span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>path<span class="w"> </span>a<span class="w"> </span>x<span class="o">)))</span><span class="w"> </span>tru<span class="o">).</span>
<span class="linenos">91</span>formula<span class="w"> </span>two<span class="w">  </span>(imp<span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>path<span class="w"> </span>a<span class="w"> </span>x<span class="o">)))</span><span class="w"> </span>tru<span class="o">).</span>
<span class="linenos">92</span>formula<span class="w"> </span>three<span class="w">  </span>(and<span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>path<span class="w"> </span>a<span class="w"> </span>x<span class="o">)))</span><span class="w"> </span><span class="o">(</span>all<span class="w"> </span><span class="o">(</span>y<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>path<span class="w"> </span>y<span class="w"> </span>a<span class="o">)))).</span>
<span class="linenos">93</span>formula<span class="w"> </span>four<span class="w">  </span>(imp<span class="w"> </span><span class="o">(</span>some<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>path<span class="w"> </span>a<span class="w"> </span>x<span class="o">)))</span><span class="w"> </span><span class="o">((</span>all<span class="w"> </span><span class="o">(</span>y<span class="w"> </span><span class="err">\</span><span class="w"> </span><span class="o">(</span>path<span class="w"> </span>a<span class="w"> </span>y<span class="o">))))).</span>
<span class="linenos">94</span>
<span class="linenos">95</span><span class="kd">pred</span><span class="w"> </span><span class="nf">test</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">formula</span>.
<span class="linenos">96</span>(test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(formula<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">OF</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>(prenex<span class="w"> </span><span class="nv">OF</span><span class="w"> </span><span class="nv">F</span><span class="o">).</span>
<span class="linenos">97</span>
<span class="linenos">98</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(test<span class="w"> </span>one<span class="w"> </span><span class="nv">F1</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>(test<span class="w"> </span>two<span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>(test<span class="w"> </span>three<span class="w"> </span><span class="nv">F3</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>(test<span class="w"> </span>four<span class="w"> </span><span class="nv">F4</span><span class="o">)</span><span class="kd">,!</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/pnf.elpi&quot;, line 99, column 19, characters 3477-3478:</span>
<span class="go">F1 is linear: name it _F1 (discard) or F1_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/pnf.elpi&quot;, line 99, column 34, characters 3492-3493:</span>
<span class="go">F2 is linear: name it _F2 (discard) or F2_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/pnf.elpi&quot;, line 99, column 51, characters 3509-3510:</span>
<span class="go">F3 is linear: name it _F3 (discard) or F3_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/pnf.elpi&quot;, line 99, column 67, characters 3525-3526:</span>
<span class="go">F4 is linear: name it _F4 (discard) or F4_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/polymorphic_variants.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="c">% Type inference for a super-constrainted functional langage with</span>
<span class="linenos">  2</span><span class="c">% polymorphic variants</span>
<span class="linenos">  3</span><span class="c">%</span>
<span class="linenos">  4</span><span class="c">% Syntax:    f ::= (&lt;case&gt; constant term)^*    unary functions</span>
<span class="linenos">  5</span><span class="c">%         term ::= constant | &lt;app&gt; funname term</span>
<span class="linenos">  6</span><span class="c">%      program ::= (&lt;fun&gt; funname f)^*</span>
<span class="linenos">  7</span><span class="c">%        types ::= (&lt;fun&gt; funname type type)^*</span>
<span class="linenos">  8</span><span class="c">%         type ::= constant^*</span>
<span class="linenos">  9</span><span class="c">%</span>
<span class="linenos"> 10</span><span class="c">%      constant and funnames are distinct lambda-prolog names</span>
<span class="linenos"> 11</span>
<span class="linenos"> 12</span><span class="kd">kind</span><span class="w"> </span><span class="nf">i</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 13</span><span class="kd">type</span><span class="w"> </span><span class="nf">a</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 14</span><span class="kd">type</span><span class="w"> </span><span class="nf">app</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 15</span><span class="kd">type</span><span class="w"> </span><span class="nf">check</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">(list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 16</span><span class="kd">type</span><span class="w"> </span><span class="nf">union</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 17</span><span class="kd">type</span><span class="w"> </span><span class="nf">propagate</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 18</span><span class="kd">type</span><span class="w"> </span><span class="nf">mem_</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 19</span><span class="kd">type</span><span class="w"> </span><span class="nf">mem</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 20</span><span class="kd">type</span><span class="w"> </span><span class="nf">main2</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 21</span><span class="kd">type</span><span class="w"> </span><span class="nf">main1</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 22</span><span class="kd">type</span><span class="w"> </span><span class="nf">is_subset_</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 23</span><span class="kd">type</span><span class="w"> </span><span class="nf">is_subset</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 24</span><span class="kd">type</span><span class="w"> </span><span class="nf">is_ground</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 25</span><span class="kd">type</span><span class="w"> </span><span class="nf">inter</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 26</span><span class="kd">type</span><span class="w"> </span><span class="nf">inputs</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 27</span><span class="kd">type</span><span class="w"> </span><span class="nf">h2</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 28</span><span class="kd">type</span><span class="w"> </span><span class="nf">h1</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 29</span><span class="kd">type</span><span class="w"> </span><span class="nf">g</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 30</span><span class="kd">type</span><span class="w"> </span><span class="nf">fun</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 31</span><span class="kd">type</span><span class="w"> </span><span class="nf">find</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 32</span><span class="kd">type</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 33</span><span class="kd">type</span><span class="w"> </span><span class="nf">e</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 34</span><span class="kd">type</span><span class="w"> </span><span class="nf">d</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 35</span><span class="kd">type</span><span class="w"> </span><span class="nf">check_term</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 36</span><span class="kd">type</span><span class="w"> </span><span class="nf">check_domain</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 37</span><span class="kd">type</span><span class="w"> </span><span class="nf">check_codomain</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">list</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 38</span><span class="kd">type</span><span class="w"> </span><span class="nf">case</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 39</span><span class="kd">type</span><span class="w"> </span><span class="nf">c</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 40</span><span class="kd">type</span><span class="w"> </span><span class="nf">b</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 41</span>
<span class="linenos"> 42</span><span class="c">% check types program types</span>
<span class="linenos"> 43</span><span class="c">% the functions must be listed in the same order in both</span>
<span class="linenos"> 44</span><span class="c">%check A B C :- print (check A B C), fail.</span>
<span class="linenos"> 45</span>check<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos"> 46</span>check<span class="w"> </span><span class="kd">[</span>fun<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">BTL</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span>fun<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">TTL</span><span class="kd">]</span><span class="w"> </span><span class="nv">ORIGTYS</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 47</span><span class="w"> </span>check_domain<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">D</span><span class="kd">,</span>
<span class="linenos"> 48</span><span class="w"> </span>check_codomain<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">ORIGTYS</span><span class="kd">,</span>
<span class="linenos"> 49</span><span class="w"> </span>check<span class="w"> </span><span class="nv">BTL</span><span class="w"> </span><span class="nv">TTL</span><span class="w"> </span><span class="nv">ORIGTYS</span><span class="o">.</span>
<span class="linenos"> 50</span>
<span class="linenos"> 51</span><span class="c">% check_domain body type</span>
<span class="linenos"> 52</span><span class="c">%check_domain A B :- print (check_domain A B), fail.</span>
<span class="linenos"> 53</span>check_domain<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>inputs<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">I</span><span class="kd">,</span><span class="w"> </span>is_subset<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">I</span><span class="o">.</span>
<span class="linenos"> 54</span>
<span class="linenos"> 55</span><span class="c">%is_subset A B :- print (is_subset A B), fail.</span>
<span class="linenos"> 56</span>is_subset<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>var<span class="w"> </span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>declare_constraint<span class="w"> </span>(is_subset<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">A</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 57</span>is_subset<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>var<span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>declare_constraint<span class="w"> </span>(is_subset<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">B</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 58</span>is_subset<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>is_subset_<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos"> 59</span>is_subset_<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos"> 60</span>is_subset_<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">TL</span><span class="kd">]</span><span class="w"> </span><span class="nv">TL1</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">TL1</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>is_subset<span class="w"> </span><span class="nv">TL</span><span class="w"> </span><span class="nv">TL1</span><span class="o">.</span>
<span class="linenos"> 61</span>
<span class="linenos"> 62</span>mem<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>var<span class="w"> </span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>declare_constraint<span class="w"> </span>(mem<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">A</span><span class="kd">]</span><span class="o">.</span>
<span class="linenos"> 63</span>mem<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>mem_<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos"> 64</span>mem_<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">_</span><span class="kd">]</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 65</span>mem_<span class="w"> </span><span class="kd">[</span><span class="nv">Y</span><span class="kd">|</span><span class="nv">TL</span><span class="kd">]</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">TL</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos"> 66</span>
<span class="linenos"> 67</span><span class="c">%check_codomain body type types</span>
<span class="linenos"> 68</span><span class="c">%check_codomain A B C :- print (check_codomain A B C), fail.</span>
<span class="linenos"> 69</span>check_codomain<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos"> 70</span>check_codomain<span class="w"> </span><span class="kd">[</span>case<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">TL</span><span class="kd">]</span><span class="w"> </span><span class="nv">TYS</span><span class="w"> </span><span class="nv">ORIGTYS</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 71</span><span class="w">  </span>check_term<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">TYS</span><span class="w"> </span><span class="nv">ORIGTYS</span><span class="kd">,</span>
<span class="linenos"> 72</span><span class="w">  </span>check_codomain<span class="w"> </span><span class="nv">TL</span><span class="w"> </span><span class="nv">TYS</span><span class="w"> </span><span class="nv">ORIGTYS</span><span class="o">.</span>
<span class="linenos"> 73</span>
<span class="linenos"> 74</span><span class="c">%check_term term type</span>
<span class="linenos"> 75</span><span class="c">%check_term A B C :- print &quot;CHECK&quot; (check_term A B C), fail.</span>
<span class="linenos"> 76</span>check_term<span class="w"> </span>(app<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">ORIGTYS</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 77</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos"> 78</span><span class="w"> </span>find<span class="w"> </span><span class="nv">ORIGTYS</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">C</span><span class="kd">,</span>
<span class="linenos"> 79</span><span class="w"> </span>check_term<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">ORIGTYS</span><span class="kd">,</span>
<span class="linenos"> 80</span><span class="w"> </span>is_subset<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">TY</span><span class="o">.</span>
<span class="linenos"> 81</span>check_term<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 82</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos"> 83</span>
<span class="linenos"> 84</span>find<span class="w"> </span><span class="kd">[</span>fun<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">_</span><span class="kd">]</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 85</span>find<span class="w"> </span><span class="kd">[</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">TL</span><span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>find<span class="w"> </span><span class="nv">TL</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">D</span><span class="w"> </span><span class="nv">C</span><span class="o">.</span>
<span class="linenos"> 86</span>
<span class="linenos"> 87</span><span class="c">%inputs A B :- print &quot;INPUT&quot; (inputs A B), fail.</span>
<span class="linenos"> 88</span>inputs<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
<span class="linenos"> 89</span>inputs<span class="w"> </span><span class="kd">[</span>case<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">TL</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="nv">A</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">TL&#39;</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>inputs<span class="w"> </span><span class="nv">TL</span><span class="w"> </span><span class="nv">TL&#39;</span><span class="o">.</span>
<span class="linenos"> 90</span>
<span class="linenos"> 91</span><span class="c">/* Expected output, according to OCaml</span>
<span class="linenos"> 92</span><span class="nv">Note</span><span class="err">:</span><span class="w"> </span><span class="nv">I</span><span class="w"> </span>use<span class="w"> </span>ref<span class="w"> </span>to<span class="w"> </span>kill<span class="w"> </span><span class="nv">Hindley-Milner</span><span class="w"> </span>polymorphism
<span class="linenos"> 93</span>#<span class="w"> </span>let<span class="w"> </span>g<span class="w"> </span><span class="kd">=</span><span class="w"> </span>ref<span class="w"> </span>(function<span class="w"> </span>`A<span class="w"> </span><span class="kd">-&gt;</span><span class="w"> </span>`C<span class="w"> </span><span class="kd">|</span><span class="w"> </span>`B<span class="w"> </span><span class="kd">-&gt;</span><span class="w"> </span>`D<span class="o">)</span><span class="kd">;;</span>
<span class="linenos"> 94</span>#<span class="w"> </span>let<span class="w"> </span>f<span class="w"> </span><span class="kd">=</span><span class="w"> </span>function<span class="w"> </span>`A<span class="w"> </span><span class="kd">-&gt;</span><span class="w"> </span>`A<span class="w"> </span><span class="kd">|</span><span class="w"> </span>`B<span class="w"> </span><span class="kd">-&gt;</span><span class="w"> </span><span class="kd">!</span>g<span class="w"> </span>`A<span class="kd">;;</span>
<span class="linenos"> 95</span>#<span class="w"> </span>f<span class="kd">,!</span>g<span class="kd">;;</span>
<span class="linenos"> 96</span><span class="kd">-</span><span class="w"> </span><span class="err">:</span><span class="w"> </span>(<span class="nv">_</span><span class="kd">[&lt;</span><span class="w"> </span>`A<span class="w"> </span><span class="kd">|</span><span class="w"> </span>`B<span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">-&gt;</span><span class="w"> </span><span class="o">(</span><span class="nv">_</span><span class="kd">[&gt;</span><span class="w"> </span>`A<span class="w"> </span><span class="kd">|</span><span class="w"> </span>`C<span class="w"> </span><span class="kd">|</span><span class="w"> </span>`D<span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span>&#39;a<span class="o">))</span><span class="w"> </span><span class="kd">*</span>
<span class="linenos"> 97</span><span class="w">    </span>(<span class="nv">_</span><span class="kd">[&lt;</span><span class="w"> </span>`A<span class="w"> </span><span class="kd">|</span><span class="w"> </span>`B<span class="w"> </span><span class="kd">&gt;</span><span class="w"> </span>`A<span class="w"> </span><span class="kd">]</span><span class="w"> </span><span class="kd">-&gt;</span><span class="w"> </span>&#39;a<span class="o">)</span><span class="w"> </span><span class="kd">*/</span>
<span class="linenos"> 98</span>
<span class="linenos"> 99</span><span class="c">% This is an interesting propagation rule we would like to add:</span>
<span class="linenos">100</span><span class="c">% a (non empty) subset of a singleton is a singleton.</span>
<span class="linenos">101</span><span class="c">% We cannot add the propagation rule now because:</span>
<span class="linenos">102</span><span class="c">%  1. we match up to unification</span>
<span class="linenos">103</span><span class="c">%     =&gt; the rule turns constraints of the form (is_subset X a::Y) into</span>
<span class="linenos">104</span><span class="c">%        (is_subset X [a])</span>
<span class="linenos">105</span><span class="c">%  2. already unifying the first argument of the rule triggers resumption</span>
<span class="linenos">106</span><span class="c">%     but there is confusion between the two runtimes and a mess happens</span>
<span class="linenos">107</span>propagate<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[</span>is_subset<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">[</span><span class="nv">Y</span><span class="kd">]]</span><span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="nv">Y</span><span class="kd">]</span><span class="o">).</span>
<span class="linenos">108</span>propagate<span class="w"> </span><span class="kd">[</span>is_subset<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="kd">,</span>is_subset<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="kd">]</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span>(is_subset<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Z</span><span class="o">).</span>
<span class="linenos">109</span>
<span class="linenos">110</span>inter<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">A</span><span class="kd">]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">B</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>inter<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos">111</span>inter<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">A</span><span class="kd">]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>inter<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos">112</span>inter<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
<span class="linenos">113</span><span class="w"> </span>
<span class="linenos">114</span>union<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>union<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span>
<span class="linenos">115</span>union<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span><span class="nv">L1</span><span class="kd">]</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span>union<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span>
<span class="linenos">116</span>union<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="o">.</span>
<span class="linenos">117</span>
<span class="linenos">118</span>is_ground<span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
<span class="linenos">119</span>is_ground<span class="w"> </span>(<span class="nv">_</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>is_ground<span class="w"> </span><span class="nv">L</span><span class="o">.</span>
<span class="linenos">120</span><span class="w"> </span>
<span class="linenos">121</span>propagate<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[</span>is_subset<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">YS</span><span class="kd">,</span><span class="w"> </span>is_subset<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span>(is_subset<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">INTER</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">122</span><span class="w">  </span>is_ground<span class="w"> </span><span class="nv">YS</span><span class="kd">,</span><span class="w"> </span>is_ground<span class="w"> </span><span class="nv">XS</span><span class="kd">,</span><span class="w"> </span>inter<span class="w"> </span><span class="nv">YS</span><span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">INTER</span><span class="o">.</span>
<span class="linenos">123</span>
<span class="linenos">124</span>propagate<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">]</span><span class="w"> </span>true<span class="o">.</span>
<span class="linenos">125</span>
<span class="linenos">126</span>propagate<span class="w"> </span><span class="kd">[</span>mem<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">A</span><span class="kd">,</span>is_subset<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="kd">]</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span>(mem<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">A</span><span class="o">).</span>
<span class="linenos">127</span>
<span class="linenos">128</span>propagate<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[</span>mem<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">A</span><span class="kd">]</span><span class="w"> </span>(is_subset<span class="w"> </span><span class="kd">[</span><span class="nv">A</span><span class="kd">]</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span>
<span class="linenos">129</span>propagate<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[</span>is_subset<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>is_subset<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">X</span><span class="kd">]</span><span class="w"> </span>(is_subset<span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">130</span><span class="w">  </span>is_ground<span class="w"> </span><span class="nv">A</span><span class="kd">,</span><span class="w"> </span>is_ground<span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span>union<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">C</span><span class="o">.</span>
<span class="linenos">131</span>
<span class="linenos">132</span>main1<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">133</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>fun<span class="w"> </span>f<span class="w"> </span><span class="kd">[</span><span class="w"> </span>case<span class="w"> </span>a<span class="w"> </span>a
<span class="linenos">134</span><span class="w">             </span><span class="kd">,</span><span class="w"> </span>case<span class="w"> </span>b<span class="w"> </span>(app<span class="w"> </span>g<span class="w"> </span>a<span class="o">)</span><span class="w"> </span><span class="kd">]</span>
<span class="linenos">135</span><span class="w">     </span><span class="kd">,</span><span class="w"> </span>fun<span class="w"> </span>g<span class="w"> </span><span class="kd">[</span><span class="w"> </span>case<span class="w"> </span>a<span class="w"> </span>c
<span class="linenos">136</span><span class="w">             </span><span class="kd">,</span><span class="w"> </span>case<span class="w"> </span>b<span class="w"> </span>d<span class="w"> </span><span class="kd">]</span>
<span class="linenos">137</span><span class="w">     </span><span class="kd">],</span>
<span class="linenos">138</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>fun<span class="w"> </span>f<span class="w"> </span><span class="kd">[</span>b<span class="kd">]</span><span class="w"> </span><span class="kd">[</span>a<span class="kd">,</span><span class="w"> </span>c<span class="kd">,</span><span class="w"> </span>d<span class="kd">,</span><span class="w"> </span>e<span class="w"> </span><span class="kd">]</span>
<span class="linenos">139</span><span class="w">     </span><span class="kd">,</span><span class="w"> </span>fun<span class="w"> </span>g<span class="w"> </span><span class="kd">[</span>a<span class="kd">,</span><span class="w"> </span>b<span class="kd">]</span><span class="w"> </span><span class="kd">[</span>c<span class="kd">,</span><span class="w"> </span>d<span class="kd">,</span><span class="w"> </span>e<span class="kd">]</span>
<span class="linenos">140</span><span class="w">     </span><span class="kd">],</span>
<span class="linenos">141</span><span class="w"> </span>check<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">T</span><span class="kd">,</span>
<span class="linenos">142</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;Type-checking ok&quot;</span><span class="kd">,</span>
<span class="linenos">143</span>
<span class="linenos">144</span><span class="w"> </span><span class="nv">I</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>fun<span class="w"> </span>f<span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">Of</span>
<span class="linenos">145</span><span class="w">     </span><span class="kd">,</span><span class="w"> </span>fun<span class="w"> </span>g<span class="w"> </span><span class="nv">Ig</span><span class="w"> </span><span class="nv">Og</span>
<span class="linenos">146</span><span class="w">     </span><span class="kd">],</span>
<span class="linenos">147</span><span class="w"> </span>check<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">I</span><span class="w"> </span><span class="nv">I</span><span class="kd">,</span>
<span class="linenos">148</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;Type-inference ok&quot;</span><span class="kd">,</span>
<span class="linenos">149</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;:::&quot;</span><span class="w"> </span>f<span class="w"> </span><span class="s2">&quot;:&quot;</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="s2">&quot;-&gt;&quot;</span><span class="w"> </span><span class="nv">Of</span><span class="kd">,</span>
<span class="linenos">150</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;:::&quot;</span><span class="w"> </span>g<span class="w"> </span><span class="s2">&quot;:&quot;</span><span class="w"> </span><span class="nv">Ig</span><span class="w"> </span><span class="s2">&quot;-&gt;&quot;</span><span class="w"> </span><span class="nv">Og</span><span class="kd">,</span>
<span class="linenos">151</span><span class="w"> </span>print_constraints<span class="kd">,</span>
<span class="linenos">152</span><span class="w"> </span>
<span class="linenos">153</span><span class="w"> </span><span class="nv">Ig</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span>a<span class="kd">],</span>
<span class="linenos">154</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;Type specialization ok&quot;</span><span class="kd">,</span>
<span class="linenos">155</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;:::&quot;</span><span class="w"> </span>f<span class="w"> </span><span class="s2">&quot;:&quot;</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="s2">&quot;-&gt;&quot;</span><span class="w"> </span><span class="nv">Of</span><span class="kd">,</span>
<span class="linenos">156</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;:::&quot;</span><span class="w"> </span>g<span class="w"> </span><span class="s2">&quot;:&quot;</span><span class="w"> </span><span class="nv">Ig</span><span class="w"> </span><span class="s2">&quot;-&gt;&quot;</span><span class="w"> </span><span class="nv">Og</span><span class="kd">,</span>
<span class="linenos">157</span><span class="w"> </span>print_constraints<span class="o">.</span>
<span class="linenos">158</span>
<span class="linenos">159</span>main2<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">160</span><span class="w"> </span><span class="nv">P&#39;</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>fun<span class="w"> </span>f<span class="w"> </span><span class="kd">[</span><span class="w"> </span>case<span class="w"> </span>a<span class="w"> </span>a
<span class="linenos">161</span><span class="w">              </span><span class="kd">,</span><span class="w"> </span>case<span class="w"> </span>b<span class="w"> </span>(app<span class="w"> </span>h1<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>g<span class="w"> </span>a<span class="o">))</span>
<span class="linenos">162</span><span class="w">              </span><span class="kd">,</span><span class="w"> </span>case<span class="w"> </span>c<span class="w"> </span>(app<span class="w"> </span>h2<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>g<span class="w"> </span>a<span class="o">))</span><span class="w"> </span><span class="kd">]</span>
<span class="linenos">163</span><span class="w">      </span><span class="kd">,</span><span class="w"> </span>fun<span class="w"> </span>g<span class="w">  </span><span class="kd">[</span><span class="w"> </span>case<span class="w"> </span>a<span class="w"> </span>a<span class="w"> </span><span class="kd">]</span>
<span class="linenos">164</span><span class="w">      </span><span class="kd">,</span><span class="w"> </span>fun<span class="w"> </span>h1<span class="w"> </span><span class="kd">[</span><span class="w"> </span>case<span class="w"> </span>a<span class="w"> </span>a
<span class="linenos">165</span><span class="w">               </span><span class="kd">,</span><span class="w"> </span>case<span class="w"> </span>b<span class="w"> </span>b
<span class="linenos">166</span><span class="w">               </span><span class="kd">,</span><span class="w"> </span>case<span class="w"> </span>d<span class="w"> </span>d<span class="w"> </span><span class="kd">]</span>
<span class="linenos">167</span><span class="w">      </span><span class="kd">,</span><span class="w"> </span>fun<span class="w"> </span>h2<span class="w"> </span><span class="kd">[</span><span class="w"> </span>case<span class="w"> </span>a<span class="w"> </span>a
<span class="linenos">168</span><span class="w">               </span><span class="kd">,</span><span class="w"> </span>case<span class="w"> </span>b<span class="w"> </span>b
<span class="linenos">169</span><span class="w">               </span><span class="kd">,</span><span class="w"> </span>case<span class="w"> </span>c<span class="w"> </span>c<span class="w"> </span><span class="kd">]</span>
<span class="linenos">170</span><span class="w">      </span><span class="kd">],</span>
<span class="linenos">171</span><span class="w"> </span><span class="nv">I&#39;</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="w"> </span>fun<span class="w"> </span>f<span class="w"> </span><span class="nv">If&#39;</span><span class="w"> </span><span class="nv">Of&#39;</span>
<span class="linenos">172</span><span class="w">      </span><span class="kd">,</span><span class="w"> </span>fun<span class="w"> </span>g<span class="w"> </span><span class="nv">Ig&#39;</span><span class="w"> </span><span class="nv">Og&#39;</span>
<span class="linenos">173</span><span class="w">      </span><span class="kd">,</span><span class="w"> </span>fun<span class="w"> </span>h1<span class="w"> </span><span class="nv">Ih1&#39;</span><span class="w"> </span><span class="nv">Oh1&#39;</span>
<span class="linenos">174</span><span class="w">      </span><span class="kd">,</span><span class="w"> </span>fun<span class="w"> </span>h2<span class="w"> </span><span class="nv">Ih2&#39;</span><span class="w"> </span><span class="nv">Oh2&#39;</span>
<span class="linenos">175</span><span class="w">      </span><span class="kd">],</span>
<span class="linenos">176</span><span class="w"> </span>check<span class="w"> </span><span class="nv">P&#39;</span><span class="w"> </span><span class="nv">I&#39;</span><span class="w"> </span><span class="nv">I&#39;</span><span class="kd">,</span>
<span class="linenos">177</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;Type-inference ok&quot;</span><span class="kd">,</span>
<span class="linenos">178</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;:::&quot;</span><span class="w"> </span>f<span class="w"> </span><span class="s2">&quot;:&quot;</span><span class="w"> </span><span class="nv">If&#39;</span><span class="w"> </span><span class="s2">&quot;-&gt;&quot;</span><span class="w"> </span><span class="nv">Of&#39;</span><span class="kd">,</span>
<span class="linenos">179</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;:::&quot;</span><span class="w"> </span>g<span class="w"> </span><span class="s2">&quot;:&quot;</span><span class="w"> </span><span class="nv">Ig&#39;</span><span class="w"> </span><span class="s2">&quot;-&gt;&quot;</span><span class="w"> </span><span class="nv">Og&#39;</span><span class="kd">,</span>
<span class="linenos">180</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;:::&quot;</span><span class="w"> </span>h1<span class="w"> </span><span class="s2">&quot;:&quot;</span><span class="w"> </span><span class="nv">Ih1&#39;</span><span class="w"> </span><span class="s2">&quot;-&gt;&quot;</span><span class="w"> </span><span class="nv">Oh1&#39;</span><span class="kd">,</span>
<span class="linenos">181</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;:::&quot;</span><span class="w"> </span>h2<span class="w"> </span><span class="s2">&quot;:&quot;</span><span class="w"> </span><span class="nv">Ih2&#39;</span><span class="w"> </span><span class="s2">&quot;-&gt;&quot;</span><span class="w"> </span><span class="nv">Oh2&#39;</span><span class="o">.</span>
<span class="linenos">182</span>
<span class="linenos">183</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(main1<span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;xxx failing&quot;</span><span class="kd">,</span><span class="w"> </span>fail<span class="o">)</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;xxx failed&quot;</span><span class="kd">,</span><span class="w"> </span>main2<span class="o">.</span>
<span class="linenos">184</span>
<span class="linenos">185</span><span class="c">% vim: set ft=lprolog:</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Type-checking ok</span>
<span class="go">Type-inference ok</span>
<span class="go">::: f : X0 -&gt; X1</span>
<span class="go">::: g : X2 -&gt; X3</span>
<span class="go"> mem X3 d  /* suspended on X3 */  mem X3 c  /* suspended on X3 */</span>
<span class="go"> X2 is_subset [a, b]  /* suspended on X2 */</span>
<span class="go"> X3 is_subset X1  /* suspended on X3 */  mem X2 a  /* suspended on X2 */</span>
<span class="go"> mem X1 a  /* suspended on X1 */  X0 is_subset [a, b]  /* suspended on X0 */</span>
<span class="go">Type specialization ok</span>
<span class="go">::: f : X0 -&gt; X1</span>
<span class="go">::: g : [a] -&gt; X3</span>
<span class="go"> mem X3 d  /* suspended on X3 */  mem X3 c  /* suspended on X3 */</span>
<span class="go"> X3 is_subset X1  /* suspended on X3 */  mem X1 a  /* suspended on X1 */</span>
<span class="go"> X0 is_subset [a, b]  /* suspended on X0 */</span>
<span class="go">xxx failing</span>
<span class="go">xxx failed</span>
<span class="go">Type-inference ok</span>
<span class="go">::: f : X4 -&gt; X5</span>
<span class="go">::: g : X6 -&gt; X7</span>
<span class="go">::: h1 : X8 -&gt; X9</span>
<span class="go">::: h2 : X10 -&gt; X11</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/polymorphic_variants.elpi&quot;, line 65, column 6, characters 2005-2006:</span>
<span class="go">Y is linear: name it _Y (discard) or Y_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/polymorphic_variants.elpi&quot;, line 111, column 7, characters 3545-3546:</span>
<span class="go">X is linear: name it _X (discard) or X_ (fresh variable)</span>

<span class="go">Compilation time: 0.001</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> mem X11 c  /* suspended on X11 */ mem X11 b  /* suspended on X11 */</span>
<span class="go"> mem X11 a  /* suspended on X11 */</span>
<span class="go"> X10 is_subset [a, b, c]  /* suspended on X10 */</span>
<span class="go"> mem X9 d  /* suspended on X9 */ mem X9 b  /* suspended on X9 */</span>
<span class="go"> mem X9 a  /* suspended on X9 */ X8 is_subset [a, b, d]  /* suspended on X8 */</span>
<span class="go"> mem X7 a  /* suspended on X7 */ X6 is_subset [a]  /* suspended on X6 */</span>
<span class="go"> X11 is_subset X5  /* suspended on X11 */</span>
<span class="go"> X7 is_subset X10  /* suspended on X7 */ mem X6 a  /* suspended on X6 */</span>
<span class="go"> X9 is_subset X5  /* suspended on X9 */ X7 is_subset X8  /* suspended on X7 */</span>
<span class="go"> mem X6 a  /* suspended on X6 */ mem X5 a  /* suspended on X5 */</span>
<span class="go"> X4 is_subset [a, b, c]  /* suspended on X4 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/printer.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="err">:</span>untyped
<span class="linenos">2</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">3</span><span class="w">  </span>print<span class="w"> </span>(p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>r<span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos">4</span><span class="w">  </span>print<span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span>f<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">mod</span><span class="w"> </span>r<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">5</span><span class="w">  </span>print<span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span>f<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span>r<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>g<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">6</span><span class="w">  </span>print<span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="o">(</span>f<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span>r<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">*</span><span class="w"> </span>g<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">7</span><span class="w">  </span>print<span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span>f<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">^</span><span class="w"> </span>r<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">^</span><span class="w"> </span>g<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">8</span><span class="w">  </span>print<span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">||</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">&amp;&amp;</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">===&gt;</span><span class="w"> </span><span class="nv">G</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">9</span><span class="w">  </span>print<span class="w"> </span><span class="kd">[</span>f<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>g<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span>(a<span class="w"> </span><span class="kd">,</span><span class="w"> </span>b<span class="o">)</span><span class="kd">,</span><span class="w"> </span>a<span class="w"> </span><span class="kd">+</span><span class="w"> </span>b<span class="kd">]</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">p X0 :- q X0 , r x</span>
<span class="go">X0 is f X1 mod r X0</span>
<span class="go">X0 is f X1 + r X0 * g X2</span>
<span class="go">X0 is (f X1 + r X0) * g X2</span>
<span class="go">X0 is f X1 ^ r X0 ^ g X2</span>
<span class="go">X0 || X2 &amp;&amp; X3 ===&gt; X4</span>
<span class="go">[f X0, g X1, (a , b), a + b]</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/queens.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">% ?- queens(4, Qs).</span>
<span class="linenos"> 2</span><span class="c">%   produces</span>
<span class="linenos"> 3</span><span class="c">%   Qs = [3,1,4,2] ;</span>
<span class="linenos"> 4</span><span class="c">%   Qs = [2,4,1,3]</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="c">% queens   +int  -[int]</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="c">%%%%module queens.</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="c">%spy X :- print start X, X, print ok X.</span>
<span class="linenos">11</span><span class="c">%spy X :- print ko X, fail.</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="kd">kind</span><span class="w"> </span><span class="nf">i</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos">14</span><span class="kd">type</span><span class="w"> </span><span class="nf">zero</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">15</span><span class="kd">type</span><span class="w"> </span><span class="nf">not_attack</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">16</span><span class="kd">type</span><span class="w"> </span><span class="nf">xxx</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">17</span><span class="kd">type</span><span class="w"> </span><span class="nf">xnil</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">18</span><span class="kd">type</span><span class="w"> </span><span class="nf">xcons</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">19</span><span class="kd">type</span><span class="w"> </span><span class="nf">select</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">20</span><span class="kd">type</span><span class="w"> </span><span class="nf">s</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">21</span><span class="kd">type</span><span class="w"> </span><span class="nf">range</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">22</span><span class="kd">type</span><span class="w"> </span><span class="nf">queens_aux</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">23</span><span class="kd">type</span><span class="w"> </span><span class="nf">queens</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">24</span><span class="kd">type</span><span class="w"> </span><span class="nf">q</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">25</span><span class="kd">type</span><span class="w"> </span><span class="nf">plus</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">26</span><span class="kd">type</span><span class="w"> </span><span class="nf">once</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">27</span><span class="kd">type</span><span class="w"> </span><span class="nf">not_attack_aux</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">28</span><span class="kd">type</span><span class="w"> </span><span class="nf">neq</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">29</span><span class="kd">type</span><span class="w"> </span><span class="nf">mult</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">30</span><span class="kd">type</span><span class="w"> </span><span class="nf">less</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">31</span><span class="kd">type</span><span class="w"> </span><span class="nf">iter</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">32</span><span class="kd">type</span><span class="w"> </span><span class="nf">exp</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">33</span>
<span class="linenos">34</span>plus<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">35</span>plus<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">S</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>plus<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">S</span><span class="o">.</span>
<span class="linenos">36</span>less<span class="w"> </span>zero<span class="w"> </span>(s<span class="w"> </span><span class="nv">_</span><span class="o">).</span>
<span class="linenos">37</span>less<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>less<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">.</span>
<span class="linenos">38</span>neq<span class="w"> </span>zero<span class="w"> </span>(s<span class="w"> </span><span class="nv">_</span><span class="o">).</span>
<span class="linenos">39</span>neq<span class="w"> </span>(s<span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span>zero<span class="o">.</span>
<span class="linenos">40</span>neq<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>neq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">.</span>
<span class="linenos">41</span>queens<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">Qs</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>range<span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">Ns</span><span class="kd">,</span><span class="w"> </span>queens_aux<span class="w"> </span><span class="nv">Ns</span><span class="w"> </span>xnil<span class="w"> </span><span class="nv">Qs</span><span class="o">.</span>
<span class="linenos">42</span>queens_aux<span class="w"> </span>xnil<span class="w"> </span><span class="nv">Qs</span><span class="w"> </span><span class="nv">Qs</span><span class="o">.</span>
<span class="linenos">43</span>queens_aux<span class="w"> </span><span class="nv">UnplacedQs</span><span class="w"> </span><span class="nv">SafeQs</span><span class="w"> </span><span class="nv">Qs</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>
<span class="linenos">44</span><span class="w">        </span>select<span class="w"> </span><span class="nv">UnplacedQs</span><span class="w"> </span><span class="nv">UnplacedQs1</span><span class="w"> </span><span class="nv">Q</span><span class="kd">,</span>
<span class="linenos">45</span><span class="w">        </span>not_attack<span class="w"> </span><span class="nv">SafeQs</span><span class="w"> </span><span class="nv">Q</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">)</span><span class="kd">,</span>
<span class="linenos">46</span><span class="w">        </span>queens_aux<span class="w"> </span><span class="nv">UnplacedQs1</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">Q</span><span class="w"> </span><span class="nv">SafeQs</span><span class="o">)</span><span class="w"> </span><span class="nv">Qs</span><span class="o">.</span>
<span class="linenos">47</span>
<span class="linenos">48</span>
<span class="linenos">49</span>not_attack_aux<span class="w"> </span><span class="nv">Xs</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>not_attack<span class="w"> </span><span class="nv">Xs</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">).</span>
<span class="linenos">50</span>not_attack<span class="w"> </span>xnil<span class="w"> </span><span class="nv">DUMMY1</span><span class="w"> </span><span class="nv">DUMMY2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">51</span>not_attack<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Ys</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>plus<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">S1</span><span class="kd">,</span><span class="w"> </span>neq<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">S1</span><span class="kd">,</span><span class="w"> </span>
<span class="linenos">52</span><span class="w">                               </span>plus<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">S2</span><span class="kd">,</span><span class="w"> </span>neq<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">S2</span><span class="kd">,</span>
<span class="linenos">53</span><span class="w">                               </span><span class="nv">N1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>
<span class="linenos">54</span><span class="w">                               </span>not_attack<span class="w"> </span><span class="nv">Ys</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">N1</span><span class="o">.</span>
<span class="linenos">55</span>
<span class="linenos">56</span><span class="c">%select A B C :- print first_clause (select A B C), fail.</span>
<span class="linenos">57</span>select<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Xs</span><span class="o">)</span><span class="w"> </span><span class="nv">Xs</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">58</span><span class="c">%select A B C :- print backtrack (select A B C), fail.</span>
<span class="linenos">59</span>select<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Ys</span><span class="o">)</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Zs</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>select<span class="w"> </span><span class="nv">Ys</span><span class="w"> </span><span class="nv">Zs</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">60</span><span class="c">%select A B C :- print no_more_chances (select A B C), fail.</span>
<span class="linenos">61</span>
<span class="linenos">62</span>range<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">N</span><span class="w"> </span>xnil<span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">63</span>range<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">Ns</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>less<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="kd">,</span><span class="w"> </span><span class="nv">M1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(s<span class="w"> </span><span class="nv">M</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>range<span class="w"> </span><span class="nv">M1</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">Ns</span><span class="o">.</span>
<span class="linenos">64</span>
<span class="linenos">65</span>once<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>queens<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">))))</span><span class="w"> </span><span class="nv">L</span><span class="kd">,</span><span class="w"> </span>xxx<span class="w"> </span><span class="nv">L</span><span class="o">.</span>
<span class="linenos">66</span>xxx<span class="w"> </span>(xcons<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">))</span><span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">))))</span><span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)</span><span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)))</span><span class="w"> </span>xnil<span class="o">)))).</span>
<span class="linenos">67</span>
<span class="linenos">68</span>q<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>queens<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">))))</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span>
<span class="linenos">69</span>
<span class="linenos">70</span>iter<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">71</span>iter<span class="w"> </span>(s<span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>iter<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">72</span>
<span class="linenos">73</span>mult<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="w"> </span>zero<span class="o">.</span>
<span class="linenos">74</span>mult<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>mult<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="kd">,</span><span class="w"> </span>plus<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span>
<span class="linenos">75</span>
<span class="linenos">76</span>exp<span class="w"> </span>zero<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(s<span class="w"> </span>zero<span class="o">).</span>
<span class="linenos">77</span>exp<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>exp<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="kd">,</span><span class="w"> </span>mult<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span>
<span class="linenos">78</span>
<span class="linenos">79</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">80</span><span class="w"> </span><span class="nv">TEN</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>s<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">)))))))))</span><span class="kd">,</span>
<span class="linenos">81</span><span class="w"> </span>exp<span class="w"> </span>(s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>zero<span class="o">))))</span><span class="w"> </span><span class="nv">TEN</span><span class="w"> </span><span class="nv">TENTHOUSAND</span><span class="kd">,</span>
<span class="linenos">82</span><span class="w"> </span>iter<span class="w"> </span><span class="nv">TENTHOUSAND</span><span class="w"> </span>once<span class="o">.</span>
<span class="linenos">83</span>
<span class="linenos">84</span><span class="c">% ----------------------------------------------------------</span>
<span class="linenos">85</span><span class="c">%queens(N,Qs) :- range(1,N,Ns), queens(Ns,[],Qs).</span>
<span class="linenos">86</span>
<span class="linenos">87</span><span class="c">%queens([],Qs,Qs).</span>
<span class="linenos">88</span><span class="c">%queens(UnplacedQs,SafeQs,Qs) :-  select(UnplacedQs,UnplacedQs1,Q),</span>
<span class="linenos">89</span><span class="c">%             not_attack(SafeQs,Q), queens(UnplacedQs1,[Q|SafeQs],Qs).</span>
<span class="linenos">90</span>
<span class="linenos">91</span><span class="c">%not_attack(Xs,X) :- not_attack(Xs,X,1).</span>
<span class="linenos">92</span><span class="c">%not_attack([],_,_) :- !.</span>
<span class="linenos">93</span><span class="c">%not_attack([Y|Ys],X,N) :-X =\= Y+N,X =\= Y-N,N1 is N+1,not_attack(Ys,X,N1).</span>
<span class="linenos">94</span>
<span class="linenos">95</span><span class="c">%select([X|Xs],Xs,X).</span>
<span class="linenos">96</span><span class="c">%select([Y|Ys],[Y|Zs],X) :- select(Ys,Zs,X).</span>
<span class="linenos">97</span>
<span class="linenos">98</span><span class="c">%range(N,N,[N]) :- !.</span>
<span class="linenos">99</span><span class="c">%range(M,N,[M|Ns]) :- M &lt; N, M1 is M+1, range(M1,N,Ns).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 50, column 17, characters 1169-1174:</span>
<span class="go">DUMMY1 is linear: name it _DUMMY1 (discard) or DUMMY1_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 50, column 24, characters 1176-1181:</span>
<span class="go">DUMMY2 is linear: name it _DUMMY2 (discard) or DUMMY2_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 70, column 11, characters 1942-1942:</span>
<span class="go">X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 73, column 11, characters 1985-1985:</span>
<span class="go">X is linear: name it _X (discard) or X_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/queens.elpi&quot;, line 76, column 10, characters 2045-2045:</span>
<span class="go">X is linear: name it _X (discard) or X_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 1.645</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/quote_syntax.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">2</span><span class="w">  </span>quote_syntax<span class="w"> </span><span class="s2">&quot;src/builtin.elpi&quot;</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">B</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/quote_syntax.elpi&quot;, line 2, column 42, characters 50-50:</span>
<span class="go">A is linear: name it _A (discard) or A_ (fresh variable)</span>
<span class="go">Fatal error: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/quote_syntax.elpi&quot;, line 2, column 3, characters 11-52:</span>
<span class="go">Unable to infer a closed type for quote_syntax:</span>
<span class="go">string -&gt; string -&gt; Src263 -&gt; Src265 -&gt; prop</span>
</pre></div>
</div>
<p><strong>../../tests/sources/random.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">2</span><span class="w">  </span>random.self_init<span class="kd">,</span>
<span class="linenos">3</span><span class="w">  </span>random.int<span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="nv">R</span><span class="kd">,</span>
<span class="linenos">4</span><span class="w">  </span>print<span class="w"> </span><span class="nv">R</span><span class="kd">,</span>
<span class="linenos">5</span><span class="w">  </span><span class="nv">R</span><span class="w"> </span><span class="kd">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="kd">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nv">R</span><span class="w"> </span><span class="kd">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">8</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/reduce_cbn.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">i</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 2</span><span class="kd">type</span><span class="w"> </span><span class="nf">app</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">lam</span><span class="w"> </span><span class="kt">(i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 4</span><span class="kd">type</span><span class="w"> </span><span class="nf">copy</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 5</span><span class="kd">type</span><span class="w"> </span><span class="nf">cbv</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 6</span><span class="kd">type</span><span class="w"> </span><span class="nf">beta</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 7</span><span class="kd">type</span><span class="w"> </span><span class="nf">subst</span><span class="w"> </span><span class="kt">(i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 8</span><span class="kd">type</span><span class="w"> </span><span class="nf">cbn</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="c">%copy X Y :- print &quot;XXXXXXXXX&quot; (copy X Y), fail.</span>
<span class="linenos">11</span>copy<span class="w"> </span>(app<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span>(app<span class="w"> </span><span class="nv">M2</span><span class="w"> </span><span class="nv">N2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">M2</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N2</span><span class="o">.</span>
<span class="linenos">12</span>copy<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="c">%cbn X Y :- print &quot;XXXXXXXXX&quot; (cbn X Y), fail.</span>
<span class="linenos">15</span>cbn<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\cbn<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>cbn<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">).</span><span class="w"> </span>
<span class="linenos">16</span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>subst<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span>cbn<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">M</span><span class="o">.</span>
<span class="linenos">17</span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>cbn<span class="w"> </span><span class="nv">M</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="nv">R</span><span class="o">.</span>
<span class="linenos">18</span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(app<span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">Y2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>cbn<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X2</span><span class="kd">,</span><span class="w"> </span>cbn<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Y2</span><span class="o">.</span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="c">%subst F N B :- print &quot;XXXXXXXXX&quot; (subst F N B), fail.</span>
<span class="linenos">21</span>subst<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">B2</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">B2</span><span class="w"> </span>x<span class="o">.</span>
<span class="linenos">22</span>
<span class="linenos">23</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">24</span><span class="w"> </span><span class="nv">ZERO</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">z\</span><span class="w"> </span>z<span class="o">)</span><span class="kd">,</span>
<span class="linenos">25</span><span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">z\</span><span class="w"> </span>app<span class="w"> </span>s<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>n<span class="w"> </span>s<span class="o">)</span><span class="w"> </span>z<span class="o">))</span><span class="kd">,</span>
<span class="linenos">26</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="nv">ZERO</span><span class="o">)</span><span class="w"> </span><span class="nv">ONE</span><span class="kd">,</span>
<span class="linenos">27</span><span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">m\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">z\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>n<span class="w"> </span>s<span class="o">)</span><span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>m<span class="w"> </span>s<span class="o">)</span><span class="w"> </span>z<span class="o">))</span><span class="kd">,</span>
<span class="linenos">28</span><span class="w"> </span><span class="nv">MULT</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">m\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>app<span class="w"> </span>n<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>m<span class="w"> </span>s<span class="o">))</span><span class="kd">,</span>
<span class="linenos">29</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="nv">ZERO</span><span class="o">))</span><span class="w"> </span><span class="nv">TWO</span><span class="kd">,</span>
<span class="linenos">30</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">))</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">SIX</span><span class="kd">,</span>
<span class="linenos">31</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">MULT</span><span class="w"> </span><span class="nv">SIX</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">TWELVE</span><span class="kd">,</span>
<span class="linenos">32</span><span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">m\</span><span class="w"> </span>app<span class="w"> </span>n<span class="w"> </span>m<span class="o">)</span><span class="kd">,</span>
<span class="linenos">33</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">ONE</span><span class="o">)</span><span class="w"> </span><span class="nv">THREE</span><span class="kd">,</span>
<span class="linenos">34</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">THREE</span><span class="o">)</span><span class="w"> </span><span class="nv">NINE</span><span class="kd">,</span>
<span class="linenos">35</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">MULT</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">FOUR</span><span class="kd">,</span>
<span class="linenos">36</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">THREE</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="kd">,</span>
<span class="linenos">37</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">FOUR</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">SIX</span><span class="kd">,</span>
<span class="linenos">38</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span>
<span class="linenos">39</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span>
<span class="linenos">40</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span>
<span class="linenos">41</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span>
<span class="linenos">42</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span>
<span class="linenos">43</span><span class="w"> </span>cbn<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/reduce_cbn.elpi&quot;, line 21, column 22, characters 728-756:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>

<span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/reduce_cbn.elpi&quot;, line 34, column 32, characters 1237-1240:</span>
<span class="go">NINE is linear: name it _NINE (discard) or NINE_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/reduce_cbn.elpi&quot;, line 31, column 31, characters 1129-1134:</span>
<span class="go">TWELVE is linear: name it _TWELVE (discard) or TWELVE_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.241</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/reduce_cbv.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">i</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 2</span><span class="kd">type</span><span class="w"> </span><span class="nf">app</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">lam</span><span class="w"> </span><span class="kt">(i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 4</span><span class="kd">type</span><span class="w"> </span><span class="nf">copy</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 5</span><span class="kd">type</span><span class="w"> </span><span class="nf">cbv</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 6</span><span class="kd">type</span><span class="w"> </span><span class="nf">beta</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>copy<span class="w"> </span>(app<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span>(app<span class="w"> </span><span class="nv">M2</span><span class="w"> </span><span class="nv">N2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">M2</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N2</span><span class="o">.</span>
<span class="linenos"> 9</span>copy<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos">10</span>
<span class="linenos">11</span>cbv<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>cbv<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>cbv<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos">12</span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">N</span><span class="o">)</span><span class="w"> </span><span class="nv">R2</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">13</span><span class="w"> </span>cbv<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N2</span><span class="kd">,</span>
<span class="linenos">14</span><span class="w"> </span>cbv<span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">M2</span><span class="kd">,</span>
<span class="linenos">15</span><span class="w"> </span>beta<span class="w"> </span><span class="nv">M2</span><span class="w"> </span><span class="nv">N2</span><span class="w"> </span><span class="nv">R2</span><span class="o">.</span>
<span class="linenos">16</span>
<span class="linenos">17</span>beta<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">R2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">18</span><span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span><span class="o">(</span><span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">R&#39;</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">R&#39;</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos">19</span><span class="w"> </span>cbv<span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="nv">R2</span><span class="o">.</span>
<span class="linenos">20</span>beta<span class="w"> </span><span class="nv">H</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span>(app<span class="w"> </span><span class="nv">H</span><span class="w"> </span><span class="nv">A</span><span class="o">).</span>
<span class="linenos">21</span>
<span class="linenos">22</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">23</span><span class="w"> </span><span class="nv">ZERO</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">z\</span><span class="w"> </span>z<span class="o">)</span><span class="kd">,</span>
<span class="linenos">24</span><span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">z\</span><span class="w"> </span>app<span class="w"> </span>s<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>n<span class="w"> </span>s<span class="o">)</span><span class="w"> </span>z<span class="o">))</span><span class="kd">,</span>
<span class="linenos">25</span><span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="nv">ZERO</span><span class="o">)</span><span class="w"> </span><span class="nv">ONE</span><span class="kd">,</span>
<span class="linenos">26</span><span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">m\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">z\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>n<span class="w"> </span>s<span class="o">)</span><span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>m<span class="w"> </span>s<span class="o">)</span><span class="w"> </span>z<span class="o">))</span><span class="kd">,</span>
<span class="linenos">27</span><span class="w"> </span><span class="nv">MULT</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">m\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">s\</span><span class="w"> </span>app<span class="w"> </span>n<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>m<span class="w"> </span>s<span class="o">))</span><span class="kd">,</span>
<span class="linenos">28</span><span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">SUCC</span><span class="w"> </span><span class="nv">ZERO</span><span class="o">))</span><span class="w"> </span><span class="nv">TWO</span><span class="kd">,</span>
<span class="linenos">29</span><span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">))</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">SIX</span><span class="kd">,</span>
<span class="linenos">30</span><span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">MULT</span><span class="w"> </span><span class="nv">SIX</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">TWELVE</span><span class="kd">,</span>
<span class="linenos">31</span><span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">n\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">m\</span><span class="w"> </span>app<span class="w"> </span>n<span class="w"> </span>m<span class="o">)</span><span class="kd">,</span>
<span class="linenos">32</span><span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">ONE</span><span class="o">)</span><span class="w"> </span><span class="nv">THREE</span><span class="kd">,</span>
<span class="linenos">33</span><span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">THREE</span><span class="o">)</span><span class="w"> </span><span class="nv">NINE</span><span class="kd">,</span>
<span class="linenos">34</span><span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">MULT</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">FOUR</span><span class="kd">,</span>
<span class="linenos">35</span><span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">THREE</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="kd">,</span>
<span class="linenos">36</span><span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">PLUS</span><span class="w"> </span><span class="nv">FOUR</span><span class="o">)</span><span class="w"> </span><span class="nv">TWO</span><span class="o">)</span><span class="w"> </span><span class="nv">SIX</span><span class="kd">,</span>
<span class="linenos">37</span><span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span>
<span class="linenos">38</span><span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span>
<span class="linenos">39</span><span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span>
<span class="linenos">40</span><span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span>
<span class="linenos">41</span><span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="kd">,</span>
<span class="linenos">42</span><span class="w"> </span>cbv<span class="w"> </span>(app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="nv">EXP</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">FIVE</span><span class="o">)</span><span class="w"> </span><span class="nv">RES</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/reduce_cbv.elpi&quot;, line 18, column 9, characters 420-448:</span>
<span class="go">The standard λProlog infix operator for implication =&gt; has higher precedence</span>
<span class="go">than conjunction. This means that &#39;A =&gt; B, C&#39; reads &#39;(A =&gt; B), C&#39;.</span>
<span class="go">This is a common mistake since it makes A only available to B (and not to C</span>
<span class="go">as many newcomers may expect).</span>
<span class="go">If this is really what you want write &#39;(A =&gt; B), C&#39; to silence this warning.</span>
<span class="go">Otherwise write &#39;A =&gt; (B, C)&#39;, or use the alternative implication operator ==&gt;.</span>
<span class="go">Infix ==&gt;  has lower precedence than conjunction, hence</span>
<span class="go">&#39;A ==&gt; B, C&#39; reads &#39;A ==&gt; (B, C)&#39; and means the same as &#39;A =&gt; (B, C)&#39;.</span>

<span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/reduce_cbv.elpi&quot;, line 33, column 32, characters 961-964:</span>
<span class="go">NINE is linear: name it _NINE (discard) or NINE_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/reduce_cbv.elpi&quot;, line 30, column 31, characters 853-858:</span>
<span class="go">TWELVE is linear: name it _TWELVE (discard) or TWELVE_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 1.589</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/restriction.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c">% main should fail.</span>
<span class="linenos">2</span>
<span class="linenos">3</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/restriction.elpi&quot;, line 3, column 22, characters 43-43:</span>
<span class="go">X is linear: name it _X (discard) or X_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>
</pre></div>
</div>
<p><strong>../../tests/sources/restriction3.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">pred</span><span class="w">  </span><span class="nf">if</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">prop</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">prop</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">prop</span>.
<span class="linenos"> 2</span>if<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">B</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span>
<span class="linenos"> 3</span>if<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">E</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">E</span><span class="o">.</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kd">kind</span><span class="w"> </span><span class="nf">term</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 6</span><span class="kd">pred</span><span class="w"> </span><span class="nf">foo</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">term</span>.
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="kd">type</span><span class="w"> </span><span class="nf">debug-print</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos"> 9</span>debug-print<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">.</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="kd">pred</span><span class="w"> </span><span class="nf">spy</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">prop</span>.
<span class="linenos">12</span>spy<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>counter<span class="w"> </span><span class="s2">&quot;run&quot;</span><span class="w"> </span><span class="nv">NR</span><span class="kd">,</span><span class="w"> </span>if<span class="w"> </span>(not<span class="o">(</span><span class="nv">NR</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="mi">0</span><span class="o">))</span><span class="w"> </span>(debug-print<span class="w"> </span><span class="s2">&quot;run=&quot;</span><span class="w"> </span><span class="nv">NR</span><span class="o">)</span><span class="w"> </span>true<span class="kd">,</span>
<span class="linenos">13</span><span class="w">         </span>debug-print<span class="w"> </span><span class="s2">&quot;----&lt;&lt;---- enter: &quot;</span><span class="w"> </span><span class="nv">P</span><span class="kd">,</span>
<span class="linenos">14</span><span class="w">         </span><span class="nv">P</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">15</span><span class="w">         </span>debug-print<span class="w"> </span><span class="s2">&quot;----&gt;&gt;---- exit: &quot;</span><span class="w"> </span><span class="nv">P</span><span class="o">.</span>
<span class="linenos">16</span>spy<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>debug-print<span class="w"> </span><span class="s2">&quot;----&gt;&gt;---- fail: &quot;</span><span class="w"> </span><span class="nv">P</span><span class="kd">,</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="kd">type</span><span class="w"> </span><span class="nf">lam</span><span class="w"> </span><span class="kt">(term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos">19</span>
<span class="linenos">20</span>foo<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">21</span><span class="w">  </span>spy(<span class="nv">A</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">i\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">j\</span><span class="w"> </span><span class="nv">X_</span><span class="w"> </span>i<span class="w"> </span>j<span class="o">)</span><span class="kd">,</span>
<span class="linenos">22</span><span class="w">  </span>spy(<span class="nv">B</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">i\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">j\</span><span class="w"> </span><span class="nv">Y_</span><span class="w"> </span>i<span class="w"> </span>j<span class="o">)</span><span class="kd">,</span>
<span class="linenos">23</span><span class="w">  </span>spy(<span class="nv">A</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">i\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">j\</span><span class="w"> </span>i<span class="o">)</span><span class="kd">,</span>
<span class="linenos">24</span><span class="w">  </span>spy(<span class="nv">B</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">i\</span><span class="w"> </span>lam<span class="w"> </span><span class="nv">j\</span><span class="w"> </span>i<span class="o">).</span>
<span class="linenos">25</span>
<span class="linenos">26</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>foo<span class="w"> </span>(<span class="nv">A_</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">B_</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">----&lt;&lt;---- enter:  X0 c0 = lam c1 \ lam c2 \ X1^1 c1 c2</span>
<span class="go">----&gt;&gt;---- exit:  lam c1 \ lam c2 \ X1^1 c1 c2 = lam c1 \ lam c2 \ X1^1 c1 c2</span>
<span class="go">----&lt;&lt;---- enter:  X2 = lam c1 \ lam c2 \ X3^1 c1 c2</span>
<span class="go">----&gt;&gt;---- exit:  lam c1 \ lam c2 \ X4 c1 c2 = lam c1 \ lam c2 \ X4 c1 c2</span>
<span class="go">----&lt;&lt;---- enter:  lam c1 \ lam c2 \ X1^1 c1 c2 = lam c1 \ lam c2 \ c1</span>
<span class="go">----&gt;&gt;---- exit:  lam c1 \ lam c2 \ c1 = lam c1 \ lam c2 \ c1</span>
<span class="go">----&lt;&lt;---- enter:  lam c1 \ lam c2 \ X4 c1 c2 = lam c1 \ lam c2 \ c1</span>
<span class="go">----&gt;&gt;---- exit:  lam c1 \ lam c2 \ c1 = lam c1 \ lam c2 \ c1</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/restriction4.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">2</span><span class="w">    </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">Y Z</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\
<span class="linenos">3</span><span class="w">      </span>std.spy(<span class="nv">X</span><span class="w"> </span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span>f<span class="w"> </span><span class="o">(</span><span class="nv">Y</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">e\</span><span class="w"> </span><span class="o">(</span><span class="nv">Z</span><span class="w"> </span>y<span class="w"> </span>e<span class="o">)).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">----&lt;&lt;---- enter:  X0 c0 = f (X1^1 c1) c2 \ X2^1 c1 c2</span>
<span class="go">----&gt;&gt;---- exit:  f (X3 c0) c2 \ X4 c0 c2 = f (X3 c0) c2 \ X4 c0 c2</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/restriction5.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">2</span><span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x y z u w</span>\
<span class="linenos">3</span><span class="w">    </span>std.spy(<span class="nv">X</span><span class="w"> </span>x<span class="w"> </span>y<span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>u<span class="w"> </span>w<span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">----&lt;&lt;---- enter:  X0 c0 c1 = X0 c3 c4</span>
<span class="go">----&gt;&gt;---- exit:  X1 = X1</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/restriction6.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="err">:</span>untyped<span class="w"> </span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">2</span><span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">Y</span>\<span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">y</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">Z</span>\
<span class="linenos">3</span><span class="w">      </span>std.spy(<span class="nv">X</span><span class="w"> </span>x<span class="w"> </span><span class="kd">=</span><span class="w"> </span>f<span class="w"> </span><span class="o">(</span><span class="nv">Y</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">l\e\</span><span class="w"> </span><span class="o">(</span><span class="nv">Z</span><span class="w"> </span>e<span class="o">)).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">----&lt;&lt;---- enter:  X0 c0 = f (X1^1 c1) c2 \ c3 \ X2^2 c3</span>
<span class="go">----&gt;&gt;---- exit:  f (X3 c0) c2 \ c3 \ X4^1 c3 = f (X3 c0) c2 \ c3 \ X4^1 c3</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/rev.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">% X10:</span>
<span class="linenos"> 2</span><span class="c">%   yap                                     0.027s</span>
<span class="linenos"> 3</span><span class="c">%   elpi                                    3.771s</span>
<span class="linenos"> 4</span><span class="c">%   one level index hashtbl                 0.528s</span>
<span class="linenos"> 5</span><span class="c">%   two level inefficient index             0.681s</span>
<span class="linenos"> 6</span><span class="c">%   one level index hashtbl + automatic GC  0.899s</span>
<span class="linenos"> 7</span><span class="c">%   one lvl hashtbl + flat + automatic GC   0.763s</span>
<span class="linenos"> 8</span><span class="c">%   one lvl hashtbl + flat                  0.629s</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="c">% X13:</span>
<span class="linenos">12</span><span class="c">%   yap                          0.083s</span>
<span class="linenos">13</span><span class="c">%   elpi                        10.068s</span>
<span class="linenos">14</span><span class="c">%   one level index hashtbl      3.90s</span>
<span class="linenos">15</span><span class="c">%   two level inefficient index  4.48s</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="c">% X14:</span>
<span class="linenos">18</span><span class="c">%   ocamlopt                     0.014s</span>
<span class="linenos">19</span><span class="c">%   ocamlc                       0.024s</span>
<span class="linenos">20</span><span class="c">%   yap                          0.033s</span>
<span class="linenos">21</span><span class="c">%   teyjus                       0.257s</span>
<span class="linenos">22</span><span class="c">%   elpi                         4.72s (setting ulimit -s 81920)</span>
<span class="linenos">23</span><span class="c">%                                newlazy  lazy   eager   with formula       with terms</span>
<span class="linenos">24</span><span class="c">%   no index                     2.90s  3.85s  4.74s   4.49s              4.28s</span>
<span class="linenos">25</span><span class="c">%   one level index hashtbl      2.51s  2.37s  2.35s   2.29s              2.28s</span>
<span class="linenos">26</span><span class="c">%   two level inefficient index  1.78s  2.19s  3.00s   2.30s              2.34s</span>
<span class="linenos">27</span><span class="c">%   one level hashtbl + auto GC  3.78s  3.97s  4.67s   3.39s              3.88s</span>
<span class="linenos">28</span><span class="c">%   one lvl hash+flat+ auto GC   3.10s  3.22s  3.40s   3.38s              3.14s</span>
<span class="linenos">29</span><span class="c">%   one lvl hashtbl + flat              2.42s  2.43s   2.64s              2.27s</span>
<span class="linenos">30</span><span class="c">%   one lvl hash+ flat + man GC         2.99s  2.80s   2.83s              2.37s</span>
<span class="linenos">31</span><span class="c">%   one lvl index map main       2.61s  2.44s  2.60s   2.40s              2.18s</span>
<span class="linenos">32</span><span class="c">%I  one lvl hashtbl              0.72s  0.61s  -----   0.63s              0.57s</span>
<span class="linenos">33</span><span class="c">%I  two lvl efficient index      0.36s  0.55s  0.62s</span>
<span class="linenos">34</span><span class="c">%II two lvl inefficient index    0.70s</span>
<span class="linenos">35</span><span class="c">%I  desperate two lvl effici     0.19s</span>
<span class="linenos">36</span><span class="c">%I  desperate.ml                 0.11s  0.14s</span>
<span class="linenos">37</span><span class="c">%I  desperate2.ml                0.11s</span>
<span class="linenos">38</span><span class="c">%I  desperate3.ml                0.12s</span>
<span class="linenos">39</span><span class="kd">kind</span><span class="w"> </span><span class="nf">i</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos">40</span><span class="kd">type</span><span class="w"> </span><span class="nf">xnil</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">41</span><span class="kd">type</span><span class="w"> </span><span class="nf">xcons</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">42</span><span class="kd">type</span><span class="w"> </span><span class="nf">x9</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">43</span><span class="kd">type</span><span class="w"> </span><span class="nf">x8</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">44</span><span class="kd">type</span><span class="w"> </span><span class="nf">x7</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">45</span><span class="kd">type</span><span class="w"> </span><span class="nf">x6</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">46</span><span class="kd">type</span><span class="w"> </span><span class="nf">x5</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">47</span><span class="kd">type</span><span class="w"> </span><span class="nf">x4</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">48</span><span class="kd">type</span><span class="w"> </span><span class="nf">x3</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">49</span><span class="kd">type</span><span class="w"> </span><span class="nf">x2</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">50</span><span class="kd">type</span><span class="w"> </span><span class="nf">x10</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">51</span><span class="kd">type</span><span class="w"> </span><span class="nf">x1</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">52</span><span class="kd">type</span><span class="w"> </span><span class="nf">rev</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">53</span><span class="kd">type</span><span class="w"> </span><span class="nf">aux</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">54</span><span class="kd">type</span><span class="w"> </span><span class="nf">append</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">55</span>
<span class="linenos">56</span>rev<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">RL</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span>aux<span class="w"> </span><span class="nv">L</span><span class="w"> </span>xnil<span class="w">  </span><span class="nv">RL</span><span class="w"> </span><span class="o">.</span>
<span class="linenos">57</span>aux<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XS</span><span class="o">)</span><span class="w">  </span><span class="nv">ACC</span><span class="w">  </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>aux<span class="w"> </span><span class="nv">XS</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">ACC</span><span class="o">)</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="o">.</span><span class="w"> </span>
<span class="linenos">58</span>aux<span class="w"> </span>xnil<span class="w">  </span><span class="nv">L</span><span class="w">  </span><span class="nv">L</span><span class="w"> </span><span class="o">.</span>
<span class="linenos">59</span>
<span class="linenos">60</span>append<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XS</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L1</span><span class="o">)</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span>append<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="o">.</span>
<span class="linenos">61</span>append<span class="w"> </span>xnil<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="o">.</span>
<span class="linenos">62</span>
<span class="linenos">63</span><span class="err">:</span>untyped
<span class="linenos">64</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">65</span><span class="w">    </span><span class="nv">X1</span><span class="w"> </span><span class="kd">=</span><span class="w">  </span>(xcons<span class="w"> </span>x1<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x2<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x3<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x4<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x5<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x6<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x7<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x8<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x9<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x10<span class="w"> </span>xnil<span class="o">))))))))))</span><span class="kd">,</span>
<span class="linenos">66</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">X2</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">67</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">X3</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">68</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="nv">X4</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">69</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="nv">X5</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">70</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="nv">X6</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">71</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X6</span><span class="w"> </span><span class="nv">X6</span><span class="w"> </span><span class="nv">X7</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">72</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X7</span><span class="w"> </span><span class="nv">X7</span><span class="w"> </span><span class="nv">X8</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">73</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X8</span><span class="w"> </span><span class="nv">X8</span><span class="w"> </span><span class="nv">X9</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">74</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X9</span><span class="w"> </span><span class="nv">X9</span><span class="w"> </span><span class="nv">X10</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">75</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X10</span><span class="w"> </span><span class="nv">X10</span><span class="w"> </span><span class="nv">X11</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">76</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X11</span><span class="w"> </span><span class="nv">X11</span><span class="w"> </span><span class="nv">X12</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">77</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X12</span><span class="w"> </span><span class="nv">X12</span><span class="w"> </span><span class="nv">X13</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">78</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X13</span><span class="w"> </span><span class="nv">X13</span><span class="w"> </span><span class="nv">X14</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">79</span><span class="w">   </span><span class="c">% append X14 X14 X15  ,</span>
<span class="linenos">80</span><span class="w">   </span><span class="c">% append X15 X15 X16  ,</span>
<span class="linenos">81</span><span class="w">   </span><span class="c">% append X16 X16 X17  ,</span>
<span class="linenos">82</span><span class="w">   </span><span class="c">% append X17 X17 X18  ,</span>
<span class="linenos">83</span><span class="w">   </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X14</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">84</span><span class="w">   </span>rev<span class="w"> </span><span class="nv">X</span><span class="w">  </span><span class="nv">Y</span><span class="kd">,</span><span class="w">   </span>rev<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="kd">,</span><span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.135</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/rev14.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">i</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 2</span><span class="kd">type</span><span class="w"> </span><span class="nf">xnil</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">xcons</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 4</span><span class="kd">type</span><span class="w"> </span><span class="nf">x9</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 5</span><span class="kd">type</span><span class="w"> </span><span class="nf">x8</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 6</span><span class="kd">type</span><span class="w"> </span><span class="nf">x7</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 7</span><span class="kd">type</span><span class="w"> </span><span class="nf">x6</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 8</span><span class="kd">type</span><span class="w"> </span><span class="nf">x5</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos"> 9</span><span class="kd">type</span><span class="w"> </span><span class="nf">x4</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">10</span><span class="kd">type</span><span class="w"> </span><span class="nf">x3</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">11</span><span class="kd">type</span><span class="w"> </span><span class="nf">x2</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">12</span><span class="kd">type</span><span class="w"> </span><span class="nf">x10</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">13</span><span class="kd">type</span><span class="w"> </span><span class="nf">x1</span><span class="w"> </span><span class="kt">i</span>.
<span class="linenos">14</span><span class="kd">type</span><span class="w"> </span><span class="nf">rev</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">15</span><span class="kd">type</span><span class="w"> </span><span class="nf">aux</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">16</span><span class="kd">type</span><span class="w"> </span><span class="nf">append</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">i</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">17</span>
<span class="linenos">18</span>rev<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">RL</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span>aux<span class="w"> </span><span class="nv">L</span><span class="w"> </span>xnil<span class="w">  </span><span class="nv">RL</span><span class="o">.</span>
<span class="linenos">19</span>aux<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XS</span><span class="o">)</span><span class="w">  </span><span class="nv">ACC</span><span class="w">  </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>aux<span class="w"> </span><span class="nv">XS</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">ACC</span><span class="o">)</span><span class="w"> </span><span class="nv">R</span><span class="o">.</span>
<span class="linenos">20</span>aux<span class="w"> </span>xnil<span class="w">  </span><span class="nv">L</span><span class="w">  </span><span class="nv">L</span><span class="o">.</span>
<span class="linenos">21</span>
<span class="linenos">22</span>append<span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XS</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span>(xcons<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L1</span><span class="o">)</span><span class="w">  </span><span class="kd">:-</span><span class="w"> </span>append<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span>
<span class="linenos">23</span>append<span class="w"> </span>xnil<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span>
<span class="linenos">24</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">25</span><span class="w">    </span><span class="nv">X1</span><span class="w"> </span><span class="kd">=</span><span class="w">  </span>(xcons<span class="w"> </span>x1<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x2<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x3<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x4<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x5<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x6<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x7<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x8<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x9<span class="w"> </span><span class="o">(</span>xcons<span class="w"> </span>x10<span class="w"> </span>xnil<span class="o">))))))))))</span><span class="kd">,</span>
<span class="linenos">26</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">X2</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">27</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">X3</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">28</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="nv">X4</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">29</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="nv">X5</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">30</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="nv">X6</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">31</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X6</span><span class="w"> </span><span class="nv">X6</span><span class="w"> </span><span class="nv">X7</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">32</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X7</span><span class="w"> </span><span class="nv">X7</span><span class="w"> </span><span class="nv">X8</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">33</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X8</span><span class="w"> </span><span class="nv">X8</span><span class="w"> </span><span class="nv">X9</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">34</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X9</span><span class="w"> </span><span class="nv">X9</span><span class="w"> </span><span class="nv">X10</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">35</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X10</span><span class="w"> </span><span class="nv">X10</span><span class="w"> </span><span class="nv">X11</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">36</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X11</span><span class="w"> </span><span class="nv">X11</span><span class="w"> </span><span class="nv">X12</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">37</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X12</span><span class="w"> </span><span class="nv">X12</span><span class="w"> </span><span class="nv">X13</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">38</span><span class="w">   </span>append<span class="w"> </span><span class="nv">X13</span><span class="w"> </span><span class="nv">X13</span><span class="w"> </span><span class="nv">X14</span><span class="w">  </span><span class="kd">,</span>
<span class="linenos">39</span><span class="w">   </span><span class="c">% append X14 X14 X15  ,</span>
<span class="linenos">40</span><span class="w">   </span><span class="c">% append X15 X15 X16  ,</span>
<span class="linenos">41</span><span class="w">   </span><span class="c">% append X16 X16 X17  ,</span>
<span class="linenos">42</span><span class="w">   </span><span class="c">% append X17 X17 X18  ,</span>
<span class="linenos">43</span><span class="w">   </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X14</span><span class="w"> </span><span class="kd">,</span>
<span class="linenos">44</span><span class="w">   </span>rev<span class="w"> </span><span class="nv">X</span><span class="w">  </span><span class="nv">Y</span><span class="kd">,</span><span class="w">   </span>rev<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="kd">,</span><span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.133</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/same_term.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">2</span><span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="kd">==</span><span class="w"> </span><span class="mi">3</span><span class="kd">,</span>
<span class="linenos">3</span><span class="w">  </span>not(<span class="kd">[</span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">_</span><span class="kd">]</span><span class="w"> </span><span class="kd">==</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="kd">]</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">4</span><span class="w">  </span>not(<span class="nv">X</span><span class="w"> </span><span class="kd">==</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">5</span><span class="w">  </span>(<span class="nv">x\</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">==</span><span class="w"> </span>(<span class="nv">y\</span><span class="w"> </span>y<span class="o">)</span><span class="kd">,</span>
<span class="linenos">6</span><span class="w">  </span><span class="nv">ID</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(<span class="nv">x\</span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos">7</span><span class="w">  </span>(<span class="nv">ID</span><span class="w"> </span><span class="mi">3</span><span class="o">)</span><span class="w"> </span><span class="kd">==</span><span class="w"> </span>(<span class="nv">ID</span><span class="w"> </span><span class="mi">3</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">8</span><span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x y</span>\<span class="w"> </span>same_var<span class="w"> </span>(<span class="nv">X</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">X</span><span class="w"> </span>y<span class="o">)</span><span class="kd">,</span><span class="w"> </span>not(same_term<span class="w"> </span><span class="o">(</span><span class="nv">X</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="nv">X</span><span class="w"> </span>y<span class="o">)).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/self_assignment.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="c">% main should succeed</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="err">:</span>untyped
<span class="linenos">4</span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos">5</span>
<span class="linenos">6</span><span class="err">:</span>untyped
<span class="linenos">7</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">c</span>\<span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span>q<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>q<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>d<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/set.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">build</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">std.set</span><span class="w"> </span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">std.set</span><span class="w"> </span><span class="kt">int</span>.
<span class="linenos"> 2</span>build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos"> 3</span>build<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 4</span><span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span>
<span class="linenos"> 5</span><span class="w">  </span>std.set.add<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XR</span><span class="kd">,</span>
<span class="linenos"> 6</span><span class="w">  </span>build<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">XR</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="kd">pred</span><span class="w"> </span><span class="nf">test</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(int</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>.
<span class="linenos"> 9</span>test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">10</span>test<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">11</span><span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span>
<span class="linenos">12</span><span class="w">  </span>std.assert!<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not found&quot;</span><span class="kd">,</span>
<span class="linenos">13</span><span class="w">  </span>test<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="kd">pred</span><span class="w"> </span><span class="nf">test2</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(int</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">A</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop)</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">A</span>.
<span class="linenos">16</span>test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">17</span>test2<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">18</span><span class="w">  </span><span class="nv">N1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span>
<span class="linenos">19</span><span class="w">  </span><span class="nv">F</span><span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="kd">,</span>
<span class="linenos">20</span><span class="w">  </span>test2<span class="w"> </span><span class="nv">N1</span><span class="w"> </span><span class="nv">M</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">R</span><span class="o">.</span>
<span class="linenos">21</span>
<span class="linenos">22</span>macro<span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="mi">4096</span><span class="o">.</span>
<span class="linenos">23</span>
<span class="linenos">24</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">25</span><span class="w">  </span>std.time<span class="w"> </span>(build<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>{std.set.make<span class="w"> </span>cmp_term} <span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time0</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">26</span><span class="w">  </span>std.time<span class="w"> </span>(test<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>std.set.mem<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">Time1</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">27</span><span class="w">  </span>std.set.elements<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">L</span><span class="kd">,</span>
<span class="linenos">28</span><span class="w">  </span>std.assert!<span class="w"> </span>({std.length<span class="w"> </span><span class="nv">L</span>} <span class="kd">=</span><span class="w"> </span><span class="kd">@</span>iters<span class="kd">,</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="mi">0</span><span class="kd">|</span><span class="nv">_</span><span class="kd">]</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;elements broken&quot;</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">29</span><span class="w">  </span>std.time<span class="w"> </span>(test2<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="kd">@</span>iters<span class="w"> </span>std.set.remove<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">E</span><span class="o">)</span><span class="w"> </span><span class="nv">Time2</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span>
<span class="linenos">30</span><span class="w">  </span>std.assert!<span class="w"> </span>(std.set.cardinal<span class="w"> </span><span class="nv">E</span><span class="w"> </span><span class="mi">0</span><span class="o">)</span><span class="w"> </span><span class="s2">&quot;not empty&quot;</span><span class="kd">,</span>
<span class="linenos">31</span><span class="w">  </span>print<span class="w"> </span><span class="nv">Time0</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time1</span><span class="w"> </span><span class="s2">&quot;+&quot;</span><span class="w"> </span><span class="nv">Time2</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1.097774 + 0.054034 + 0.769591</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 2.009</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/shorten.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">namespace</span><span class="w"> </span>b<span class="w"> </span>{
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kd">pred</span><span class="w"> </span><span class="nf">foo</span>.
<span class="linenos"> 4</span>foo<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>true<span class="o">.</span>
<span class="linenos"> 5</span><span class="kd">pred</span><span class="w"> </span><span class="nf">baz</span>.
<span class="linenos"> 6</span>baz<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="w">  </span><span class="kd">namespace</span><span class="w"> </span>bar<span class="w"> </span>{
<span class="linenos"> 9</span><span class="w">  </span>
<span class="linenos">10</span><span class="w">  </span><span class="kd">pred</span><span class="w"> </span><span class="nf">baz</span>.
<span class="linenos">11</span><span class="w">  </span>baz<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>foo<span class="o">.</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="w">  </span>}
<span class="linenos">14</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="kd">shorten</span><span class="w"> </span>bar.{ baz<span class="w"> </span>}.
<span class="linenos">17</span>
<span class="linenos">18</span>}
<span class="linenos">19</span>
<span class="linenos">20</span><span class="kd">namespace</span><span class="w"> </span>a<span class="w"> </span>{
<span class="linenos">21</span>
<span class="linenos">22</span><span class="w">  </span><span class="kd">shorten</span><span class="w"> </span>b.{ foo<span class="w"> </span>}.
<span class="linenos">23</span><span class="w">  </span><span class="kd">shorten</span><span class="w"> </span>b.bar.{ baz<span class="w"> </span>}.
<span class="linenos">24</span><span class="w">  </span>
<span class="linenos">25</span><span class="w">  </span><span class="kd">pred</span><span class="w"> </span><span class="nf">main</span>.
<span class="linenos">26</span><span class="w">  </span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>foo<span class="kd">,</span><span class="w"> </span>b.foo<span class="kd">,</span><span class="w"> </span>baz<span class="kd">,</span><span class="w"> </span>bar.baz<span class="kd">,</span><span class="w"> </span>b.bar.baz<span class="o">.</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="w">  </span><span class="kd">pred</span><span class="w"> </span><span class="nf">bar.baz</span>.
<span class="linenos">29</span><span class="w">  </span>bar.baz<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>true<span class="o">.</span>
<span class="linenos">30</span>
<span class="linenos">31</span><span class="w">  </span><span class="kd">shorten</span><span class="w"> </span>b.{ baz<span class="w"> </span>}.
<span class="linenos">32</span><span class="w">  </span>
<span class="linenos">33</span><span class="w">  </span>baz<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>true<span class="o">.</span>
<span class="linenos">34</span><span class="w">  </span>bar.baz<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>baz<span class="o">.</span>
<span class="linenos">35</span>
<span class="linenos">36</span>}
<span class="linenos">37</span>
<span class="linenos">38</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>a.main<span class="o">.</span><span class="w"> </span>
<span class="linenos">39</span><span class="w">       </span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/shorten2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">accumulate</span><span class="w"> </span>shorten_aux<span class="kd">,</span><span class="w"> </span>shorten_aux2<span class="o">.</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kd">pred</span><span class="w"> </span><span class="nf">foo</span>.
<span class="linenos">4</span>foo<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>true<span class="o">.</span>
<span class="linenos">5</span>
<span class="linenos">6</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">7</span><span class="w">  </span>foo<span class="kd">,</span><span class="w"> </span>bar<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/shorten_aux.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">namespace</span><span class="w"> </span>a<span class="w"> </span>{
<span class="linenos">2</span><span class="w">  </span><span class="kd">pred</span><span class="w"> </span><span class="nf">foo</span>.
<span class="linenos">3</span><span class="w">  </span>foo<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos">4</span>}
<span class="linenos">5</span>
<span class="linenos">6</span><span class="kd">shorten</span><span class="w"> </span>a.{ foo<span class="w"> </span>}.
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>
</pre></div>
</div>
<p><strong>../../tests/sources/shorten_aux2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">bar</span>.
<span class="linenos">2</span>bar<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>foo<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning:</span>
<span class="go">Undeclared globals:</span>
<span class="go">- File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/shorten_aux2.elpi&quot;, line 2, column 8, characters 18-20: foo.</span>
<span class="go">Please add the following text to your program:</span>
<span class="go">type foo prop.</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>
</pre></div>
</div>
<p><strong>../../tests/sources/shorten_builtin.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">shorten</span><span class="w"> </span>std.string.set.{ empty<span class="w"> </span>}.
<span class="linenos">2</span>
<span class="linenos">3</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">4</span><span class="w">  </span>print<span class="w"> </span>{empty}.
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">{{  }}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/shorten_trie.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">std.list.map</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>.
<span class="linenos"> 2</span>std.list.map<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos"> 3</span><span class="kd">pred</span><span class="w"> </span><span class="nf">std.string.concat1</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>.
<span class="linenos"> 4</span>std.string.concat1<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos"> 5</span><span class="kd">pred</span><span class="w"> </span><span class="nf">std.string.escape</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">any</span>.
<span class="linenos"> 6</span>std.string.escape<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="kd">shorten</span><span class="w"> </span>std.{list.map<span class="kd">,</span><span class="w"> </span>string<span class="o">.</span>{ concat1<span class="kd">,</span><span class="w"> </span>escape<span class="w"> </span><span class="err">}</span>}.
<span class="linenos"> 9</span>
<span class="linenos">10</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>list.map<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="kd">[],</span><span class="w"> </span>concat1<span class="w"> </span><span class="s2">&quot;a&quot;</span><span class="w"> </span><span class="s2">&quot;b&quot;</span><span class="w"> </span><span class="nv">AB</span><span class="kd">,</span><span class="w"> </span>escape<span class="w"> </span><span class="s2">&quot;x y&quot;</span><span class="w"> </span><span class="nv">E</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/shorten_trie.elpi&quot;, line 10, column 40, characters 275-276:</span>
<span class="go">AB is linear: name it _AB (discard) or AB_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/shorten_trie.elpi&quot;, line 10, column 57, characters 292-292:</span>
<span class="go">E is linear: name it _E (discard) or E_ (fresh variable)</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/shorten_trie.elpi&quot;, line 10, column 18, characters 253-253:</span>
<span class="go">F is linear: name it _F (discard) or F_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/spill_and.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">term</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 2</span><span class="kd">type</span><span class="w"> </span><span class="nf">app</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">lam</span><span class="w"> </span><span class="kt">(term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 4</span><span class="kd">type</span><span class="w"> </span><span class="nf">t</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kd">pred</span><span class="w"> </span><span class="nf">copy</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">term</span>.
<span class="linenos"> 7</span>copy<span class="w"> </span>(app<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>(app<span class="w"> </span><span class="nv">A1</span><span class="w"> </span><span class="nv">B1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A1</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">B1</span><span class="o">.</span>
<span class="linenos"> 8</span>copy<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F1</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 9</span><span class="c">% we omit (copy x x) on purpose</span>
<span class="linenos">10</span>
<span class="linenos">11</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">12</span><span class="w">  </span><span class="nv">T</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>{copy<span class="w"> </span>x<span class="w"> </span>t<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>(<span class="o">(</span><span class="nv">A</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>x<span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="o">(</span>app<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>x<span class="o">))</span>})<span class="kd">,</span>
<span class="linenos">13</span><span class="w">  </span>print<span class="w"> </span><span class="nv">T</span><span class="kd">,</span>
<span class="linenos">14</span><span class="w">  </span><span class="nv">T</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="err">\</span><span class="w"> </span>app<span class="w"> </span>t<span class="w"> </span>t<span class="o">).</span><span class="w"> </span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">lam c0 \ app t t</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/spill_impl.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">term</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 2</span><span class="kd">type</span><span class="w"> </span><span class="nf">app</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">lam</span><span class="w"> </span><span class="kt">(term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 4</span><span class="kd">type</span><span class="w"> </span><span class="nf">t</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kd">pred</span><span class="w"> </span><span class="nf">copy</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">term</span>.
<span class="linenos"> 7</span>copy<span class="w"> </span>(app<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>(app<span class="w"> </span><span class="nv">A1</span><span class="w"> </span><span class="nv">B1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A1</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">B1</span><span class="o">.</span>
<span class="linenos"> 8</span>copy<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F1</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 9</span><span class="c">% we omit (copy x x) on purpose</span>
<span class="linenos">10</span>
<span class="linenos">11</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">12</span><span class="w">  </span><span class="nv">T</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>{copy<span class="w"> </span>x<span class="w"> </span>t<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span>(app<span class="w"> </span>x<span class="w"> </span>x<span class="o">)</span>})<span class="kd">,</span>
<span class="linenos">13</span><span class="w">  </span>print<span class="w"> </span><span class="nv">T</span><span class="kd">,</span>
<span class="linenos">14</span><span class="w">  </span><span class="nv">T</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">_</span><span class="err">\</span><span class="w"> </span>app<span class="w"> </span>t<span class="w"> </span>t<span class="o">).</span><span class="w"> </span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">lam c0 \ app t t</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/spill_lam.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">pp</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">string</span>.
<span class="linenos">2</span>pp<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="s2">&quot;name&quot;</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>name<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">3</span>
<span class="linenos">4</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>(<span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">x\</span><span class="w"> </span>print<span class="w"> </span>{pp<span class="w"> </span>x})<span class="kd">,</span><span class="w"> </span><span class="o">(</span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">x\</span><span class="w"> </span>pp<span class="w"> </span>x<span class="w"> </span><span class="o">(</span><span class="nv">W</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="o">(</span><span class="nv">W</span><span class="w"> </span>x<span class="o">)).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/trace.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">p</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.
<span class="linenos">2</span>p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="mi">3</span><span class="o">.</span>
<span class="linenos">3</span>p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="mi">2</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">Y</span><span class="o">.</span>
<span class="linenos">4</span>p<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="o">.</span>
<span class="linenos">5</span>
<span class="linenos">6</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">7</span><span class="w">  </span>p<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="nv">X_</span><span class="w"> </span><span class="kd">;</span><span class="w"> </span>p<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="nv">Y_</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/trace2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">2</span><span class="w">  </span>print<span class="w"> </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">Y</span>\<span class="w"> </span>fail<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span><span class="o">(</span>true<span class="kd">,</span><span class="w"> </span>fail<span class="o">)).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/trace_chr.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">constraint</span><span class="w"> </span><span class="nf">even odd </span>{
<span class="linenos"> 2</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(even<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(odd<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(odd<span class="w"> </span>z<span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>true<span class="o">.</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(even<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(odd<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(odd<span class="w"> </span><span class="o">(</span>s<span class="w"> </span>z<span class="o">))</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos"> 4</span>}
<span class="linenos"> 5</span><span class="kd">kind</span><span class="w"> </span><span class="nf">nat</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 6</span><span class="kd">type</span><span class="w"> </span><span class="nf">s</span><span class="w"> </span><span class="kt">nat</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">nat</span>.
<span class="linenos"> 7</span><span class="kd">type</span><span class="w"> </span><span class="nf">z</span><span class="w"> </span><span class="kt">nat</span>.
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="kd">pred</span><span class="w"> </span><span class="nf">even</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">nat</span>.
<span class="linenos">10</span><span class="kd">pred</span><span class="w"> </span><span class="nf">odd</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">nat</span>.
<span class="linenos">11</span>even<span class="w"> </span>z<span class="o">.</span>
<span class="linenos">12</span>
<span class="linenos">13</span>odd<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>even<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">14</span>even<span class="w"> </span>(s<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>odd<span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">15</span>
<span class="linenos">16</span>even<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>(even<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">17</span>odd<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>declare_constraint<span class="w"> </span>(odd<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">18</span>
<span class="linenos">19</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">20</span><span class="w">  </span>even<span class="w"> </span><span class="nv">Z</span><span class="kd">,</span>
<span class="linenos">21</span><span class="w">  </span>declare_constraint<span class="w"> </span>true<span class="w"> </span><span class="nv">Z</span><span class="kd">,</span>
<span class="linenos">22</span><span class="w">  </span><span class="nv">Z</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>s<span class="w"> </span><span class="nv">W</span><span class="kd">,</span>
<span class="linenos">23</span><span class="w">  </span>not(even<span class="w"> </span><span class="nv">W</span><span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> odd X0  /* suspended on X0 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/trace_cut.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">p</span>.
<span class="linenos"> 2</span>p<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos"> 3</span>p<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>fail<span class="o">.</span>
<span class="linenos"> 4</span>p<span class="o">.</span>
<span class="linenos"> 5</span>p<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="mi">1</span><span class="o">.</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="kd">pred</span><span class="w"> </span><span class="nf">q</span>.
<span class="linenos"> 8</span>q<span class="o">.</span>
<span class="linenos"> 9</span>q<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">10</span>
<span class="linenos">11</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>p<span class="o">.</span>
<span class="linenos">12</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>q<span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>q<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>(q<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>q<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/trace_findall.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">p</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.
<span class="linenos">2</span>p<span class="w"> </span><span class="mi">1</span><span class="o">.</span>
<span class="linenos">3</span>p<span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">4</span>p<span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>p<span class="w"> </span><span class="mi">2</span><span class="o">.</span>
<span class="linenos">5</span>
<span class="linenos">6</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">7</span><span class="w">  </span>std.findall<span class="w"> </span>(p<span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">L</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[p 1, p 2, p 3]</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/trail.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">% Query: p X Z.</span>
<span class="linenos"> 2</span><span class="c">% Expected outcome: X=ok, Z=ok.</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="kd">kind</span><span class="w"> </span><span class="nf">tm</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 5</span><span class="kd">type</span><span class="w"> </span><span class="nf">a, b</span><span class="w"> </span><span class="kt">tm</span>.
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="kd">pred</span><span class="w"> </span><span class="nf">p</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">diagnostic</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">diagnostic</span>.
<span class="linenos"> 8</span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>foo<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span>r<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">Z</span><span class="o">.</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="kd">pred</span><span class="w"> </span><span class="nf">foo</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">tm</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="w"> </span><span class="kt">diagnostic</span>.
<span class="linenos">11</span>foo<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="kd">,</span><span class="w"> </span>q<span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">A</span><span class="o">.</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="kd">pred</span><span class="w"> </span><span class="nf">q</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">tm</span>.
<span class="linenos">14</span>q<span class="w"> </span>a<span class="o">.</span>
<span class="linenos">15</span>q<span class="w"> </span>b<span class="o">.</span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="kd">pred</span><span class="w"> </span><span class="nf">r</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">tm</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">diagnostic</span>.
<span class="linenos">18</span>r<span class="w"> </span>b<span class="w"> </span>ok<span class="o">.</span>
<span class="linenos">19</span>
<span class="linenos">20</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>p<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Z</span><span class="kd">,</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="kd">,</span><span class="w"> </span><span class="nv">Z</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>ok<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">xx</span><span class="w"> </span><span class="kt">bool</span>.
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kd">namespace</span><span class="w"> </span>foo<span class="w"> </span>{
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">xx</span>.
<span class="linenos"> 6</span>f<span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>}
<span class="linenos"> 9</span>
<span class="linenos">10</span>
<span class="linenos">11</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>foo.f<span class="w"> </span>tt<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv1.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">t1</span><span class="w"> </span><span class="kt">int</span>.
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">t1</span>.
<span class="linenos">4</span>f<span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos">5</span>
<span class="linenos">6</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span><span class="mi">3</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv10.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>typeabbrev<span class="w"> </span>(bar<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(list<span class="w"> </span><span class="nv">A</span><span class="o">).</span>
<span class="linenos">2</span>typeabbrev<span class="w"> </span>(tmp<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(list<span class="w"> </span><span class="nv">A</span><span class="o">).</span>
<span class="linenos">3</span>typeabbrev<span class="w"> </span>(foo<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span>(tmp<span class="w"> </span><span class="nv">A</span><span class="o">).</span>
<span class="linenos">4</span>
<span class="linenos">5</span><span class="kd">pred</span><span class="w"> </span><span class="nf">foo</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">int</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">int</span>.
<span class="linenos">6</span>
<span class="linenos">7</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>std.map<span class="w"> </span><span class="mi">3</span><span class="w"> </span>foo<span class="w"> </span><span class="nv">_</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/typeabbrv10.elpi&quot;, line 7, column 17, characters 128-128:</span>
<span class="go">literal &quot;3&quot; has type int but std.map expects a term of type list A</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv11.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">x</span><span class="w"> </span><span class="kt">int</span>.
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">x</span>.
<span class="linenos">4</span>f<span class="w"> </span><span class="s2">&quot;x&quot;</span><span class="o">.</span>
<span class="linenos">5</span>
<span class="linenos">6</span>main<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/typeabbrv11.elpi&quot;, line 4, column 3, characters 34-36:</span>
<span class="go">literal &quot;x&quot; has type string but f expects a term of type x</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv12.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">y</span><span class="w"> </span><span class="kt">(list</span><span class="w"> </span><span class="kt">int)</span>.
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">y</span>.
<span class="linenos">4</span>f<span class="w"> </span><span class="s2">&quot;x&quot;</span><span class="o">.</span>
<span class="linenos">5</span>
<span class="linenos">6</span>main<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/typeabbrv12.elpi&quot;, line 4, column 3, characters 41-43:</span>
<span class="go">literal &quot;x&quot; has type string but f expects a term of type y</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv2.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">t1</span><span class="w"> </span><span class="kt">int</span>.
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">t1</span>.
<span class="linenos">4</span>f<span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos">5</span>
<span class="linenos">6</span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">t1</span><span class="w"> </span><span class="kt">bool</span>.
<span class="linenos">7</span>
<span class="linenos">8</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span><span class="mi">3</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/typeabbrv2.elpi&quot;, line 6, column 0, characters 39-57:</span>
<span class="go">Duplicate type abbreviation for t1. Previous declaration: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/typeabbrv2.elpi&quot;, line 1, column 0, characters 0-17:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv3.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>typeabbrev<span class="w"> </span>(t1<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span>(pair<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">t1</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="kt">int</span>.
<span class="linenos">4</span>f<span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos">5</span>
<span class="linenos">6</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span>(pr<span class="w"> </span><span class="mi">2</span><span class="w"> </span>tt<span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv4.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">t1</span><span class="w"> </span><span class="kt">int</span>.
<span class="linenos">2</span>
<span class="linenos">3</span><span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">t1</span>.
<span class="linenos">4</span>f<span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos">5</span>
<span class="linenos">6</span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">t1</span><span class="w"> </span><span class="kt">int</span>.
<span class="linenos">7</span>
<span class="linenos">8</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span><span class="mi">3</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv5.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">x</span><span class="w"> </span><span class="kt">y</span>.
<span class="linenos">2</span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">y</span><span class="w"> </span><span class="kt">x</span>.
<span class="linenos">3</span>
<span class="linenos">4</span><span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">x</span>.
<span class="linenos">5</span>f<span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos">6</span>
<span class="linenos">7</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span><span class="mi">0</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/typeabbrv5.elpi&quot;, line 1, column 14, characters 14-14:</span>
<span class="go">Unknown type y</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv6.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">x</span><span class="w"> </span><span class="kt">(option</span><span class="w"> </span><span class="kt">A)</span>.
<span class="linenos">2</span><span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">x</span>.
<span class="linenos">3</span>f<span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos">4</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span>(some<span class="w"> </span><span class="mi">3</span><span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Fatal error: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/typeabbrv6.elpi&quot;, line 1, column 22, characters 22-22:</span>
<span class="go">Unknown type A</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv7.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">xx</span><span class="w"> </span><span class="kt">bool</span>.
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kd">namespace</span><span class="w"> </span>foo<span class="w"> </span>{
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">xx</span>.
<span class="linenos"> 6</span>f<span class="w"> </span><span class="nv">_</span><span class="o">.</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>}
<span class="linenos"> 9</span>
<span class="linenos">10</span>
<span class="linenos">11</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>foo.f<span class="w"> </span>tt<span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv8.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>{ <span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">xx</span><span class="w"> </span><span class="kt">bool</span>.<span class="w"> </span>}
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">g</span><span class="w"> </span><span class="kt">xx</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">xx</span>.
<span class="linenos"> 4</span>{
<span class="linenos"> 5</span><span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">xx</span>.
<span class="linenos"> 6</span>f<span class="w"> </span>(g<span class="w"> </span><span class="nv">_</span><span class="o">).</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>}
<span class="linenos"> 9</span>
<span class="linenos">10</span>
<span class="linenos">11</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span>(g<span class="w"> </span>tt<span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/typeabbrv9.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">t</span><span class="w"> </span><span class="kt">int</span>.
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="kd">namespace</span><span class="w"> </span>xx<span class="w"> </span>{
<span class="linenos"> 4</span><span class="w">    </span><span class="kd">typeabbrev</span><span class="w"> </span><span class="nf">t</span><span class="w"> </span><span class="kt">int</span>.
<span class="linenos"> 5</span>}
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="kd">pred</span><span class="w"> </span><span class="nf">f</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">t</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">xx.t</span>.
<span class="linenos"> 8</span>f<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="o">.</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span>f<span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/uminus.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">2</span><span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="kd">-</span><span class="w"> </span><span class="mi">2</span><span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">is</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="kd">+</span><span class="w"> </span><span class="kd">-</span><span class="mi">2</span><span class="kd">,</span>
<span class="linenos">3</span><span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w">  </span><span class="mi">1</span><span class="kd">,</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/uvar_chr.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">term</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 2</span><span class="kd">type</span><span class="w"> </span><span class="nf">app</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 3</span><span class="kd">type</span><span class="w"> </span><span class="nf">lam</span><span class="w"> </span><span class="kt">(term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kd">pred</span><span class="w"> </span><span class="nf">unsafe-cast</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">B</span>.
<span class="linenos"> 6</span><span class="err">:</span>untyped<span class="w"> </span>unsafe-cast<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="kd">pred</span><span class="w"> </span><span class="nf">mk-app</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">term</span>.
<span class="linenos"> 9</span>mk-app<span class="w"> </span><span class="nv">HD</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">HD</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">10</span>mk-app<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">K</span><span class="o">)</span><span class="w"> </span><span class="kd">[</span><span class="nv">A</span><span class="kd">|</span><span class="nv">Args</span><span class="kd">]</span><span class="w"> </span><span class="nv">R</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>unsafe-cast<span class="w"> </span><span class="nv">K</span><span class="w"> </span><span class="nv">K&#39;</span><span class="kd">,</span><span class="w"> </span>mk-app<span class="w"> </span>(<span class="nv">K&#39;</span><span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="nv">Args</span><span class="w"> </span><span class="nv">R</span><span class="o">.</span>
<span class="linenos">11</span>mk-app<span class="w"> </span><span class="nv">HD</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>mk-app<span class="w"> </span>(app<span class="w"> </span><span class="nv">HD</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="kd">pred</span><span class="w"> </span><span class="nf">copy</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">term</span>.
<span class="linenos">14</span>
<span class="linenos">15</span>copy<span class="w"> </span>(app<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>(app<span class="w"> </span><span class="nv">A1</span><span class="w"> </span><span class="nv">B1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A1</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">B1</span><span class="o">.</span>
<span class="linenos">16</span>copy<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">F1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F1</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos">17</span>copy<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="kd">as</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>var<span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>copy-list<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="kd">,</span><span class="w"> </span>mk-app<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span>
<span class="linenos">18</span>copy<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="nv">C</span><span class="w"> </span><span class="nv">L1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy-list<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="kd">pred</span><span class="w"> </span><span class="nf">copy-list</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos">21</span>copy-list<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
<span class="linenos">22</span>copy-list<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="kd">[</span><span class="nv">Y</span><span class="kd">|</span><span class="nv">YS</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span>copy-list<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">YS</span><span class="o">.</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="kd">pred</span><span class="w"> </span><span class="nf">meta-copy</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">term</span>.
<span class="linenos">25</span><span class="kd">constraint</span><span class="w"> </span><span class="nf">meta-copy </span>{
<span class="linenos">26</span><span class="w">  </span><span class="kd">rule</span><span class="w"> </span>(meta-copy<span class="w"> </span><span class="nv">I</span><span class="w"> </span><span class="nv">O</span><span class="o">)</span><span class="w"> </span><span class="kd">|</span><span class="w"> </span>(copy<span class="w"> </span><span class="nv">I</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">O</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">X</span><span class="o">).</span>
<span class="linenos">27</span>}
<span class="linenos">28</span>
<span class="linenos">29</span>main<span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span><span class="w"> </span><span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="kd">,</span>
<span class="linenos">30</span><span class="w">  </span>copy<span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">T</span><span class="kd">,</span><span class="w"> </span>print<span class="w"> </span><span class="nv">T</span><span class="kd">,</span>
<span class="linenos">31</span><span class="w">  </span>declare_constraint<span class="w"> </span>(meta-copy<span class="w"> </span><span class="nv">In</span><span class="w"> </span><span class="nv">S</span><span class="o">)</span><span class="w"> </span><span class="kd">[],</span><span class="w"> </span>print<span class="w"> </span><span class="nv">S</span><span class="kd">,</span><span class="w"> </span>not(var<span class="w"> </span><span class="nv">S</span><span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">lam X0</span>
<span class="go">lam c0 \ X0 c0</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/uvar_chr.elpi&quot;, line 30, column 22, characters 819-821:</span>
<span class="go">F is linear: name it _F (discard) or F_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> meta-copy (lam c0 \ X0 c0) (lam c0 \ X0 c0)  /* suspended on  */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/var.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">2</span><span class="w">  </span>var<span class="w"> </span><span class="nv">X0</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[],</span>
<span class="linenos">3</span><span class="w">  </span>var<span class="w"> </span><span class="nv">X1</span><span class="kd">,</span>
<span class="linenos">4</span><span class="w">  </span>var<span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">_</span><span class="kd">,</span>
<span class="linenos">5</span><span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x y</span>\<span class="w"> </span><span class="o">(</span>var<span class="w"> </span><span class="o">(</span><span class="nv">X3</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="kd">[</span>x<span class="kd">,</span>y<span class="kd">]</span><span class="o">))</span><span class="kd">,</span>
<span class="linenos">6</span><span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x y</span>\<span class="w"> </span><span class="o">(</span>var<span class="w"> </span><span class="o">(</span><span class="nv">X9</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">X9</span><span class="w"> </span><span class="o">(</span><span class="nv">X10</span><span class="w"> </span>x<span class="w"> </span>y<span class="o">)))</span><span class="kd">,</span>
<span class="linenos">7</span><span class="w">  </span>(<span class="kd">pi</span><span class="w"> </span><span class="nv">x y</span>\<span class="w"> </span><span class="kd">sigma</span><span class="w"> </span><span class="nv">X5</span>\<span class="w"> </span><span class="o">(</span>var<span class="w"> </span><span class="nv">X5</span><span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="kd">[</span>x<span class="kd">,</span>y<span class="kd">]</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos">8</span><span class="w">           </span>print<span class="w"> </span><span class="nv">X0</span><span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span><span class="nv">X2</span><span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span><span class="nv">X3</span><span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span><span class="nv">X4</span><span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span><span class="nv">X5</span><span class="o">).</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">X0 , X1 , X2 , X3 , X4 , X4 c0 c1</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/var.elpi&quot;, line 6, column 29, characters 113-120:</span>
<span class="go">X10 is linear: name it _X10 (discard) or X10_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/variadic_declare_constraints.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kd">kind</span><span class="w"> </span><span class="nf">tm</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos">2</span><span class="kd">type</span><span class="w"> </span><span class="nf">foo</span><span class="w"> </span><span class="kt">tm</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">(tm</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tm)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">prop</span>.
<span class="linenos">3</span>
<span class="linenos">4</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">5</span><span class="w">  </span>declare_constraint<span class="w"> </span>(foo<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">Y</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">[</span><span class="nv">Y</span><span class="kd">,</span><span class="w"> </span><span class="nv">Z</span><span class="kd">]</span><span class="o">.</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>
<span class="go">Warning: File &quot;/home/runner/work/elpi/elpi/docs/source/../../tests/sources/variadic_declare_constraints.elpi&quot;, line 5, column 38, characters 96-96:</span>
<span class="go">Z is linear: name it _Z (discard) or Z_ (fresh variable)</span>

<span class="go">Compilation time: 0.000</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>
<span class="go"> foo X0 X1  /* suspended on X0, X1, X2 */</span>

<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/w.elpi
:</strong></p>
<div class="highlight-elpi notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="kd">pred</span><span class="w"> </span><span class="nf">filter</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">(pred</span><span class="w"> </span><span class="kt">i</span><span class="err">:</span><span class="kt">A)</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>.
<span class="linenos">  2</span>filter<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="kd">[]</span><span class="o">.</span>
<span class="linenos">  3</span>filter<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">YS</span><span class="kd">]</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span><span class="w"> </span><span class="kd">!,</span><span class="w"> </span>filter<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">YS</span><span class="o">.</span>
<span class="linenos">  4</span>filter<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">YS</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>filter<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">YS</span><span class="o">.</span>
<span class="linenos">  5</span>
<span class="linenos">  6</span><span class="kd">pred</span><span class="w"> </span><span class="nf">mem</span><span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">A</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">A</span>.
<span class="linenos">  7</span>mem<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">_</span><span class="kd">]</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">!</span><span class="o">.</span>
<span class="linenos">  8</span>mem<span class="w"> </span><span class="kd">[</span><span class="nv">_</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>mem<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">  9</span>
<span class="linenos"> 10</span><span class="kd">kind</span><span class="w"> </span><span class="nf">term</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 11</span><span class="kd">type</span><span class="w"> </span><span class="nf">app</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 12</span><span class="kd">type</span><span class="w"> </span><span class="nf">lam</span><span class="w"> </span><span class="kt">(term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 13</span><span class="kd">type</span><span class="w"> </span><span class="nf">let</span><span class="w"> </span><span class="kt">term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">(term</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 14</span>
<span class="linenos"> 15</span><span class="kd">kind</span><span class="w"> </span><span class="nf">tye</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 16</span><span class="c">% elpi:skip 2</span>
<span class="linenos"> 17</span>infixr<span class="w"> </span><span class="kd">===&gt;</span><span class="w"> </span><span class="mi">50</span><span class="o">.</span>
<span class="linenos"> 18</span>infixl<span class="w"> </span>#<span class="w"> </span><span class="mi">60</span><span class="o">.</span>
<span class="linenos"> 19</span><span class="kd">type</span><span class="w"> </span><span class="nf">(===&gt;)</span><span class="w"> </span><span class="kt">tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tye</span>.
<span class="linenos"> 20</span><span class="kd">type</span><span class="w"> </span><span class="nf">(#)</span><span class="w"> </span><span class="kt">tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">tye</span>.
<span class="linenos"> 21</span>
<span class="linenos"> 22</span><span class="kd">kind</span><span class="w"> </span><span class="nf">ty</span><span class="w"> </span><span class="kt">type</span>.
<span class="linenos"> 23</span><span class="kd">type</span><span class="w"> </span><span class="nf">all</span><span class="w"> </span><span class="kt">(tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty)</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty</span>.
<span class="linenos"> 24</span><span class="kd">type</span><span class="w"> </span><span class="nf">mono</span><span class="w"> </span><span class="kt">tye</span><span class="w"> </span><span class="kt">-&gt;</span><span class="w"> </span><span class="kt">ty</span>.
<span class="linenos"> 25</span>
<span class="linenos"> 26</span><span class="kd">type</span><span class="w"> </span><span class="nf">one</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 27</span><span class="kd">type</span><span class="w"> </span><span class="nf">plus</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 28</span><span class="kd">type</span><span class="w"> </span><span class="nf">size</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 29</span><span class="kd">type</span><span class="w"> </span><span class="nf">empty</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 30</span><span class="kd">type</span><span class="w"> </span><span class="nf">comma</span><span class="w"> </span><span class="kt">term</span>.
<span class="linenos"> 31</span>
<span class="linenos"> 32</span><span class="kd">type</span><span class="w"> </span><span class="nf">integer</span><span class="w"> </span><span class="kt">tye</span>.
<span class="linenos"> 33</span><span class="kd">type</span><span class="w"> </span><span class="nf">list</span><span class="w"> </span><span class="kt">tye</span>.
<span class="linenos"> 34</span><span class="kd">type</span><span class="w"> </span><span class="nf">pair</span><span class="w"> </span><span class="kt">tye</span>.
<span class="linenos"> 35</span>
<span class="linenos"> 36</span><span class="c">% constants</span>
<span class="linenos"> 37</span>w<span class="w"> </span>one<span class="w">    </span>(mono<span class="w"> </span>integer<span class="o">).</span>
<span class="linenos"> 38</span>w<span class="w"> </span>plus<span class="w">   </span>(mono<span class="w"> </span><span class="o">(</span>integer<span class="w"> </span><span class="kd">===&gt;</span><span class="w"> </span>integer<span class="w"> </span><span class="kd">===&gt;</span><span class="w"> </span>integer<span class="o">)).</span>
<span class="linenos"> 39</span>w<span class="w"> </span>size<span class="w">   </span>(all<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>mono<span class="w"> </span><span class="o">(</span>list<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span><span class="kd">===&gt;</span><span class="w"> </span>integer<span class="o">)).</span>
<span class="linenos"> 40</span>w<span class="w"> </span>empty<span class="w">  </span>(all<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>mono<span class="w"> </span><span class="o">(</span>list<span class="w"> </span>#<span class="w"> </span>x<span class="o">)).</span>
<span class="linenos"> 41</span>w<span class="w"> </span>comma<span class="w">  </span>(all<span class="w"> </span><span class="nv">x\</span><span class="w"> </span>all<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>mono<span class="w"> </span><span class="o">(</span>x<span class="w"> </span><span class="kd">===&gt;</span><span class="w"> </span>y<span class="w"> </span><span class="kd">===&gt;</span><span class="w"> </span><span class="o">(</span>pair<span class="w"> </span>#<span class="w"> </span>x<span class="w"> </span>#<span class="w"> </span>y<span class="o">))).</span>
<span class="linenos"> 42</span>
<span class="linenos"> 43</span><span class="kd">pred</span><span class="w"> </span><span class="nf">w</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">term</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">ty</span>.
<span class="linenos"> 44</span>
<span class="linenos"> 45</span>w<span class="w"> </span>(app<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">R</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 46</span><span class="w">  </span>w<span class="w"> </span><span class="nv">F</span><span class="w"> </span>(mono<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">===&gt;</span><span class="w"> </span><span class="nv">R</span><span class="o">))</span><span class="kd">,</span>
<span class="linenos"> 47</span><span class="w">  </span>w<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">A</span><span class="o">).</span>
<span class="linenos"> 48</span>
<span class="linenos"> 49</span>w<span class="w"> </span>(lam<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="o">(</span><span class="nv">A</span><span class="w"> </span><span class="kd">===&gt;</span><span class="w"> </span><span class="nv">R</span><span class="o">))</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 50</span><span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>w<span class="w"> </span>x<span class="w"> </span>(mono<span class="w"> </span><span class="nv">A</span><span class="o">)</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>w<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">R</span><span class="o">).</span>
<span class="linenos"> 51</span>
<span class="linenos"> 52</span>w<span class="w"> </span>(let<span class="w"> </span><span class="nv">F</span><span class="w"> </span><span class="nv">FP</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">TC</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 53</span><span class="w">  </span>w<span class="w"> </span><span class="nv">F</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">FT</span><span class="o">)</span><span class="kd">,</span>
<span class="linenos"> 54</span><span class="w">  </span>declare_constraint<span class="w"> </span>(overbar<span class="w"> </span><span class="o">(</span>mono<span class="w"> </span><span class="nv">FT</span><span class="o">)</span><span class="w"> </span><span class="nv">FP</span><span class="o">)</span><span class="w"> </span><span class="kd">[],</span>
<span class="linenos"> 55</span><span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>w<span class="w"> </span>x<span class="w"> </span><span class="nv">FP</span><span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>w<span class="w"> </span>(<span class="nv">B</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">TC</span><span class="o">).</span>
<span class="linenos"> 56</span>
<span class="linenos"> 57</span>w<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>w<span class="w"> </span><span class="nv">X</span><span class="w"> </span>(all<span class="w"> </span><span class="nv">Poly</span><span class="o">)</span><span class="kd">,</span><span class="w"> </span>specialize<span class="w"> </span>(all<span class="w"> </span><span class="nv">Poly</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span>
<span class="linenos"> 58</span>
<span class="linenos"> 59</span>w<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">TY</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>print<span class="w"> </span><span class="s2">&quot;Error: &quot;</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="s2">&quot;cannot have type&quot;</span><span class="w"> </span><span class="nv">TY</span><span class="o">.</span>
<span class="linenos"> 60</span>
<span class="linenos"> 61</span><span class="kd">pred</span><span class="w"> </span><span class="nf">specialize</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">ty</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">tye</span>.
<span class="linenos"> 62</span>
<span class="linenos"> 63</span>specialize<span class="w"> </span>(all<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>specialize<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span><span class="nv">FRESH_</span><span class="o">)</span><span class="w"> </span><span class="nv">T</span><span class="o">.</span>
<span class="linenos"> 64</span>specialize<span class="w"> </span>(mono<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos"> 65</span>
<span class="linenos"> 66</span><span class="kd">pred</span><span class="w"> </span><span class="nf">overbar</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">ty</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">ty</span>.
<span class="linenos"> 67</span>
<span class="linenos"> 68</span><span class="kd">constraint</span><span class="w"> </span><span class="nf">w overbar </span>{
<span class="linenos"> 69</span>
<span class="linenos"> 70</span><span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(<span class="nv">G</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>overbar<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">T1</span><span class="o">)</span>
<span class="linenos"> 71</span><span class="w">     </span><span class="kd">|</span><span class="w"> </span>(generalize<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">POLYT</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(<span class="nv">T1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">POLYT</span><span class="o">).</span>
<span class="linenos"> 72</span>
<span class="linenos"> 73</span><span class="kd">rule</span><span class="w"> </span><span class="kd">\</span><span class="w"> </span>(<span class="nv">G</span><span class="w"> </span><span class="kd">?-</span><span class="w"> </span>overbar<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="kd">&lt;=&gt;</span><span class="w"> </span>(print<span class="w"> </span><span class="s2">&quot;overbar&quot;</span><span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="s2">&quot;|-&quot;</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="s2">&quot;failed&quot;</span><span class="kd">,</span><span class="w"> </span>halt<span class="o">).</span>
<span class="linenos"> 74</span>
<span class="linenos"> 75</span><span class="kd">pred</span><span class="w"> </span><span class="nf">generalize</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">prop</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">ty</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">ty</span>.
<span class="linenos"> 76</span>generalize<span class="w"> </span><span class="nv">G</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="nv">ALL</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos"> 77</span><span class="w">  </span>free-ty<span class="w"> </span>(mono<span class="w"> </span><span class="nv">T</span><span class="o">)</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">VT</span><span class="kd">,</span>
<span class="linenos"> 78</span><span class="w">  </span>free-gamma<span class="w"> </span><span class="nv">G</span><span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">VG</span><span class="kd">,</span>
<span class="linenos"> 79</span><span class="w">  </span>filter<span class="w"> </span><span class="nv">VT</span><span class="w"> </span>(<span class="nv">x\</span><span class="w"> </span>not<span class="o">(</span>mem<span class="w"> </span><span class="nv">VG</span><span class="w"> </span>x<span class="o">))</span><span class="w"> </span><span class="nv">Q</span><span class="kd">,</span>
<span class="linenos"> 80</span><span class="w">  </span>quantify<span class="w"> </span><span class="nv">Q</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">ALL</span><span class="o">.</span>
<span class="linenos"> 81</span>
<span class="linenos"> 82</span><span class="kd">pred</span><span class="w"> </span><span class="nf">free-ty</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">ty</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">any</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">any</span>.
<span class="linenos"> 83</span>free-ty<span class="w"> </span>(mono<span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>free<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span>
<span class="linenos"> 84</span>free-ty<span class="w"> </span>(all<span class="w"> </span><span class="nv">F</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>free-ty<span class="w"> </span>(<span class="nv">F</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="o">.</span>
<span class="linenos"> 85</span>
<span class="linenos"> 86</span><span class="kd">pred</span><span class="w"> </span><span class="nf">free-gamma</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">prop</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">any</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">any</span>.<span class="w"> </span>
<span class="linenos"> 87</span>free-gamma<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span>
<span class="linenos"> 88</span>free-gamma<span class="w"> </span><span class="kd">[</span>w<span class="w"> </span><span class="nv">_</span><span class="w"> </span><span class="nv">T</span><span class="kd">|</span><span class="nv">X</span><span class="kd">]</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>free-ty<span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="kd">,</span><span class="w"> </span>free-gamma<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="nv">L2</span><span class="o">.</span>
<span class="linenos"> 89</span>
<span class="linenos"> 90</span><span class="kd">pred</span><span class="w"> </span><span class="nf">free</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">tye</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">any</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">list</span><span class="w"> </span><span class="kt">any</span>.
<span class="linenos"> 91</span>free<span class="w"> </span>(<span class="nv">A</span><span class="w"> </span>#<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>free<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="kd">,</span><span class="w"> </span>free<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="nv">L2</span><span class="o">.</span>
<span class="linenos"> 92</span>free<span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">===&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L2</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>free<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="kd">,</span><span class="w"> </span>free<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="nv">L2</span><span class="o">.</span>
<span class="linenos"> 93</span>free<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L1</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>if<span class="w"> </span>(mem<span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">X</span><span class="o">)</span><span class="w"> </span>(<span class="nv">L1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="nv">L</span><span class="o">)</span><span class="w"> </span>(<span class="nv">L1</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">L</span><span class="kd">]</span><span class="o">).</span>
<span class="linenos"> 94</span>free<span class="w"> </span><span class="nv">_X</span><span class="w"> </span><span class="nv">L</span><span class="w"> </span><span class="nv">L</span><span class="o">.</span>
<span class="linenos"> 95</span>
<span class="linenos"> 96</span><span class="kd">pred</span><span class="w"> </span><span class="nf">copy-ty</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">ty</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">ty</span>.
<span class="linenos"> 97</span>copy-ty<span class="w"> </span>(mono<span class="w"> </span><span class="nv">X1</span><span class="o">)</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">X2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">X1</span><span class="w"> </span><span class="nv">X2</span><span class="o">.</span>
<span class="linenos"> 98</span>copy-ty<span class="w"> </span>(all<span class="w"> </span><span class="nv">F1</span><span class="o">)</span><span class="w"> </span>(all<span class="w"> </span><span class="nv">F2</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>x<span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy-ty<span class="w"> </span>(<span class="nv">F1</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span>(<span class="nv">F2</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos"> 99</span>
<span class="linenos">100</span><span class="kd">pred</span><span class="w"> </span><span class="nf">copy</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">tye</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">tye</span>.
<span class="linenos">101</span>copy<span class="w"> </span>(<span class="nv">A</span><span class="w"> </span><span class="kd">===&gt;</span><span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>(<span class="nv">A1</span><span class="w"> </span><span class="kd">===&gt;</span><span class="w"> </span><span class="nv">B1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A1</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">B1</span><span class="o">.</span>
<span class="linenos">102</span>copy<span class="w"> </span>(<span class="nv">A</span><span class="w"> </span>#<span class="w"> </span><span class="nv">B</span><span class="o">)</span><span class="w"> </span>(<span class="nv">A1</span><span class="w"> </span>#<span class="w"> </span><span class="nv">B1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">A1</span><span class="kd">,</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">B</span><span class="w"> </span><span class="nv">B1</span><span class="o">.</span>
<span class="linenos">103</span>copy<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X</span><span class="o">.</span>
<span class="linenos">104</span>
<span class="linenos">105</span><span class="kd">pred</span><span class="w"> </span><span class="nf">quantify</span><span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">list</span><span class="w"> </span><span class="kt">tye</span>,<span class="w"> </span><span class="k k-Mode">i:</span><span class="kt">tye</span>,<span class="w"> </span><span class="k k-Mode">o:</span><span class="kt">ty</span>.
<span class="linenos">106</span>quantify<span class="w"> </span><span class="kd">[]</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span>(mono<span class="w"> </span><span class="nv">X1</span><span class="o">)</span><span class="w"> </span><span class="kd">:-</span><span class="w"> </span>copy<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">X1</span><span class="o">.</span>
<span class="linenos">107</span>quantify<span class="w"> </span><span class="kd">[</span><span class="nv">X</span><span class="kd">|</span><span class="nv">XS</span><span class="kd">]</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span>(all<span class="w"> </span><span class="nv">x\</span><span class="w"> </span><span class="nv">T2</span><span class="w"> </span>x<span class="o">)</span><span class="w"> </span><span class="kd">:-</span>
<span class="linenos">108</span><span class="w">  </span>quantify<span class="w"> </span><span class="nv">XS</span><span class="w"> </span><span class="nv">T</span><span class="w"> </span><span class="nv">T1</span><span class="kd">,</span>
<span class="linenos">109</span><span class="w">  </span><span class="kd">pi</span><span class="w"> </span><span class="nv">x</span>\<span class="w"> </span>copy<span class="w"> </span>(<span class="kd">uvar</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">_</span><span class="o">)</span><span class="w"> </span>x<span class="w"> </span><span class="kd">=&gt;</span><span class="w"> </span>copy-ty<span class="w"> </span><span class="nv">T1</span><span class="w"> </span>(<span class="nv">T2</span><span class="w"> </span>x<span class="o">).</span>
<span class="linenos">110</span>
<span class="linenos">111</span>}
<span class="linenos">112</span>
<span class="linenos">113</span>main<span class="w"> </span><span class="kd">:-</span>
<span class="linenos">114</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Test 1&quot;</span><span class="kd">,</span>
<span class="linenos">115</span><span class="w">  </span><span class="nv">P</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>let<span class="w"> </span>(lam<span class="w"> </span><span class="nv">x\</span>x<span class="o">)</span><span class="w"> </span><span class="nv">T_</span><span class="w"> </span>(<span class="nv">id\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>plus<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>id<span class="w"> </span>one<span class="o">))</span>
<span class="linenos">116</span><span class="w">                                  </span><span class="o">(</span>app<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>id<span class="w"> </span>empty<span class="o">)))</span><span class="kd">,</span>
<span class="linenos">117</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Typing&quot;</span><span class="w"> </span><span class="nv">P</span><span class="kd">,</span>
<span class="linenos">118</span><span class="w">  </span>w<span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="nv">TP</span><span class="kd">,</span>
<span class="linenos">119</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;OK&quot;</span><span class="w"> </span><span class="nv">P</span><span class="w"> </span><span class="s2">&quot;has type&quot;</span><span class="w"> </span><span class="nv">TP</span><span class="kd">,</span>
<span class="linenos">120</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;&quot;</span><span class="kd">,</span>
<span class="linenos">121</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Test 2&quot;</span><span class="kd">,</span>
<span class="linenos">122</span><span class="w">  </span><span class="nv">X</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>lam<span class="w"> </span>(<span class="nv">x\</span>
<span class="linenos">123</span><span class="w">        </span>let<span class="w"> </span><span class="o">(</span>lam<span class="w"> </span><span class="nv">y\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>comma<span class="w"> </span>x<span class="o">)</span><span class="w"> </span>y<span class="o">)</span><span class="w"> </span><span class="nv">Y_</span><span class="w"> </span><span class="o">(</span><span class="nv">mk\</span>
<span class="linenos">124</span><span class="w">          </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>comma<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>mk<span class="w"> </span>one<span class="o">))</span><span class="w"> </span><span class="o">(</span>app<span class="w"> </span>mk<span class="w"> </span>x<span class="o">)))</span><span class="kd">,</span>
<span class="linenos">125</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Typing&quot;</span><span class="w"> </span><span class="nv">X</span><span class="kd">,</span>
<span class="linenos">126</span><span class="w">  </span>w<span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="nv">XT</span><span class="kd">,</span>
<span class="linenos">127</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;OK&quot;</span><span class="w"> </span><span class="nv">X</span><span class="w"> </span><span class="s2">&quot;has type&quot;</span><span class="w"> </span><span class="nv">XT</span><span class="kd">,</span>
<span class="linenos">128</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;&quot;</span><span class="kd">,</span>
<span class="linenos">129</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Test 3&quot;</span><span class="kd">,</span>
<span class="linenos">130</span><span class="w">  </span><span class="nv">Q</span><span class="w"> </span><span class="kd">=</span><span class="w"> </span>lam<span class="w"> </span>(<span class="nv">id\</span><span class="w"> </span>app<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>plus<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>id<span class="w"> </span>one<span class="o">))</span>
<span class="linenos">131</span><span class="w">                                  </span><span class="o">(</span>app<span class="w"> </span>size<span class="w"> </span><span class="o">(</span>app<span class="w"> </span>id<span class="w"> </span>empty<span class="o">)))</span><span class="kd">,</span>
<span class="linenos">132</span><span class="w">  </span>print<span class="w"> </span><span class="s2">&quot;Typing&quot;</span><span class="w"> </span><span class="nv">Q</span><span class="kd">,</span>
<span class="linenos">133</span><span class="w">  </span>w<span class="w"> </span><span class="nv">Q</span><span class="w"> </span><span class="nv">_TQ</span><span class="o">.</span><span class="w"> </span><span class="c">% should print error</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Test 1</span>
<span class="go">Typing</span>
<span class="go"> let (lam c0 \ c0) X0 c0 \</span>
<span class="go">  app (app plus (app c0 one)) (app size (app c0 empty))</span>
<span class="go">OK</span>
<span class="go"> let (lam c0 \ c0) (all c0 \ mono (c0 ===&gt; c0)) c0 \</span>
<span class="go">  app (app plus (app c0 one)) (app size (app c0 empty)) has type mono integer</span>

<span class="go">Test 2</span>
<span class="go">Typing</span>
<span class="go"> lam c0 \</span>
<span class="go">  let (lam c1 \ app (app comma c0) c1) X1 c1 \</span>
<span class="go">   app (app comma (app c1 one)) (app c1 c0)</span>
<span class="go">OK</span>
<span class="go"> lam c0 \</span>
<span class="go">  let (lam c1 \ app (app comma c0) c1)</span>
<span class="go">   (all c1 \ mono (c1 ===&gt; pair # X2 # c1)) c1 \</span>
<span class="go">   app (app comma (app c1 one)) (app c1 c0) has type</span>
<span class="go"> mono (X2 ===&gt; pair # (pair # X2 # integer) # (pair # X2 # X2))</span>

<span class="go">Test 3</span>
<span class="go">Typing lam c0 \ app (app plus (app c0 one)) (app size (app c0 empty))</span>
<span class="go">Error:  c0 cannot have type all X3^1</span>
<span class="go">Error:  c0 cannot have type mono (X4^1 ===&gt; list # X5^1)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Parsing time: 0.000</span>

<span class="go">Compilation time: 0.001</span>

<span class="go">Typechecking time: 0.002</span>

<span class="go">Success:</span>

<span class="go">Time: 0.000</span>

<span class="go">Constraints:</span>


<span class="go">State:</span>
</pre></div>
</div>
<p><strong>../../tests/sources/w_legacy.elpi
:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Fatal error: exception Failure(&quot;File /home/runner/work/elpi/elpi/docs/source/../../tests/sources/w_legacy.elpi not found in: /home/runner/work/elpi/elpi/_build/default/../lib/, /home/runner/work/elpi/elpi/_build/default/../lib/ocaml, /home/runner/work/elpi/elpi/_build/install/default/lib, /home/runner/work/elpi/elpi/_build/default&quot;)</span>
</pre></div>
</div>
<p><strong>../../tests/sources/zebra.elpi:</strong></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Fatal error: exception Failure(&quot;File /home/runner/work/elpi/elpi/docs/source/../../tests/sources/zebra.elp not found in: /home/runner/work/elpi/elpi/_build/default/../lib/, /home/runner/work/elpi/elpi/_build/default/../lib/ocaml, /home/runner/work/elpi/elpi/_build/install/default/lib, /home/runner/work/elpi/elpi/_build/default&quot;)</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Enrico Tassi.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>